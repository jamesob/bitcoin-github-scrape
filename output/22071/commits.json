[
  {
    "sha": "f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMTZkNGNkOGM1NDEyODkwZWUwYjczZjRlZjE0MmI1OWQxMzBlNWQ1",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-26T05:28:47Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-26T05:28:47Z"
      },
      "message": "depends: latest config.guess (2021-05-24)",
      "tree": {
        "sha": "c34c9e4373568e09336d10081cecdb07c5c39295",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c34c9e4373568e09336d10081cecdb07c5c39295"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmCt3I8ACgkQLuufXMCV\nJsEgBg/8CsqsGNKMe7/C/7rRtQWEvxz9tY/RZnHavRHaZdocs4h4hSNIO272EUv2\nhKNXFlV0mkYutMT1awcumNFg6dLBYUzyyUoedp8flm+tS/4iWmMaYre6jLFzLFNx\nvGJO7J/wVp8B+3RN2FTGqE5PB7LY6aJ6pZmzeV+FKuNp0gojGr+s85cyxCpPXtjr\nA0UPr86Sbd4KMeZ6nJYFo3oHqwJPvOWypSUJn+qGNs3hsVR5YJjQZxocF4yr4tuu\nENHcPN01BvJlsRj9HwbqRexMVAYE5LVaq47e7UPLTIloK22/fAQp/AlxCr1DfuvF\n64UVm3B/VVBDR7jEPwyMpHH+OY734dlK9psjmiLOkaBtf9y0WcH6WWvX0fxa0Xrn\ncSpkLFGRszNCPgmu92P0DZipYQ3Jor5CMs7pAGP+GV0sN5lZ+X7V+XANLzWDszEu\n0myE0qgh9lvGra1L2/LD5OX3WeidJarDXO/hx8/ee7vcWxIV5jYfXNzxx6oRrdZA\niLNvGC6gFihuTz4wTDBPTdEhfnRc8smad7eXu6+z5qYXKjCYJzoEXfEhkE1x6B3y\neKscuGyG9Ld/a3Cdm55nG0U6ZTt49YB5x++h9Bo+YqlN+w0IdRfW7sRlaaJRnj33\n6MuKXAxIl/SGPQPdfXL8/5KMq8H2hpq675ZRmnoJymPMaLyNdBQ=\n=Cwzr\n-----END PGP SIGNATURE-----",
        "payload": "tree c34c9e4373568e09336d10081cecdb07c5c39295\nparent 2e7c3461c0142ca989440d5d7abaed054c7b1e7a\nauthor fanquake <fanquake@gmail.com> 1622006927 +0800\ncommitter fanquake <fanquake@gmail.com> 1622006927 +0800\n\ndepends: latest config.guess (2021-05-24)\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2e7c3461c0142ca989440d5d7abaed054c7b1e7a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2e7c3461c0142ca989440d5d7abaed054c7b1e7a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2e7c3461c0142ca989440d5d7abaed054c7b1e7a"
      }
    ],
    "stats": {
      "total": 329,
      "additions": 183,
      "deletions": 146
    },
    "files": [
      {
        "sha": "dc0a6b29976a9990ef412d3c5fd696ac2641ae0b",
        "filename": "depends/config.guess",
        "status": "modified",
        "additions": 183,
        "deletions": 146,
        "changes": 329,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5/depends/config.guess",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5/depends/config.guess",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/config.guess?ref=f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
        "patch": "@@ -1,8 +1,8 @@\n #! /bin/sh\n # Attempt to guess a canonical system name.\n-#   Copyright 1992-2019 Free Software Foundation, Inc.\n+#   Copyright 1992-2021 Free Software Foundation, Inc.\n \n-timestamp='2019-09-10'\n+timestamp='2021-05-24'\n \n # This file is free software; you can redistribute it and/or modify it\n # under the terms of the GNU General Public License as published by\n@@ -27,12 +27,12 @@ timestamp='2019-09-10'\n # Originally written by Per Bothner; maintained since 2000 by Ben Elliston.\n #\n # You can get the latest version of this script from:\n-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess\n+# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess\n #\n # Please send patches to <config-patches@gnu.org>.\n \n \n-me=`echo \"$0\" | sed -e 's,.*/,,'`\n+me=$(echo \"$0\" | sed -e 's,.*/,,')\n \n usage=\"\\\n Usage: $0 [OPTION]\n@@ -50,7 +50,7 @@ version=\"\\\n GNU config.guess ($timestamp)\n \n Originally written by Per Bothner.\n-Copyright 1992-2019 Free Software Foundation, Inc.\n+Copyright 1992-2021 Free Software Foundation, Inc.\n \n This is free software; see the source for copying conditions.  There is NO\n warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\"\n@@ -99,9 +99,11 @@ tmp=\n trap 'test -z \"$tmp\" || rm -fr \"$tmp\"' 0 1 2 13 15\n \n set_cc_for_build() {\n+    # prevent multiple calls if $tmp is already set\n+    test \"$tmp\" && return 0\n     : \"${TMPDIR=/tmp}\"\n     # shellcheck disable=SC2039\n-    { tmp=`(umask 077 && mktemp -d \"$TMPDIR/cgXXXXXX\") 2>/dev/null` && test -n \"$tmp\" && test -d \"$tmp\" ; } ||\n+    { tmp=$( (umask 077 && mktemp -d \"$TMPDIR/cgXXXXXX\") 2>/dev/null) && test -n \"$tmp\" && test -d \"$tmp\" ; } ||\n \t{ test -n \"$RANDOM\" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir \"$tmp\" 2>/dev/null) ; } ||\n \t{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir \"$tmp\" 2>/dev/null) && echo \"Warning: creating insecure temp directory\" >&2 ; } ||\n \t{ echo \"$me: cannot create a temporary directory in $TMPDIR\" >&2 ; exit 1 ; }\n@@ -129,16 +131,14 @@ if test -f /.attbin/uname ; then\n \tPATH=$PATH:/.attbin ; export PATH\n fi\n \n-UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown\n-UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown\n-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown\n-UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown\n+UNAME_MACHINE=$( (uname -m) 2>/dev/null) || UNAME_MACHINE=unknown\n+UNAME_RELEASE=$( (uname -r) 2>/dev/null) || UNAME_RELEASE=unknown\n+UNAME_SYSTEM=$( (uname -s) 2>/dev/null) || UNAME_SYSTEM=unknown\n+UNAME_VERSION=$( (uname -v) 2>/dev/null) || UNAME_VERSION=unknown\n \n-case \"$UNAME_SYSTEM\" in\n+case $UNAME_SYSTEM in\n Linux|GNU|GNU/*)\n-\t# If the system lacks a compiler, then just pick glibc.\n-\t# We could probably try harder.\n-\tLIBC=gnu\n+\tLIBC=unknown\n \n \tset_cc_for_build\n \tcat <<-EOF > \"$dummy.c\"\n@@ -147,24 +147,36 @@ Linux|GNU|GNU/*)\n \tLIBC=uclibc\n \t#elif defined(__dietlibc__)\n \tLIBC=dietlibc\n-\t#else\n+\t#elif defined(__GLIBC__)\n \tLIBC=gnu\n+\t#else\n+\t#include <stdarg.h>\n+\t/* First heuristic to detect musl libc.  */\n+\t#ifdef __DEFINED_va_list\n+\tLIBC=musl\n+\t#endif\n \t#endif\n \tEOF\n-\teval \"`$CC_FOR_BUILD -E \"$dummy.c\" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`\"\n+\teval \"$($CC_FOR_BUILD -E \"$dummy.c\" 2>/dev/null | grep '^LIBC' | sed 's, ,,g')\"\n \n-\t# If ldd exists, use it to detect musl libc.\n-\tif command -v ldd >/dev/null && \\\n-\t\tldd --version 2>&1 | grep -q ^musl\n-\tthen\n-\t    LIBC=musl\n+\t# Second heuristic to detect musl libc.\n+\tif [ \"$LIBC\" = unknown ] &&\n+\t   command -v ldd >/dev/null &&\n+\t   ldd --version 2>&1 | grep -q ^musl; then\n+\t\tLIBC=musl\n+\tfi\n+\n+\t# If the system lacks a compiler, then just pick glibc.\n+\t# We could probably try harder.\n+\tif [ \"$LIBC\" = unknown ]; then\n+\t\tLIBC=gnu\n \tfi\n \t;;\n esac\n \n # Note: order is significant - the case branches are not exclusive.\n \n-case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n+case $UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION in\n     *:NetBSD:*:*)\n \t# NetBSD (nbsd) targets should (where applicable) match one or\n \t# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,\n@@ -176,27 +188,27 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \t#\n \t# Note: NetBSD doesn't particularly care about the vendor\n \t# portion of the name.  We always set it to \"unknown\".\n-\tsysctl=\"sysctl -n hw.machine_arch\"\n-\tUNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \\\n-\t    \"/sbin/$sysctl\" 2>/dev/null || \\\n-\t    \"/usr/sbin/$sysctl\" 2>/dev/null || \\\n-\t    echo unknown)`\n-\tcase \"$UNAME_MACHINE_ARCH\" in\n+\tUNAME_MACHINE_ARCH=$( (uname -p 2>/dev/null || \\\n+\t    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \\\n+\t    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \\\n+\t    echo unknown))\n+\tcase $UNAME_MACHINE_ARCH in\n+\t    aarch64eb) machine=aarch64_be-unknown ;;\n \t    armeb) machine=armeb-unknown ;;\n \t    arm*) machine=arm-unknown ;;\n \t    sh3el) machine=shl-unknown ;;\n \t    sh3eb) machine=sh-unknown ;;\n \t    sh5el) machine=sh5le-unknown ;;\n \t    earmv*)\n-\t\tarch=`echo \"$UNAME_MACHINE_ARCH\" | sed -e 's,^e\\(armv[0-9]\\).*$,\\1,'`\n-\t\tendian=`echo \"$UNAME_MACHINE_ARCH\" | sed -ne 's,^.*\\(eb\\)$,\\1,p'`\n+\t\tarch=$(echo \"$UNAME_MACHINE_ARCH\" | sed -e 's,^e\\(armv[0-9]\\).*$,\\1,')\n+\t\tendian=$(echo \"$UNAME_MACHINE_ARCH\" | sed -ne 's,^.*\\(eb\\)$,\\1,p')\n \t\tmachine=\"${arch}${endian}\"-unknown\n \t\t;;\n \t    *) machine=\"$UNAME_MACHINE_ARCH\"-unknown ;;\n \tesac\n \t# The Operating System including object format, if it has switched\n \t# to ELF recently (or will in the future) and ABI.\n-\tcase \"$UNAME_MACHINE_ARCH\" in\n+\tcase $UNAME_MACHINE_ARCH in\n \t    earm*)\n \t\tos=netbsdelf\n \t\t;;\n@@ -217,23 +229,23 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \t\t;;\n \tesac\n \t# Determine ABI tags.\n-\tcase \"$UNAME_MACHINE_ARCH\" in\n+\tcase $UNAME_MACHINE_ARCH in\n \t    earm*)\n \t\texpr='s/^earmv[0-9]/-eabi/;s/eb$//'\n-\t\tabi=`echo \"$UNAME_MACHINE_ARCH\" | sed -e \"$expr\"`\n+\t\tabi=$(echo \"$UNAME_MACHINE_ARCH\" | sed -e \"$expr\")\n \t\t;;\n \tesac\n \t# The OS release\n \t# Debian GNU/NetBSD machines have a different userland, and\n \t# thus, need a distinct triplet. However, they do not need\n \t# kernel version information, so it can be replaced with a\n \t# suitable tag, in the style of linux-gnu.\n-\tcase \"$UNAME_VERSION\" in\n+\tcase $UNAME_VERSION in\n \t    Debian*)\n \t\trelease='-gnu'\n \t\t;;\n \t    *)\n-\t\trelease=`echo \"$UNAME_RELEASE\" | sed -e 's/[-_].*//' | cut -d. -f1,2`\n+\t\trelease=$(echo \"$UNAME_RELEASE\" | sed -e 's/[-_].*//' | cut -d. -f1,2)\n \t\t;;\n \tesac\n \t# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:\n@@ -242,15 +254,19 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \techo \"$machine-${os}${release}${abi-}\"\n \texit ;;\n     *:Bitrig:*:*)\n-\tUNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`\n+\tUNAME_MACHINE_ARCH=$(arch | sed 's/Bitrig.//')\n \techo \"$UNAME_MACHINE_ARCH\"-unknown-bitrig\"$UNAME_RELEASE\"\n \texit ;;\n     *:OpenBSD:*:*)\n-\tUNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`\n+\tUNAME_MACHINE_ARCH=$(arch | sed 's/OpenBSD.//')\n \techo \"$UNAME_MACHINE_ARCH\"-unknown-openbsd\"$UNAME_RELEASE\"\n \texit ;;\n+    *:SecBSD:*:*)\n+\tUNAME_MACHINE_ARCH=$(arch | sed 's/SecBSD.//')\n+\techo \"$UNAME_MACHINE_ARCH\"-unknown-secbsd\"$UNAME_RELEASE\"\n+\texit ;;\n     *:LibertyBSD:*:*)\n-\tUNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\\.//'`\n+\tUNAME_MACHINE_ARCH=$(arch | sed 's/^.*BSD\\.//')\n \techo \"$UNAME_MACHINE_ARCH\"-unknown-libertybsd\"$UNAME_RELEASE\"\n \texit ;;\n     *:MidnightBSD:*:*)\n@@ -284,20 +300,22 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \techo mips-dec-osf1\n \texit ;;\n     alpha:OSF1:*:*)\n+\t# Reset EXIT trap before exiting to avoid spurious non-zero exit code.\n+\ttrap '' 0\n \tcase $UNAME_RELEASE in\n \t*4.0)\n-\t\tUNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`\n+\t\tUNAME_RELEASE=$(/usr/sbin/sizer -v | awk '{print $3}')\n \t\t;;\n \t*5.*)\n-\t\tUNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`\n+\t\tUNAME_RELEASE=$(/usr/sbin/sizer -v | awk '{print $4}')\n \t\t;;\n \tesac\n \t# According to Compaq, /usr/sbin/psrinfo has been available on\n \t# OSF/1 and Tru64 systems produced since 1995.  I hope that\n \t# covers most systems running today.  This code pipes the CPU\n \t# types through head -n 1, so we only detect the type of CPU 0.\n-\tALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \\(.*\\) processor.*$/\\1/p' | head -n 1`\n-\tcase \"$ALPHA_CPU_TYPE\" in\n+\tALPHA_CPU_TYPE=$(/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \\(.*\\) processor.*$/\\1/p' | head -n 1)\n+\tcase $ALPHA_CPU_TYPE in\n \t    \"EV4 (21064)\")\n \t\tUNAME_MACHINE=alpha ;;\n \t    \"EV4.5 (21064)\")\n@@ -334,11 +352,8 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \t# A Tn.n version is a released field test version.\n \t# A Xn.n version is an unreleased experimental baselevel.\n \t# 1.2 uses \"1.2\" for uname -r.\n-\techo \"$UNAME_MACHINE\"-dec-osf\"`echo \"$UNAME_RELEASE\" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`\"\n-\t# Reset EXIT trap before exiting to avoid spurious non-zero exit code.\n-\texitcode=$?\n-\ttrap '' 0\n-\texit $exitcode ;;\n+\techo \"$UNAME_MACHINE\"-dec-osf\"$(echo \"$UNAME_RELEASE\" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz)\"\n+\texit ;;\n     Amiga*:UNIX_System_V:4.0:*)\n \techo m68k-unknown-sysv4\n \texit ;;\n@@ -368,7 +383,7 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \texit ;;\n     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)\n \t# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.\n-\tif test \"`(/bin/universe) 2>/dev/null`\" = att ; then\n+\tif test \"$( (/bin/universe) 2>/dev/null)\" = att ; then\n \t\techo pyramid-pyramid-sysv3\n \telse\n \t\techo pyramid-pyramid-bsd\n@@ -381,17 +396,17 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \techo sparc-icl-nx6\n \texit ;;\n     DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)\n-\tcase `/usr/bin/uname -p` in\n+\tcase $(/usr/bin/uname -p) in\n \t    sparc) echo sparc-icl-nx7; exit ;;\n \tesac ;;\n     s390x:SunOS:*:*)\n-\techo \"$UNAME_MACHINE\"-ibm-solaris2\"`echo \"$UNAME_RELEASE\" | sed -e 's/[^.]*//'`\"\n+\techo \"$UNAME_MACHINE\"-ibm-solaris2\"$(echo \"$UNAME_RELEASE\" | sed -e 's/[^.]*//')\"\n \texit ;;\n     sun4H:SunOS:5.*:*)\n-\techo sparc-hal-solaris2\"`echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//'`\"\n+\techo sparc-hal-solaris2\"$(echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//')\"\n \texit ;;\n     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)\n-\techo sparc-sun-solaris2\"`echo \"$UNAME_RELEASE\" | sed -e 's/[^.]*//'`\"\n+\techo sparc-sun-solaris2\"$(echo \"$UNAME_RELEASE\" | sed -e 's/[^.]*//')\"\n \texit ;;\n     i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)\n \techo i386-pc-auroraux\"$UNAME_RELEASE\"\n@@ -402,38 +417,38 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \t# If there is a compiler, see if it is configured for 64-bit objects.\n \t# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.\n \t# This test works for both compilers.\n-\tif [ \"$CC_FOR_BUILD\" != no_compiler_found ]; then\n+\tif test \"$CC_FOR_BUILD\" != no_compiler_found; then\n \t    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \\\n \t\t(CCOPTS=\"\" $CC_FOR_BUILD -E - 2>/dev/null) | \\\n \t\tgrep IS_64BIT_ARCH >/dev/null\n \t    then\n \t\tSUN_ARCH=x86_64\n \t    fi\n \tfi\n-\techo \"$SUN_ARCH\"-pc-solaris2\"`echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//'`\"\n+\techo \"$SUN_ARCH\"-pc-solaris2\"$(echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//')\"\n \texit ;;\n     sun4*:SunOS:6*:*)\n \t# According to config.sub, this is the proper way to canonicalize\n \t# SunOS6.  Hard to guess exactly what SunOS6 will be like, but\n \t# it's likely to be more like Solaris than SunOS4.\n-\techo sparc-sun-solaris3\"`echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//'`\"\n+\techo sparc-sun-solaris3\"$(echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//')\"\n \texit ;;\n     sun4*:SunOS:*:*)\n-\tcase \"`/usr/bin/arch -k`\" in\n+\tcase $(/usr/bin/arch -k) in\n \t    Series*|S4*)\n-\t\tUNAME_RELEASE=`uname -v`\n+\t\tUNAME_RELEASE=$(uname -v)\n \t\t;;\n \tesac\n \t# Japanese Language versions have a version number like `4.1.3-JL'.\n-\techo sparc-sun-sunos\"`echo \"$UNAME_RELEASE\"|sed -e 's/-/_/'`\"\n+\techo sparc-sun-sunos\"$(echo \"$UNAME_RELEASE\"|sed -e 's/-/_/')\"\n \texit ;;\n     sun3*:SunOS:*:*)\n \techo m68k-sun-sunos\"$UNAME_RELEASE\"\n \texit ;;\n     sun*:*:4.2BSD:*)\n-\tUNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`\n+\tUNAME_RELEASE=$( (sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null)\n \ttest \"x$UNAME_RELEASE\" = x && UNAME_RELEASE=3\n-\tcase \"`/bin/arch`\" in\n+\tcase $(/bin/arch) in\n \t    sun3)\n \t\techo m68k-sun-sunos\"$UNAME_RELEASE\"\n \t\t;;\n@@ -513,8 +528,8 @@ case \"$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION\" in\n \t}\n EOF\n \t$CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" &&\n-\t  dummyarg=`echo \"$UNAME_RELEASE\" | sed -n 's/\\([0-9]*\\).*/\\1/p'` &&\n-\t  SYSTEM_NAME=`\"$dummy\" \"$dummyarg\"` &&\n+\t  dummyarg=$(echo \"$UNAME_RELEASE\" | sed -n 's/\\([0-9]*\\).*/\\1/p') &&\n+\t  SYSTEM_NAME=$(\"$dummy\" \"$dummyarg\") &&\n \t    { echo \"$SYSTEM_NAME\"; exit; }\n \techo mips-mips-riscos\"$UNAME_RELEASE\"\n \texit ;;\n@@ -541,11 +556,11 @@ EOF\n \texit ;;\n     AViiON:dgux:*:*)\n \t# DG/UX returns AViiON for all architectures\n-\tUNAME_PROCESSOR=`/usr/bin/uname -p`\n-\tif [ \"$UNAME_PROCESSOR\" = mc88100 ] || [ \"$UNAME_PROCESSOR\" = mc88110 ]\n+\tUNAME_PROCESSOR=$(/usr/bin/uname -p)\n+\tif test \"$UNAME_PROCESSOR\" = mc88100 || test \"$UNAME_PROCESSOR\" = mc88110\n \tthen\n-\t    if [ \"$TARGET_BINARY_INTERFACE\"x = m88kdguxelfx ] || \\\n-\t       [ \"$TARGET_BINARY_INTERFACE\"x = x ]\n+\t    if test \"$TARGET_BINARY_INTERFACE\"x = m88kdguxelfx || \\\n+\t       test \"$TARGET_BINARY_INTERFACE\"x = x\n \t    then\n \t\techo m88k-dg-dgux\"$UNAME_RELEASE\"\n \t    else\n@@ -569,17 +584,17 @@ EOF\n \techo m68k-tektronix-bsd\n \texit ;;\n     *:IRIX*:*:*)\n-\techo mips-sgi-irix\"`echo \"$UNAME_RELEASE\"|sed -e 's/-/_/g'`\"\n+\techo mips-sgi-irix\"$(echo \"$UNAME_RELEASE\"|sed -e 's/-/_/g')\"\n \texit ;;\n     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.\n \techo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id\n-\texit ;;               # Note that: echo \"'`uname -s`'\" gives 'AIX '\n+\texit ;;               # Note that: echo \"'$(uname -s)'\" gives 'AIX '\n     i*86:AIX:*:*)\n \techo i386-ibm-aix\n \texit ;;\n     ia64:AIX:*:*)\n-\tif [ -x /usr/bin/oslevel ] ; then\n-\t\tIBM_REV=`/usr/bin/oslevel`\n+\tif test -x /usr/bin/oslevel ; then\n+\t\tIBM_REV=$(/usr/bin/oslevel)\n \telse\n \t\tIBM_REV=\"$UNAME_VERSION.$UNAME_RELEASE\"\n \tfi\n@@ -599,7 +614,7 @@ EOF\n \t\t\texit(0);\n \t\t\t}\n EOF\n-\t\tif $CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" && SYSTEM_NAME=`\"$dummy\"`\n+\t\tif $CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" && SYSTEM_NAME=$(\"$dummy\")\n \t\tthen\n \t\t\techo \"$SYSTEM_NAME\"\n \t\telse\n@@ -612,15 +627,15 @@ EOF\n \tfi\n \texit ;;\n     *:AIX:*:[4567])\n-\tIBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`\n+\tIBM_CPU_ID=$(/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }')\n \tif /usr/sbin/lsattr -El \"$IBM_CPU_ID\" | grep ' POWER' >/dev/null 2>&1; then\n \t\tIBM_ARCH=rs6000\n \telse\n \t\tIBM_ARCH=powerpc\n \tfi\n-\tif [ -x /usr/bin/lslpp ] ; then\n-\t\tIBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |\n-\t\t\t   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`\n+\tif test -x /usr/bin/lslpp ; then\n+\t\tIBM_REV=$(/usr/bin/lslpp -Lqc bos.rte.libc |\n+\t\t\t   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/)\n \telse\n \t\tIBM_REV=\"$UNAME_VERSION.$UNAME_RELEASE\"\n \tfi\n@@ -648,26 +663,26 @@ EOF\n \techo m68k-hp-bsd4.4\n \texit ;;\n     9000/[34678]??:HP-UX:*:*)\n-\tHPUX_REV=`echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*.[0B]*//'`\n-\tcase \"$UNAME_MACHINE\" in\n+\tHPUX_REV=$(echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*.[0B]*//')\n+\tcase $UNAME_MACHINE in\n \t    9000/31?)            HP_ARCH=m68000 ;;\n \t    9000/[34]??)         HP_ARCH=m68k ;;\n \t    9000/[678][0-9][0-9])\n-\t\tif [ -x /usr/bin/getconf ]; then\n-\t\t    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`\n-\t\t    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`\n-\t\t    case \"$sc_cpu_version\" in\n+\t\tif test -x /usr/bin/getconf; then\n+\t\t    sc_cpu_version=$(/usr/bin/getconf SC_CPU_VERSION 2>/dev/null)\n+\t\t    sc_kernel_bits=$(/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null)\n+\t\t    case $sc_cpu_version in\n \t\t      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0\n \t\t      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1\n \t\t      532)                      # CPU_PA_RISC2_0\n-\t\t\tcase \"$sc_kernel_bits\" in\n+\t\t\tcase $sc_kernel_bits in\n \t\t\t  32) HP_ARCH=hppa2.0n ;;\n \t\t\t  64) HP_ARCH=hppa2.0w ;;\n \t\t\t  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20\n \t\t\tesac ;;\n \t\t    esac\n \t\tfi\n-\t\tif [ \"$HP_ARCH\" = \"\" ]; then\n+\t\tif test \"$HP_ARCH\" = \"\"; then\n \t\t    set_cc_for_build\n \t\t    sed 's/^\t\t//' << EOF > \"$dummy.c\"\n \n@@ -702,11 +717,11 @@ EOF\n \t\t    exit (0);\n \t\t}\n EOF\n-\t\t    (CCOPTS=\"\" $CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" 2>/dev/null) && HP_ARCH=`\"$dummy\"`\n+\t\t    (CCOPTS=\"\" $CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" 2>/dev/null) && HP_ARCH=$(\"$dummy\")\n \t\t    test -z \"$HP_ARCH\" && HP_ARCH=hppa\n \t\tfi ;;\n \tesac\n-\tif [ \"$HP_ARCH\" = hppa2.0w ]\n+\tif test \"$HP_ARCH\" = hppa2.0w\n \tthen\n \t    set_cc_for_build\n \n@@ -730,7 +745,7 @@ EOF\n \techo \"$HP_ARCH\"-hp-hpux\"$HPUX_REV\"\n \texit ;;\n     ia64:HP-UX:*:*)\n-\tHPUX_REV=`echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*.[0B]*//'`\n+\tHPUX_REV=$(echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*.[0B]*//')\n \techo ia64-hp-hpux\"$HPUX_REV\"\n \texit ;;\n     3050*:HI-UX:*:*)\n@@ -760,7 +775,7 @@ EOF\n \t  exit (0);\n \t}\n EOF\n-\t$CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" && SYSTEM_NAME=`\"$dummy\"` &&\n+\t$CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" && SYSTEM_NAME=$(\"$dummy\") &&\n \t\t{ echo \"$SYSTEM_NAME\"; exit; }\n \techo unknown-hitachi-hiuxwe2\n \texit ;;\n@@ -780,7 +795,7 @@ EOF\n \techo hppa1.0-hp-osf\n \texit ;;\n     i*86:OSF1:*:*)\n-\tif [ -x /usr/sbin/sysversion ] ; then\n+\tif test -x /usr/sbin/sysversion ; then\n \t    echo \"$UNAME_MACHINE\"-unknown-osf1mk\n \telse\n \t    echo \"$UNAME_MACHINE\"-unknown-osf1\n@@ -829,14 +844,14 @@ EOF\n \techo craynv-cray-unicosmp\"$UNAME_RELEASE\" | sed -e 's/\\.[^.]*$/.X/'\n \texit ;;\n     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)\n-\tFUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`\n-\tFUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\\///'`\n-\tFUJITSU_REL=`echo \"$UNAME_RELEASE\" | sed -e 's/ /_/'`\n+\tFUJITSU_PROC=$(uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz)\n+\tFUJITSU_SYS=$(uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\\///')\n+\tFUJITSU_REL=$(echo \"$UNAME_RELEASE\" | sed -e 's/ /_/')\n \techo \"${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}\"\n \texit ;;\n     5000:UNIX_System_V:4.*:*)\n-\tFUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\\///'`\n-\tFUJITSU_REL=`echo \"$UNAME_RELEASE\" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`\n+\tFUJITSU_SYS=$(uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\\///')\n+\tFUJITSU_REL=$(echo \"$UNAME_RELEASE\" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/')\n \techo \"sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}\"\n \texit ;;\n     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\\ Embedded/OS:*:*)\n@@ -849,25 +864,25 @@ EOF\n \techo \"$UNAME_MACHINE\"-unknown-bsdi\"$UNAME_RELEASE\"\n \texit ;;\n     arm:FreeBSD:*:*)\n-\tUNAME_PROCESSOR=`uname -p`\n+\tUNAME_PROCESSOR=$(uname -p)\n \tset_cc_for_build\n \tif echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \\\n \t    | grep -q __ARM_PCS_VFP\n \tthen\n-\t    echo \"${UNAME_PROCESSOR}\"-unknown-freebsd\"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`\"-gnueabi\n+\t    echo \"${UNAME_PROCESSOR}\"-unknown-freebsd\"$(echo ${UNAME_RELEASE}|sed -e 's/[-(].*//')\"-gnueabi\n \telse\n-\t    echo \"${UNAME_PROCESSOR}\"-unknown-freebsd\"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`\"-gnueabihf\n+\t    echo \"${UNAME_PROCESSOR}\"-unknown-freebsd\"$(echo ${UNAME_RELEASE}|sed -e 's/[-(].*//')\"-gnueabihf\n \tfi\n \texit ;;\n     *:FreeBSD:*:*)\n-\tUNAME_PROCESSOR=`/usr/bin/uname -p`\n-\tcase \"$UNAME_PROCESSOR\" in\n+\tUNAME_PROCESSOR=$(/usr/bin/uname -p)\n+\tcase $UNAME_PROCESSOR in\n \t    amd64)\n \t\tUNAME_PROCESSOR=x86_64 ;;\n \t    i386)\n \t\tUNAME_PROCESSOR=i586 ;;\n \tesac\n-\techo \"$UNAME_PROCESSOR\"-unknown-freebsd\"`echo \"$UNAME_RELEASE\"|sed -e 's/[-(].*//'`\"\n+\techo \"$UNAME_PROCESSOR\"-unknown-freebsd\"$(echo \"$UNAME_RELEASE\"|sed -e 's/[-(].*//')\"\n \texit ;;\n     i*:CYGWIN*:*)\n \techo \"$UNAME_MACHINE\"-pc-cygwin\n@@ -885,7 +900,7 @@ EOF\n \techo \"$UNAME_MACHINE\"-pc-pw32\n \texit ;;\n     *:Interix*:*)\n-\tcase \"$UNAME_MACHINE\" in\n+\tcase $UNAME_MACHINE in\n \t    x86)\n \t\techo i586-pc-interix\"$UNAME_RELEASE\"\n \t\texit ;;\n@@ -903,15 +918,15 @@ EOF\n \techo x86_64-pc-cygwin\n \texit ;;\n     prep*:SunOS:5.*:*)\n-\techo powerpcle-unknown-solaris2\"`echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//'`\"\n+\techo powerpcle-unknown-solaris2\"$(echo \"$UNAME_RELEASE\"|sed -e 's/[^.]*//')\"\n \texit ;;\n     *:GNU:*:*)\n \t# the GNU system\n-\techo \"`echo \"$UNAME_MACHINE\"|sed -e 's,[-/].*$,,'`-unknown-$LIBC`echo \"$UNAME_RELEASE\"|sed -e 's,/.*$,,'`\"\n+\techo \"$(echo \"$UNAME_MACHINE\"|sed -e 's,[-/].*$,,')-unknown-$LIBC$(echo \"$UNAME_RELEASE\"|sed -e 's,/.*$,,')\"\n \texit ;;\n     *:GNU/*:*:*)\n \t# other systems with GNU libc and userland\n-\techo \"$UNAME_MACHINE-unknown-`echo \"$UNAME_SYSTEM\" | sed 's,^[^/]*/,,' | tr \"[:upper:]\" \"[:lower:]\"``echo \"$UNAME_RELEASE\"|sed -e 's/[-(].*//'`-$LIBC\"\n+\techo \"$UNAME_MACHINE-unknown-$(echo \"$UNAME_SYSTEM\" | sed 's,^[^/]*/,,' | tr \"[:upper:]\" \"[:lower:]\")$(echo \"$UNAME_RELEASE\"|sed -e 's/[-(].*//')-$LIBC\"\n \texit ;;\n     *:Minix:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-minix\n@@ -924,7 +939,7 @@ EOF\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n \texit ;;\n     alpha:Linux:*:*)\n-\tcase `sed -n '/^cpu model/s/^.*: \\(.*\\)/\\1/p' < /proc/cpuinfo` in\n+\tcase $(sed -n '/^cpu model/s/^.*: \\(.*\\)/\\1/p' /proc/cpuinfo 2>/dev/null) in\n \t  EV5)   UNAME_MACHINE=alphaev5 ;;\n \t  EV56)  UNAME_MACHINE=alphaev56 ;;\n \t  PCA56) UNAME_MACHINE=alphapca56 ;;\n@@ -937,7 +952,7 @@ EOF\n \tif test \"$?\" = 0 ; then LIBC=gnulibc1 ; fi\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n \texit ;;\n-    arc:Linux:*:* | arceb:Linux:*:*)\n+    arc:Linux:*:* | arceb:Linux:*:* | arc64:Linux:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n \texit ;;\n     arm*:Linux:*:*)\n@@ -983,6 +998,9 @@ EOF\n     k1om:Linux:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n \texit ;;\n+    loongarch32:Linux:*:* | loongarch64:Linux:*:* | loongarchx32:Linux:*:*)\n+\techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n+\texit ;;\n     m32r*:Linux:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n \texit ;;\n@@ -1033,7 +1051,7 @@ EOF\n \t#endif\n \t#endif\n EOF\n-\teval \"`$CC_FOR_BUILD -E \"$dummy.c\" 2>/dev/null | grep '^CPU\\|^MIPS_ENDIAN\\|^LIBCABI'`\"\n+\teval \"$($CC_FOR_BUILD -E \"$dummy.c\" 2>/dev/null | grep '^CPU\\|^MIPS_ENDIAN\\|^LIBCABI')\"\n \ttest \"x$CPU\" != x && { echo \"$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI\"; exit; }\n \t;;\n     mips64el:Linux:*:*)\n@@ -1053,7 +1071,7 @@ EOF\n \texit ;;\n     parisc:Linux:*:* | hppa:Linux:*:*)\n \t# Look for CPU level\n-\tcase `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in\n+\tcase $(grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2) in\n \t  PA7*) echo hppa1.1-unknown-linux-\"$LIBC\" ;;\n \t  PA8*) echo hppa2.0-unknown-linux-\"$LIBC\" ;;\n \t  *)    echo hppa-unknown-linux-\"$LIBC\" ;;\n@@ -1071,7 +1089,7 @@ EOF\n     ppcle:Linux:*:*)\n \techo powerpcle-unknown-linux-\"$LIBC\"\n \texit ;;\n-    riscv32:Linux:*:* | riscv64:Linux:*:*)\n+    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n \texit ;;\n     s390:Linux:*:* | s390x:Linux:*:*)\n@@ -1093,7 +1111,17 @@ EOF\n \techo \"$UNAME_MACHINE\"-dec-linux-\"$LIBC\"\n \texit ;;\n     x86_64:Linux:*:*)\n-\techo \"$UNAME_MACHINE\"-pc-linux-\"$LIBC\"\n+\tset_cc_for_build\n+\tLIBCABI=$LIBC\n+\tif test \"$CC_FOR_BUILD\" != no_compiler_found; then\n+\t    if (echo '#ifdef __ILP32__'; echo IS_X32; echo '#endif') | \\\n+\t\t(CCOPTS=\"\" $CC_FOR_BUILD -E - 2>/dev/null) | \\\n+\t\tgrep IS_X32 >/dev/null\n+\t    then\n+\t\tLIBCABI=\"$LIBC\"x32\n+\t    fi\n+\tfi\n+\techo \"$UNAME_MACHINE\"-pc-linux-\"$LIBCABI\"\n \texit ;;\n     xtensa*:Linux:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-linux-\"$LIBC\"\n@@ -1133,7 +1161,7 @@ EOF\n \techo \"$UNAME_MACHINE\"-pc-msdosdjgpp\n \texit ;;\n     i*86:*:4.*:*)\n-\tUNAME_REL=`echo \"$UNAME_RELEASE\" | sed 's/\\/MP$//'`\n+\tUNAME_REL=$(echo \"$UNAME_RELEASE\" | sed 's/\\/MP$//')\n \tif grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then\n \t\techo \"$UNAME_MACHINE\"-univel-sysv\"$UNAME_REL\"\n \telse\n@@ -1142,7 +1170,7 @@ EOF\n \texit ;;\n     i*86:*:5:[678]*)\n \t# UnixWare 7.x, OpenUNIX and OpenServer 6.\n-\tcase `/bin/uname -X | grep \"^Machine\"` in\n+\tcase $(/bin/uname -X | grep \"^Machine\") in\n \t    *486*)\t     UNAME_MACHINE=i486 ;;\n \t    *Pentium)\t     UNAME_MACHINE=i586 ;;\n \t    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;\n@@ -1151,10 +1179,10 @@ EOF\n \texit ;;\n     i*86:*:3.2:*)\n \tif test -f /usr/options/cb.name; then\n-\t\tUNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`\n+\t\tUNAME_REL=$(sed -n 's/.*Version //p' </usr/options/cb.name)\n \t\techo \"$UNAME_MACHINE\"-pc-isc\"$UNAME_REL\"\n \telif /bin/uname -X 2>/dev/null >/dev/null ; then\n-\t\tUNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`\n+\t\tUNAME_REL=$( (/bin/uname -X|grep Release|sed -e 's/.*= //'))\n \t\t(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486\n \t\t(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \\\n \t\t\t&& UNAME_MACHINE=i586\n@@ -1204,7 +1232,7 @@ EOF\n     3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)\n \tOS_REL=''\n \ttest -r /etc/.relid \\\n-\t&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \\([0-9][0-9]\\).*/\\1/p' < /etc/.relid`\n+\t&& OS_REL=.$(sed -n 's/[^ ]* [^ ]* \\([0-9][0-9]\\).*/\\1/p' < /etc/.relid)\n \t/bin/uname -p 2>/dev/null | grep 86 >/dev/null \\\n \t  && { echo i486-ncr-sysv4.3\"$OS_REL\"; exit; }\n \t/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \\\n@@ -1215,7 +1243,7 @@ EOF\n     NCR*:*:4.2:* | MPRAS*:*:4.2:*)\n \tOS_REL='.3'\n \ttest -r /etc/.relid \\\n-\t    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \\([0-9][0-9]\\).*/\\1/p' < /etc/.relid`\n+\t    && OS_REL=.$(sed -n 's/[^ ]* [^ ]* \\([0-9][0-9]\\).*/\\1/p' < /etc/.relid)\n \t/bin/uname -p 2>/dev/null | grep 86 >/dev/null \\\n \t    && { echo i486-ncr-sysv4.3\"$OS_REL\"; exit; }\n \t/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \\\n@@ -1248,7 +1276,7 @@ EOF\n \texit ;;\n     *:SINIX-*:*:*)\n \tif uname -p 2>/dev/null >/dev/null ; then\n-\t\tUNAME_MACHINE=`(uname -p) 2>/dev/null`\n+\t\tUNAME_MACHINE=$( (uname -p) 2>/dev/null)\n \t\techo \"$UNAME_MACHINE\"-sni-sysv4\n \telse\n \t\techo ns32k-sni-sysv\n@@ -1282,7 +1310,7 @@ EOF\n \techo mips-sony-newsos6\n \texit ;;\n     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)\n-\tif [ -d /usr/nec ]; then\n+\tif test -d /usr/nec; then\n \t\techo mips-nec-sysv\"$UNAME_RELEASE\"\n \telse\n \t\techo mips-unknown-sysv\"$UNAME_RELEASE\"\n@@ -1330,8 +1358,11 @@ EOF\n     *:Rhapsody:*:*)\n \techo \"$UNAME_MACHINE\"-apple-rhapsody\"$UNAME_RELEASE\"\n \texit ;;\n+    arm64:Darwin:*:*)\n+\techo aarch64-apple-darwin\"$UNAME_RELEASE\"\n+\texit ;;\n     *:Darwin:*:*)\n-\tUNAME_PROCESSOR=`uname -p`\n+\tUNAME_PROCESSOR=$(uname -p)\n \tcase $UNAME_PROCESSOR in\n \t    unknown) UNAME_PROCESSOR=powerpc ;;\n \tesac\n@@ -1344,7 +1375,7 @@ EOF\n \telse\n \t    set_cc_for_build\n \tfi\n-\tif [ \"$CC_FOR_BUILD\" != no_compiler_found ]; then\n+\tif test \"$CC_FOR_BUILD\" != no_compiler_found; then\n \t    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \\\n \t\t   (CCOPTS=\"\" $CC_FOR_BUILD -E - 2>/dev/null) | \\\n \t\t   grep IS_64BIT_ARCH >/dev/null\n@@ -1368,7 +1399,7 @@ EOF\n \techo \"$UNAME_PROCESSOR\"-apple-darwin\"$UNAME_RELEASE\"\n \texit ;;\n     *:procnto*:*:* | *:QNX:[0123456789]*:*)\n-\tUNAME_PROCESSOR=`uname -p`\n+\tUNAME_PROCESSOR=$(uname -p)\n \tif test \"$UNAME_PROCESSOR\" = x86; then\n \t\tUNAME_PROCESSOR=i386\n \t\tUNAME_MACHINE=pc\n@@ -1406,10 +1437,9 @@ EOF\n \t# \"uname -m\" is not consistent, so use $cputype instead. 386\n \t# is converted to i386 for consistency with other x86\n \t# operating systems.\n-\t# shellcheck disable=SC2154\n-\tif test \"$cputype\" = 386; then\n+\tif test \"${cputype-}\" = 386; then\n \t    UNAME_MACHINE=i386\n-\telse\n+\telif test \"x${cputype-}\" != x; then\n \t    UNAME_MACHINE=\"$cputype\"\n \tfi\n \techo \"$UNAME_MACHINE\"-unknown-plan9\n@@ -1436,11 +1466,11 @@ EOF\n \techo mips-sei-seiux\"$UNAME_RELEASE\"\n \texit ;;\n     *:DragonFly:*:*)\n-\techo \"$UNAME_MACHINE\"-unknown-dragonfly\"`echo \"$UNAME_RELEASE\"|sed -e 's/[-(].*//'`\"\n+\techo \"$UNAME_MACHINE\"-unknown-dragonfly\"$(echo \"$UNAME_RELEASE\"|sed -e 's/[-(].*//')\"\n \texit ;;\n     *:*VMS:*:*)\n-\tUNAME_MACHINE=`(uname -p) 2>/dev/null`\n-\tcase \"$UNAME_MACHINE\" in\n+\tUNAME_MACHINE=$( (uname -p) 2>/dev/null)\n+\tcase $UNAME_MACHINE in\n \t    A*) echo alpha-dec-vms ; exit ;;\n \t    I*) echo ia64-dec-vms ; exit ;;\n \t    V*) echo vax-dec-vms ; exit ;;\n@@ -1449,13 +1479,13 @@ EOF\n \techo i386-pc-xenix\n \texit ;;\n     i*86:skyos:*:*)\n-\techo \"$UNAME_MACHINE\"-pc-skyos\"`echo \"$UNAME_RELEASE\" | sed -e 's/ .*$//'`\"\n+\techo \"$UNAME_MACHINE\"-pc-skyos\"$(echo \"$UNAME_RELEASE\" | sed -e 's/ .*$//')\"\n \texit ;;\n     i*86:rdos:*:*)\n \techo \"$UNAME_MACHINE\"-pc-rdos\n \texit ;;\n-    i*86:AROS:*:*)\n-\techo \"$UNAME_MACHINE\"-pc-aros\n+    *:AROS:*:*)\n+\techo \"$UNAME_MACHINE\"-unknown-aros\n \texit ;;\n     x86_64:VMkernel:*:*)\n \techo \"$UNAME_MACHINE\"-unknown-esx\n@@ -1507,7 +1537,7 @@ main ()\n #define __ARCHITECTURE__ \"m68k\"\n #endif\n   int version;\n-  version=`(hostinfo | sed -n 's/.*NeXT Mach \\([0-9]*\\).*/\\1/p') 2>/dev/null`;\n+  version=$( (hostinfo | sed -n 's/.*NeXT Mach \\([0-9]*\\).*/\\1/p') 2>/dev/null);\n   if (version < 4)\n     printf (\"%s-next-nextstep%d\\n\", __ARCHITECTURE__, version);\n   else\n@@ -1599,15 +1629,15 @@ main ()\n }\n EOF\n \n-$CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" 2>/dev/null && SYSTEM_NAME=`$dummy` &&\n+$CC_FOR_BUILD -o \"$dummy\" \"$dummy.c\" 2>/dev/null && SYSTEM_NAME=$($dummy) &&\n \t{ echo \"$SYSTEM_NAME\"; exit; }\n \n # Apollos put the system type in the environment.\n test -d /usr/apollo && { echo \"$ISP-apollo-$SYSTYPE\"; exit; }\n \n echo \"$0: unable to guess system type\" >&2\n \n-case \"$UNAME_MACHINE:$UNAME_SYSTEM\" in\n+case $UNAME_MACHINE:$UNAME_SYSTEM in\n     mips:Linux | mips64:Linux)\n \t# If we got here on MIPS GNU/Linux, output extra information.\n \tcat >&2 <<EOF\n@@ -1624,36 +1654,43 @@ This script (version $timestamp), has failed to recognize the\n operating system you are using. If your script is old, overwrite *all*\n copies of config.guess and config.sub with the latest versions from:\n \n-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess\n+  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess\n and\n-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub\n+  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub\n+EOF\n+\n+year=$(echo $timestamp | sed 's,-.*,,')\n+# shellcheck disable=SC2003\n+if test \"$(expr \"$(date +%Y)\" - \"$year\")\" -lt 3 ; then\n+   cat >&2 <<EOF\n \n If $0 has already been updated, send the following data and any\n information you think might be pertinent to config-patches@gnu.org to\n provide the necessary information to handle your system.\n \n config.guess timestamp = $timestamp\n \n-uname -m = `(uname -m) 2>/dev/null || echo unknown`\n-uname -r = `(uname -r) 2>/dev/null || echo unknown`\n-uname -s = `(uname -s) 2>/dev/null || echo unknown`\n-uname -v = `(uname -v) 2>/dev/null || echo unknown`\n+uname -m = $( (uname -m) 2>/dev/null || echo unknown)\n+uname -r = $( (uname -r) 2>/dev/null || echo unknown)\n+uname -s = $( (uname -s) 2>/dev/null || echo unknown)\n+uname -v = $( (uname -v) 2>/dev/null || echo unknown)\n \n-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`\n-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`\n+/usr/bin/uname -p = $( (/usr/bin/uname -p) 2>/dev/null)\n+/bin/uname -X     = $( (/bin/uname -X) 2>/dev/null)\n \n-hostinfo               = `(hostinfo) 2>/dev/null`\n-/bin/universe          = `(/bin/universe) 2>/dev/null`\n-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`\n-/bin/arch              = `(/bin/arch) 2>/dev/null`\n-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`\n-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`\n+hostinfo               = $( (hostinfo) 2>/dev/null)\n+/bin/universe          = $( (/bin/universe) 2>/dev/null)\n+/usr/bin/arch -k       = $( (/usr/bin/arch -k) 2>/dev/null)\n+/bin/arch              = $( (/bin/arch) 2>/dev/null)\n+/usr/bin/oslevel       = $( (/usr/bin/oslevel) 2>/dev/null)\n+/usr/convex/getsysinfo = $( (/usr/convex/getsysinfo) 2>/dev/null)\n \n UNAME_MACHINE = \"$UNAME_MACHINE\"\n UNAME_RELEASE = \"$UNAME_RELEASE\"\n UNAME_SYSTEM  = \"$UNAME_SYSTEM\"\n UNAME_VERSION = \"$UNAME_VERSION\"\n EOF\n+fi\n \n exit 1\n "
      }
    ]
  },
  {
    "sha": "7e2a9890e50969cdfdd08d735fa8f3c611a663a7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ZTJhOTg5MGU1MDk2OWNkZmRkMDhkNzM1ZmE4ZjNjNjExYTY2M2E3",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-26T05:30:18Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-26T05:30:18Z"
      },
      "message": "depends: latest config.sub (2021-04-30)",
      "tree": {
        "sha": "c32aa72aa89409087b20f8f203272dc7fa7abc5e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c32aa72aa89409087b20f8f203272dc7fa7abc5e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e2a9890e50969cdfdd08d735fa8f3c611a663a7",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmCt3OoACgkQLuufXMCV\nJsE2rBAAsremUF96RW4GZ0X80kFY+vqO1e5Th0mbuSImGXfLJcokfFk7HlF3DtAC\nEdQ25/Z5omDhpcURwcrstU+NivdSyicV7S3Ng3Lr1vW5VUHw6gywHDOkCOSAC2s9\nzY5ez7yjGqmY01S8OcJe7KDWQ/iBiwKMl1NxRIPNjlS4eEfzeUgzPhdkKLuxIyS3\nhjmBLs4VniG3XEz+wVKyqDYCv1mi21X+tAGlHy4TptJBPQO9X8KA08lVaLqo7BH2\ndVanaTSOyHSfeqLz/ti8GcCtp6ziUoclvkcXqhOflvEHObXtyGr8L3o212xjNQpI\nGSCV5UUPot5Nl1vq3i+JJIRYG/qeYg1SicvTmUqCibon7cGcW68toduXBA34zoVK\n0qAI/uJ4d92LjdboXwrw7aKZ1QpxhWiWEsuamBimEaIMB4tM3jPFik806MeyGcEo\nTZq7SbH7n78AHNkcPJIUELqkiQnV/cFMnXfrkBdjcsubQNKxjLZdLdbe/ZavI2ct\nMvbpVbjS79LO7JvzgiH/P9nLfVZtVRnkMKjX0r/djGuqbQxUeKk82BvK1fL8DZSZ\nOHoAHs+gvrZkrtG9LLbDkPJM3KzBpn6kJhRPfSW6kKU1ZxZiQsI2JJ3tgde0k+1Y\ncfsEBTrB8zPmls8CXYnJVSK55Op6Bq6DthmuIFEiIGK5S/KIEjE=\n=mDLs\n-----END PGP SIGNATURE-----",
        "payload": "tree c32aa72aa89409087b20f8f203272dc7fa7abc5e\nparent f16d4cd8c5412890ee0b73f4ef142b59d130e5d5\nauthor fanquake <fanquake@gmail.com> 1622007018 +0800\ncommitter fanquake <fanquake@gmail.com> 1622007018 +0800\n\ndepends: latest config.sub (2021-04-30)\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7e2a9890e50969cdfdd08d735fa8f3c611a663a7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7e2a9890e50969cdfdd08d735fa8f3c611a663a7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7e2a9890e50969cdfdd08d735fa8f3c611a663a7/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f16d4cd8c5412890ee0b73f4ef142b59d130e5d5"
      }
    ],
    "stats": {
      "total": 649,
      "additions": 360,
      "deletions": 289
    },
    "files": [
      {
        "sha": "7384e9198b4051ce9e3e079d50d8adb5060b1771",
        "filename": "depends/config.sub",
        "status": "modified",
        "additions": 360,
        "deletions": 289,
        "changes": 649,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7e2a9890e50969cdfdd08d735fa8f3c611a663a7/depends/config.sub",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7e2a9890e50969cdfdd08d735fa8f3c611a663a7/depends/config.sub",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/config.sub?ref=7e2a9890e50969cdfdd08d735fa8f3c611a663a7",
        "patch": "@@ -1,8 +1,8 @@\n #! /bin/sh\n # Configuration validation subroutine script.\n-#   Copyright 1992-2019 Free Software Foundation, Inc.\n+#   Copyright 1992-2021 Free Software Foundation, Inc.\n \n-timestamp='2019-06-30'\n+timestamp='2021-04-30'\n \n # This file is free software; you can redistribute it and/or modify it\n # under the terms of the GNU General Public License as published by\n@@ -33,7 +33,7 @@ timestamp='2019-06-30'\n # Otherwise, we print the canonical config type on stdout and succeed.\n \n # You can get the latest version of this script from:\n-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub\n+# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub\n \n # This file is supposed to be the same for all GNU packages\n # and recognize all the CPU types, system types and aliases\n@@ -50,7 +50,7 @@ timestamp='2019-06-30'\n #\tCPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM\n # It is wrong to echo any other type of specification.\n \n-me=`echo \"$0\" | sed -e 's,.*/,,'`\n+me=$(echo \"$0\" | sed -e 's,.*/,,')\n \n usage=\"\\\n Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS\n@@ -67,7 +67,7 @@ Report bugs and patches to <config-patches@gnu.org>.\"\n version=\"\\\n GNU config.sub ($timestamp)\n \n-Copyright 1992-2019 Free Software Foundation, Inc.\n+Copyright 1992-2021 Free Software Foundation, Inc.\n \n This is free software; see the source for copying conditions.  There is NO\n warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\"\n@@ -124,28 +124,27 @@ case $1 in\n \t\t;;\n \t*-*-*-*)\n \t\tbasic_machine=$field1-$field2\n-\t\tos=$field3-$field4\n+\t\tbasic_os=$field3-$field4\n \t\t;;\n \t*-*-*)\n \t\t# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two\n \t\t# parts\n \t\tmaybe_os=$field2-$field3\n \t\tcase $maybe_os in\n-\t\t\tnto-qnx* | linux-gnu* | linux-android* | linux-dietlibc \\\n-\t\t\t| linux-newlib* | linux-musl* | linux-uclibc* | uclinux-uclibc* \\\n+\t\t\tnto-qnx* | linux-* | uclinux-uclibc* \\\n \t\t\t| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \\\n \t\t\t| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \\\n \t\t\t| storm-chaos* | os2-emx* | rtmk-nova*)\n \t\t\t\tbasic_machine=$field1\n-\t\t\t\tos=$maybe_os\n+\t\t\t\tbasic_os=$maybe_os\n \t\t\t\t;;\n \t\t\tandroid-linux)\n \t\t\t\tbasic_machine=$field1-unknown\n-\t\t\t\tos=linux-android\n+\t\t\t\tbasic_os=linux-android\n \t\t\t\t;;\n \t\t\t*)\n \t\t\t\tbasic_machine=$field1-$field2\n-\t\t\t\tos=$field3\n+\t\t\t\tbasic_os=$field3\n \t\t\t\t;;\n \t\tesac\n \t\t;;\n@@ -154,15 +153,15 @@ case $1 in\n \t\tcase $field1-$field2 in\n \t\t\tdecstation-3100)\n \t\t\t\tbasic_machine=mips-dec\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\t*-*)\n \t\t\t\t# Second component is usually, but not always the OS\n \t\t\t\tcase $field2 in\n \t\t\t\t\t# Prevent following clause from handling this valid os\n \t\t\t\t\tsun*os*)\n \t\t\t\t\t\tbasic_machine=$field1\n-\t\t\t\t\t\tos=$field2\n+\t\t\t\t\t\tbasic_os=$field2\n \t\t\t\t\t\t;;\n \t\t\t\t\t# Manufacturers\n \t\t\t\t\tdec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \\\n@@ -175,11 +174,11 @@ case $1 in\n \t\t\t\t\t| microblaze* | sim | cisco \\\n \t\t\t\t\t| oki | wec | wrs | winbond)\n \t\t\t\t\t\tbasic_machine=$field1-$field2\n-\t\t\t\t\t\tos=\n+\t\t\t\t\t\tbasic_os=\n \t\t\t\t\t\t;;\n \t\t\t\t\t*)\n \t\t\t\t\t\tbasic_machine=$field1\n-\t\t\t\t\t\tos=$field2\n+\t\t\t\t\t\tbasic_os=$field2\n \t\t\t\t\t\t;;\n \t\t\t\tesac\n \t\t\t;;\n@@ -191,447 +190,451 @@ case $1 in\n \t\tcase $field1 in\n \t\t\t386bsd)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\ta29khif)\n \t\t\t\tbasic_machine=a29k-amd\n-\t\t\t\tos=udi\n+\t\t\t\tbasic_os=udi\n \t\t\t\t;;\n \t\t\tadobe68k)\n \t\t\t\tbasic_machine=m68010-adobe\n-\t\t\t\tos=scout\n+\t\t\t\tbasic_os=scout\n \t\t\t\t;;\n \t\t\talliant)\n \t\t\t\tbasic_machine=fx80-alliant\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\taltos | altos3068)\n \t\t\t\tbasic_machine=m68k-altos\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tam29k)\n \t\t\t\tbasic_machine=a29k-none\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\tamdahl)\n \t\t\t\tbasic_machine=580-amdahl\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tamiga)\n \t\t\t\tbasic_machine=m68k-unknown\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tamigaos | amigados)\n \t\t\t\tbasic_machine=m68k-unknown\n-\t\t\t\tos=amigaos\n+\t\t\t\tbasic_os=amigaos\n \t\t\t\t;;\n \t\t\tamigaunix | amix)\n \t\t\t\tbasic_machine=m68k-unknown\n-\t\t\t\tos=sysv4\n+\t\t\t\tbasic_os=sysv4\n \t\t\t\t;;\n \t\t\tapollo68)\n \t\t\t\tbasic_machine=m68k-apollo\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tapollo68bsd)\n \t\t\t\tbasic_machine=m68k-apollo\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\taros)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=aros\n+\t\t\t\tbasic_os=aros\n \t\t\t\t;;\n \t\t\taux)\n \t\t\t\tbasic_machine=m68k-apple\n-\t\t\t\tos=aux\n+\t\t\t\tbasic_os=aux\n \t\t\t\t;;\n \t\t\tbalance)\n \t\t\t\tbasic_machine=ns32k-sequent\n-\t\t\t\tos=dynix\n+\t\t\t\tbasic_os=dynix\n \t\t\t\t;;\n \t\t\tblackfin)\n \t\t\t\tbasic_machine=bfin-unknown\n-\t\t\t\tos=linux\n+\t\t\t\tbasic_os=linux\n \t\t\t\t;;\n \t\t\tcegcc)\n \t\t\t\tbasic_machine=arm-unknown\n-\t\t\t\tos=cegcc\n+\t\t\t\tbasic_os=cegcc\n \t\t\t\t;;\n \t\t\tconvex-c1)\n \t\t\t\tbasic_machine=c1-convex\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\tconvex-c2)\n \t\t\t\tbasic_machine=c2-convex\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\tconvex-c32)\n \t\t\t\tbasic_machine=c32-convex\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\tconvex-c34)\n \t\t\t\tbasic_machine=c34-convex\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\tconvex-c38)\n \t\t\t\tbasic_machine=c38-convex\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\tcray)\n \t\t\t\tbasic_machine=j90-cray\n-\t\t\t\tos=unicos\n+\t\t\t\tbasic_os=unicos\n \t\t\t\t;;\n \t\t\tcrds | unos)\n \t\t\t\tbasic_machine=m68k-crds\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tda30)\n \t\t\t\tbasic_machine=m68k-da30\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tdecstation | pmax | pmin | dec3100 | decstatn)\n \t\t\t\tbasic_machine=mips-dec\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tdelta88)\n \t\t\t\tbasic_machine=m88k-motorola\n-\t\t\t\tos=sysv3\n+\t\t\t\tbasic_os=sysv3\n \t\t\t\t;;\n \t\t\tdicos)\n \t\t\t\tbasic_machine=i686-pc\n-\t\t\t\tos=dicos\n+\t\t\t\tbasic_os=dicos\n \t\t\t\t;;\n \t\t\tdjgpp)\n \t\t\t\tbasic_machine=i586-pc\n-\t\t\t\tos=msdosdjgpp\n+\t\t\t\tbasic_os=msdosdjgpp\n \t\t\t\t;;\n \t\t\tebmon29k)\n \t\t\t\tbasic_machine=a29k-amd\n-\t\t\t\tos=ebmon\n+\t\t\t\tbasic_os=ebmon\n \t\t\t\t;;\n \t\t\tes1800 | OSE68k | ose68k | ose | OSE)\n \t\t\t\tbasic_machine=m68k-ericsson\n-\t\t\t\tos=ose\n+\t\t\t\tbasic_os=ose\n \t\t\t\t;;\n \t\t\tgmicro)\n \t\t\t\tbasic_machine=tron-gmicro\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tgo32)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=go32\n+\t\t\t\tbasic_os=go32\n \t\t\t\t;;\n \t\t\th8300hms)\n \t\t\t\tbasic_machine=h8300-hitachi\n-\t\t\t\tos=hms\n+\t\t\t\tbasic_os=hms\n \t\t\t\t;;\n \t\t\th8300xray)\n \t\t\t\tbasic_machine=h8300-hitachi\n-\t\t\t\tos=xray\n+\t\t\t\tbasic_os=xray\n \t\t\t\t;;\n \t\t\th8500hms)\n \t\t\t\tbasic_machine=h8500-hitachi\n-\t\t\t\tos=hms\n+\t\t\t\tbasic_os=hms\n \t\t\t\t;;\n \t\t\tharris)\n \t\t\t\tbasic_machine=m88k-harris\n-\t\t\t\tos=sysv3\n+\t\t\t\tbasic_os=sysv3\n \t\t\t\t;;\n \t\t\thp300 | hp300hpux)\n \t\t\t\tbasic_machine=m68k-hp\n-\t\t\t\tos=hpux\n+\t\t\t\tbasic_os=hpux\n \t\t\t\t;;\n \t\t\thp300bsd)\n \t\t\t\tbasic_machine=m68k-hp\n-\t\t\t\tos=bsd\n+\t\t\t\tbasic_os=bsd\n \t\t\t\t;;\n \t\t\thppaosf)\n \t\t\t\tbasic_machine=hppa1.1-hp\n-\t\t\t\tos=osf\n+\t\t\t\tbasic_os=osf\n \t\t\t\t;;\n \t\t\thppro)\n \t\t\t\tbasic_machine=hppa1.1-hp\n-\t\t\t\tos=proelf\n+\t\t\t\tbasic_os=proelf\n \t\t\t\t;;\n \t\t\ti386mach)\n \t\t\t\tbasic_machine=i386-mach\n-\t\t\t\tos=mach\n+\t\t\t\tbasic_os=mach\n \t\t\t\t;;\n \t\t\tisi68 | isi)\n \t\t\t\tbasic_machine=m68k-isi\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tm68knommu)\n \t\t\t\tbasic_machine=m68k-unknown\n-\t\t\t\tos=linux\n+\t\t\t\tbasic_os=linux\n \t\t\t\t;;\n \t\t\tmagnum | m3230)\n \t\t\t\tbasic_machine=mips-mips\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tmerlin)\n \t\t\t\tbasic_machine=ns32k-utek\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tmingw64)\n \t\t\t\tbasic_machine=x86_64-pc\n-\t\t\t\tos=mingw64\n+\t\t\t\tbasic_os=mingw64\n \t\t\t\t;;\n \t\t\tmingw32)\n \t\t\t\tbasic_machine=i686-pc\n-\t\t\t\tos=mingw32\n+\t\t\t\tbasic_os=mingw32\n \t\t\t\t;;\n \t\t\tmingw32ce)\n \t\t\t\tbasic_machine=arm-unknown\n-\t\t\t\tos=mingw32ce\n+\t\t\t\tbasic_os=mingw32ce\n \t\t\t\t;;\n \t\t\tmonitor)\n \t\t\t\tbasic_machine=m68k-rom68k\n-\t\t\t\tos=coff\n+\t\t\t\tbasic_os=coff\n \t\t\t\t;;\n \t\t\tmorphos)\n \t\t\t\tbasic_machine=powerpc-unknown\n-\t\t\t\tos=morphos\n+\t\t\t\tbasic_os=morphos\n \t\t\t\t;;\n \t\t\tmoxiebox)\n \t\t\t\tbasic_machine=moxie-unknown\n-\t\t\t\tos=moxiebox\n+\t\t\t\tbasic_os=moxiebox\n \t\t\t\t;;\n \t\t\tmsdos)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=msdos\n+\t\t\t\tbasic_os=msdos\n \t\t\t\t;;\n \t\t\tmsys)\n \t\t\t\tbasic_machine=i686-pc\n-\t\t\t\tos=msys\n+\t\t\t\tbasic_os=msys\n \t\t\t\t;;\n \t\t\tmvs)\n \t\t\t\tbasic_machine=i370-ibm\n-\t\t\t\tos=mvs\n+\t\t\t\tbasic_os=mvs\n \t\t\t\t;;\n \t\t\tnacl)\n \t\t\t\tbasic_machine=le32-unknown\n-\t\t\t\tos=nacl\n+\t\t\t\tbasic_os=nacl\n \t\t\t\t;;\n \t\t\tncr3000)\n \t\t\t\tbasic_machine=i486-ncr\n-\t\t\t\tos=sysv4\n+\t\t\t\tbasic_os=sysv4\n \t\t\t\t;;\n \t\t\tnetbsd386)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=netbsd\n+\t\t\t\tbasic_os=netbsd\n \t\t\t\t;;\n \t\t\tnetwinder)\n \t\t\t\tbasic_machine=armv4l-rebel\n-\t\t\t\tos=linux\n+\t\t\t\tbasic_os=linux\n \t\t\t\t;;\n \t\t\tnews | news700 | news800 | news900)\n \t\t\t\tbasic_machine=m68k-sony\n-\t\t\t\tos=newsos\n+\t\t\t\tbasic_os=newsos\n \t\t\t\t;;\n \t\t\tnews1000)\n \t\t\t\tbasic_machine=m68030-sony\n-\t\t\t\tos=newsos\n+\t\t\t\tbasic_os=newsos\n \t\t\t\t;;\n \t\t\tnecv70)\n \t\t\t\tbasic_machine=v70-nec\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tnh3000)\n \t\t\t\tbasic_machine=m68k-harris\n-\t\t\t\tos=cxux\n+\t\t\t\tbasic_os=cxux\n \t\t\t\t;;\n \t\t\tnh[45]000)\n \t\t\t\tbasic_machine=m88k-harris\n-\t\t\t\tos=cxux\n+\t\t\t\tbasic_os=cxux\n \t\t\t\t;;\n \t\t\tnindy960)\n \t\t\t\tbasic_machine=i960-intel\n-\t\t\t\tos=nindy\n+\t\t\t\tbasic_os=nindy\n \t\t\t\t;;\n \t\t\tmon960)\n \t\t\t\tbasic_machine=i960-intel\n-\t\t\t\tos=mon960\n+\t\t\t\tbasic_os=mon960\n \t\t\t\t;;\n \t\t\tnonstopux)\n \t\t\t\tbasic_machine=mips-compaq\n-\t\t\t\tos=nonstopux\n+\t\t\t\tbasic_os=nonstopux\n \t\t\t\t;;\n \t\t\tos400)\n \t\t\t\tbasic_machine=powerpc-ibm\n-\t\t\t\tos=os400\n+\t\t\t\tbasic_os=os400\n \t\t\t\t;;\n \t\t\tOSE68000 | ose68000)\n \t\t\t\tbasic_machine=m68000-ericsson\n-\t\t\t\tos=ose\n+\t\t\t\tbasic_os=ose\n \t\t\t\t;;\n \t\t\tos68k)\n \t\t\t\tbasic_machine=m68k-none\n-\t\t\t\tos=os68k\n+\t\t\t\tbasic_os=os68k\n \t\t\t\t;;\n \t\t\tparagon)\n \t\t\t\tbasic_machine=i860-intel\n-\t\t\t\tos=osf\n+\t\t\t\tbasic_os=osf\n \t\t\t\t;;\n \t\t\tparisc)\n \t\t\t\tbasic_machine=hppa-unknown\n-\t\t\t\tos=linux\n+\t\t\t\tbasic_os=linux\n+\t\t\t\t;;\n+\t\t\tpsp)\n+\t\t\t\tbasic_machine=mipsallegrexel-sony\n+\t\t\t\tbasic_os=psp\n \t\t\t\t;;\n \t\t\tpw32)\n \t\t\t\tbasic_machine=i586-unknown\n-\t\t\t\tos=pw32\n+\t\t\t\tbasic_os=pw32\n \t\t\t\t;;\n \t\t\trdos | rdos64)\n \t\t\t\tbasic_machine=x86_64-pc\n-\t\t\t\tos=rdos\n+\t\t\t\tbasic_os=rdos\n \t\t\t\t;;\n \t\t\trdos32)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=rdos\n+\t\t\t\tbasic_os=rdos\n \t\t\t\t;;\n \t\t\trom68k)\n \t\t\t\tbasic_machine=m68k-rom68k\n-\t\t\t\tos=coff\n+\t\t\t\tbasic_os=coff\n \t\t\t\t;;\n \t\t\tsa29200)\n \t\t\t\tbasic_machine=a29k-amd\n-\t\t\t\tos=udi\n+\t\t\t\tbasic_os=udi\n \t\t\t\t;;\n \t\t\tsei)\n \t\t\t\tbasic_machine=mips-sei\n-\t\t\t\tos=seiux\n+\t\t\t\tbasic_os=seiux\n \t\t\t\t;;\n \t\t\tsequent)\n \t\t\t\tbasic_machine=i386-sequent\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tsps7)\n \t\t\t\tbasic_machine=m68k-bull\n-\t\t\t\tos=sysv2\n+\t\t\t\tbasic_os=sysv2\n \t\t\t\t;;\n \t\t\tst2000)\n \t\t\t\tbasic_machine=m68k-tandem\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tstratus)\n \t\t\t\tbasic_machine=i860-stratus\n-\t\t\t\tos=sysv4\n+\t\t\t\tbasic_os=sysv4\n \t\t\t\t;;\n \t\t\tsun2)\n \t\t\t\tbasic_machine=m68000-sun\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tsun2os3)\n \t\t\t\tbasic_machine=m68000-sun\n-\t\t\t\tos=sunos3\n+\t\t\t\tbasic_os=sunos3\n \t\t\t\t;;\n \t\t\tsun2os4)\n \t\t\t\tbasic_machine=m68000-sun\n-\t\t\t\tos=sunos4\n+\t\t\t\tbasic_os=sunos4\n \t\t\t\t;;\n \t\t\tsun3)\n \t\t\t\tbasic_machine=m68k-sun\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tsun3os3)\n \t\t\t\tbasic_machine=m68k-sun\n-\t\t\t\tos=sunos3\n+\t\t\t\tbasic_os=sunos3\n \t\t\t\t;;\n \t\t\tsun3os4)\n \t\t\t\tbasic_machine=m68k-sun\n-\t\t\t\tos=sunos4\n+\t\t\t\tbasic_os=sunos4\n \t\t\t\t;;\n \t\t\tsun4)\n \t\t\t\tbasic_machine=sparc-sun\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tsun4os3)\n \t\t\t\tbasic_machine=sparc-sun\n-\t\t\t\tos=sunos3\n+\t\t\t\tbasic_os=sunos3\n \t\t\t\t;;\n \t\t\tsun4os4)\n \t\t\t\tbasic_machine=sparc-sun\n-\t\t\t\tos=sunos4\n+\t\t\t\tbasic_os=sunos4\n \t\t\t\t;;\n \t\t\tsun4sol2)\n \t\t\t\tbasic_machine=sparc-sun\n-\t\t\t\tos=solaris2\n+\t\t\t\tbasic_os=solaris2\n \t\t\t\t;;\n \t\t\tsun386 | sun386i | roadrunner)\n \t\t\t\tbasic_machine=i386-sun\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\t\tsv1)\n \t\t\t\tbasic_machine=sv1-cray\n-\t\t\t\tos=unicos\n+\t\t\t\tbasic_os=unicos\n \t\t\t\t;;\n \t\t\tsymmetry)\n \t\t\t\tbasic_machine=i386-sequent\n-\t\t\t\tos=dynix\n+\t\t\t\tbasic_os=dynix\n \t\t\t\t;;\n \t\t\tt3e)\n \t\t\t\tbasic_machine=alphaev5-cray\n-\t\t\t\tos=unicos\n+\t\t\t\tbasic_os=unicos\n \t\t\t\t;;\n \t\t\tt90)\n \t\t\t\tbasic_machine=t90-cray\n-\t\t\t\tos=unicos\n+\t\t\t\tbasic_os=unicos\n \t\t\t\t;;\n \t\t\ttoad1)\n \t\t\t\tbasic_machine=pdp10-xkl\n-\t\t\t\tos=tops20\n+\t\t\t\tbasic_os=tops20\n \t\t\t\t;;\n \t\t\ttpf)\n \t\t\t\tbasic_machine=s390x-ibm\n-\t\t\t\tos=tpf\n+\t\t\t\tbasic_os=tpf\n \t\t\t\t;;\n \t\t\tudi29k)\n \t\t\t\tbasic_machine=a29k-amd\n-\t\t\t\tos=udi\n+\t\t\t\tbasic_os=udi\n \t\t\t\t;;\n \t\t\tultra3)\n \t\t\t\tbasic_machine=a29k-nyu\n-\t\t\t\tos=sym1\n+\t\t\t\tbasic_os=sym1\n \t\t\t\t;;\n \t\t\tv810 | necv810)\n \t\t\t\tbasic_machine=v810-nec\n-\t\t\t\tos=none\n+\t\t\t\tbasic_os=none\n \t\t\t\t;;\n \t\t\tvaxv)\n \t\t\t\tbasic_machine=vax-dec\n-\t\t\t\tos=sysv\n+\t\t\t\tbasic_os=sysv\n \t\t\t\t;;\n \t\t\tvms)\n \t\t\t\tbasic_machine=vax-dec\n-\t\t\t\tos=vms\n+\t\t\t\tbasic_os=vms\n \t\t\t\t;;\n \t\t\tvsta)\n \t\t\t\tbasic_machine=i386-pc\n-\t\t\t\tos=vsta\n+\t\t\t\tbasic_os=vsta\n \t\t\t\t;;\n \t\t\tvxworks960)\n \t\t\t\tbasic_machine=i960-wrs\n-\t\t\t\tos=vxworks\n+\t\t\t\tbasic_os=vxworks\n \t\t\t\t;;\n \t\t\tvxworks68)\n \t\t\t\tbasic_machine=m68k-wrs\n-\t\t\t\tos=vxworks\n+\t\t\t\tbasic_os=vxworks\n \t\t\t\t;;\n \t\t\tvxworks29k)\n \t\t\t\tbasic_machine=a29k-wrs\n-\t\t\t\tos=vxworks\n+\t\t\t\tbasic_os=vxworks\n \t\t\t\t;;\n \t\t\txbox)\n \t\t\t\tbasic_machine=i686-pc\n-\t\t\t\tos=mingw32\n+\t\t\t\tbasic_os=mingw32\n \t\t\t\t;;\n \t\t\tymp)\n \t\t\t\tbasic_machine=ymp-cray\n-\t\t\t\tos=unicos\n+\t\t\t\tbasic_os=unicos\n \t\t\t\t;;\n \t\t\t*)\n \t\t\t\tbasic_machine=$1\n-\t\t\t\tos=\n+\t\t\t\tbasic_os=\n \t\t\t\t;;\n \t\tesac\n \t\t;;\n@@ -683,17 +686,17 @@ case $basic_machine in\n \tbluegene*)\n \t\tcpu=powerpc\n \t\tvendor=ibm\n-\t\tos=cnk\n+\t\tbasic_os=cnk\n \t\t;;\n \tdecsystem10* | dec10*)\n \t\tcpu=pdp10\n \t\tvendor=dec\n-\t\tos=tops10\n+\t\tbasic_os=tops10\n \t\t;;\n \tdecsystem20* | dec20*)\n \t\tcpu=pdp10\n \t\tvendor=dec\n-\t\tos=tops20\n+\t\tbasic_os=tops20\n \t\t;;\n \tdelta | 3300 | motorola-3300 | motorola-delta \\\n \t      | 3300-motorola | delta-motorola)\n@@ -703,7 +706,7 @@ case $basic_machine in\n \tdpx2*)\n \t\tcpu=m68k\n \t\tvendor=bull\n-\t\tos=sysv3\n+\t\tbasic_os=sysv3\n \t\t;;\n \tencore | umax | mmax)\n \t\tcpu=ns32k\n@@ -712,7 +715,7 @@ case $basic_machine in\n \telxsi)\n \t\tcpu=elxsi\n \t\tvendor=elxsi\n-\t\tos=${os:-bsd}\n+\t\tbasic_os=${basic_os:-bsd}\n \t\t;;\n \tfx2800)\n \t\tcpu=i860\n@@ -725,7 +728,7 @@ case $basic_machine in\n \th3050r* | hiux*)\n \t\tcpu=hppa1.1\n \t\tvendor=hitachi\n-\t\tos=hiuxwe2\n+\t\tbasic_os=hiuxwe2\n \t\t;;\n \thp3k9[0-9][0-9] | hp9[0-9][0-9])\n \t\tcpu=hppa1.0\n@@ -766,38 +769,38 @@ case $basic_machine in\n \t\tvendor=hp\n \t\t;;\n \ti*86v32)\n-\t\tcpu=`echo \"$1\" | sed -e 's/86.*/86/'`\n+\t\tcpu=$(echo \"$1\" | sed -e 's/86.*/86/')\n \t\tvendor=pc\n-\t\tos=sysv32\n+\t\tbasic_os=sysv32\n \t\t;;\n \ti*86v4*)\n-\t\tcpu=`echo \"$1\" | sed -e 's/86.*/86/'`\n+\t\tcpu=$(echo \"$1\" | sed -e 's/86.*/86/')\n \t\tvendor=pc\n-\t\tos=sysv4\n+\t\tbasic_os=sysv4\n \t\t;;\n \ti*86v)\n-\t\tcpu=`echo \"$1\" | sed -e 's/86.*/86/'`\n+\t\tcpu=$(echo \"$1\" | sed -e 's/86.*/86/')\n \t\tvendor=pc\n-\t\tos=sysv\n+\t\tbasic_os=sysv\n \t\t;;\n \ti*86sol2)\n-\t\tcpu=`echo \"$1\" | sed -e 's/86.*/86/'`\n+\t\tcpu=$(echo \"$1\" | sed -e 's/86.*/86/')\n \t\tvendor=pc\n-\t\tos=solaris2\n+\t\tbasic_os=solaris2\n \t\t;;\n \tj90 | j90-cray)\n \t\tcpu=j90\n \t\tvendor=cray\n-\t\tos=${os:-unicos}\n+\t\tbasic_os=${basic_os:-unicos}\n \t\t;;\n \tiris | iris4d)\n \t\tcpu=mips\n \t\tvendor=sgi\n-\t\tcase $os in\n+\t\tcase $basic_os in\n \t\t    irix*)\n \t\t\t;;\n \t\t    *)\n-\t\t\tos=irix4\n+\t\t\tbasic_os=irix4\n \t\t\t;;\n \t\tesac\n \t\t;;\n@@ -808,26 +811,26 @@ case $basic_machine in\n \t*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)\n \t\tcpu=m68k\n \t\tvendor=atari\n-\t\tos=mint\n+\t\tbasic_os=mint\n \t\t;;\n \tnews-3600 | risc-news)\n \t\tcpu=mips\n \t\tvendor=sony\n-\t\tos=newsos\n+\t\tbasic_os=newsos\n \t\t;;\n \tnext | m*-next)\n \t\tcpu=m68k\n \t\tvendor=next\n-\t\tcase $os in\n+\t\tcase $basic_os in\n \t\t    openstep*)\n \t\t        ;;\n \t\t    nextstep*)\n \t\t\t;;\n \t\t    ns2*)\n-\t\t      os=nextstep2\n+\t\t      basic_os=nextstep2\n \t\t\t;;\n \t\t    *)\n-\t\t      os=nextstep3\n+\t\t      basic_os=nextstep3\n \t\t\t;;\n \t\tesac\n \t\t;;\n@@ -838,12 +841,12 @@ case $basic_machine in\n \top50n-* | op60c-*)\n \t\tcpu=hppa1.1\n \t\tvendor=oki\n-\t\tos=proelf\n+\t\tbasic_os=proelf\n \t\t;;\n \tpa-hitachi)\n \t\tcpu=hppa1.1\n \t\tvendor=hitachi\n-\t\tos=hiuxwe2\n+\t\tbasic_os=hiuxwe2\n \t\t;;\n \tpbd)\n \t\tcpu=sparc\n@@ -880,12 +883,12 @@ case $basic_machine in\n \tsde)\n \t\tcpu=mipsisa32\n \t\tvendor=sde\n-\t\tos=${os:-elf}\n+\t\tbasic_os=${basic_os:-elf}\n \t\t;;\n \tsimso-wrs)\n \t\tcpu=sparclite\n \t\tvendor=wrs\n-\t\tos=vxworks\n+\t\tbasic_os=vxworks\n \t\t;;\n \ttower | tower-32)\n \t\tcpu=m68k\n@@ -902,7 +905,7 @@ case $basic_machine in\n \tw89k-*)\n \t\tcpu=hppa1.1\n \t\tvendor=winbond\n-\t\tos=proelf\n+\t\tbasic_os=proelf\n \t\t;;\n \tnone)\n \t\tcpu=none\n@@ -914,7 +917,7 @@ case $basic_machine in\n \t\t;;\n \tleon-*|leon[3-9]-*)\n \t\tcpu=sparc\n-\t\tvendor=`echo \"$basic_machine\" | sed 's/-.*//'`\n+\t\tvendor=$(echo \"$basic_machine\" | sed 's/-.*//')\n \t\t;;\n \n \t*-*)\n@@ -955,11 +958,11 @@ case $cpu-$vendor in\n \t# some cases the only manufacturer, in others, it is the most popular.\n \tcraynv-unknown)\n \t\tvendor=cray\n-\t\tos=${os:-unicosmp}\n+\t\tbasic_os=${basic_os:-unicosmp}\n \t\t;;\n \tc90-unknown | c90-cray)\n \t\tvendor=cray\n-\t\tos=${os:-unicos}\n+\t\tbasic_os=${Basic_os:-unicos}\n \t\t;;\n \tfx80-unknown)\n \t\tvendor=alliant\n@@ -1003,7 +1006,7 @@ case $cpu-$vendor in\n \tdpx20-unknown | dpx20-bull)\n \t\tcpu=rs6000\n \t\tvendor=bull\n-\t\tos=${os:-bosx}\n+\t\tbasic_os=${basic_os:-bosx}\n \t\t;;\n \n \t# Here we normalize CPU types irrespective of the vendor\n@@ -1012,7 +1015,7 @@ case $cpu-$vendor in\n \t\t;;\n \tblackfin-*)\n \t\tcpu=bfin\n-\t\tos=linux\n+\t\tbasic_os=linux\n \t\t;;\n \tc54x-*)\n \t\tcpu=tic54x\n@@ -1025,7 +1028,7 @@ case $cpu-$vendor in\n \t\t;;\n \te500v[12]-*)\n \t\tcpu=powerpc\n-\t\tos=$os\"spe\"\n+\t\tbasic_os=${basic_os}\"spe\"\n \t\t;;\n \tmips3*-*)\n \t\tcpu=mips64\n@@ -1035,7 +1038,7 @@ case $cpu-$vendor in\n \t\t;;\n \tm68knommu-*)\n \t\tcpu=m68k\n-\t\tos=linux\n+\t\tbasic_os=linux\n \t\t;;\n \tm9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)\n \t\tcpu=s12z\n@@ -1045,7 +1048,7 @@ case $cpu-$vendor in\n \t\t;;\n \tparisc-*)\n \t\tcpu=hppa\n-\t\tos=linux\n+\t\tbasic_os=linux\n \t\t;;\n \tpentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)\n \t\tcpu=i586\n@@ -1081,7 +1084,7 @@ case $cpu-$vendor in\n \t\tcpu=mipsisa64sb1el\n \t\t;;\n \tsh5e[lb]-*)\n-\t\tcpu=`echo \"$cpu\" | sed 's/^\\(sh.\\)e\\(.\\)$/\\1\\2e/'`\n+\t\tcpu=$(echo \"$cpu\" | sed 's/^\\(sh.\\)e\\(.\\)$/\\1\\2e/')\n \t\t;;\n \tspur-*)\n \t\tcpu=spur\n@@ -1099,13 +1102,16 @@ case $cpu-$vendor in\n \t\tcpu=x86_64\n \t\t;;\n \txscale-* | xscalee[bl]-*)\n-\t\tcpu=`echo \"$cpu\" | sed 's/^xscale/arm/'`\n+\t\tcpu=$(echo \"$cpu\" | sed 's/^xscale/arm/')\n+\t\t;;\n+\tarm64-*)\n+\t\tcpu=aarch64\n \t\t;;\n \n \t# Recognize the canonical CPU Types that limit and/or modify the\n \t# company names they are paired with.\n \tcr16-*)\n-\t\tos=${os:-elf}\n+\t\tbasic_os=${basic_os:-elf}\n \t\t;;\n \tcrisv32-* | etraxfs*-*)\n \t\tcpu=crisv32\n@@ -1116,7 +1122,7 @@ case $cpu-$vendor in\n \t\tvendor=axis\n \t\t;;\n \tcrx-*)\n-\t\tos=${os:-elf}\n+\t\tbasic_os=${basic_os:-elf}\n \t\t;;\n \tneo-tandem)\n \t\tcpu=neo\n@@ -1138,16 +1144,12 @@ case $cpu-$vendor in\n \t\tcpu=nsx\n \t\tvendor=tandem\n \t\t;;\n-\ts390-*)\n-\t\tcpu=s390\n-\t\tvendor=ibm\n-\t\t;;\n-\ts390x-*)\n-\t\tcpu=s390x\n-\t\tvendor=ibm\n+\tmipsallegrexel-sony)\n+\t\tcpu=mipsallegrexel\n+\t\tvendor=sony\n \t\t;;\n \ttile*-*)\n-\t\tos=${os:-linux-gnu}\n+\t\tbasic_os=${basic_os:-linux-gnu}\n \t\t;;\n \n \t*)\n@@ -1163,8 +1165,8 @@ case $cpu-$vendor in\n \t\t\t| alphapca5[67] | alpha64pca5[67] \\\n \t\t\t| am33_2.0 \\\n \t\t\t| amdgcn \\\n-\t\t\t| arc | arceb \\\n-\t\t\t| arm  | arm[lb]e | arme[lb] | armv* \\\n+\t\t\t| arc | arceb | arc64 \\\n+\t\t\t| arm | arm[lb]e | arme[lb] | armv* \\\n \t\t\t| avr | avr32 \\\n \t\t\t| asmjs \\\n \t\t\t| ba \\\n@@ -1183,6 +1185,7 @@ case $cpu-$vendor in\n \t\t\t| k1om \\\n \t\t\t| le32 | le64 \\\n \t\t\t| lm32 \\\n+\t\t\t| loongarch32 | loongarch64 | loongarchx32 \\\n \t\t\t| m32c | m32r | m32rle \\\n \t\t\t| m5200 | m68000 | m680[012346]0 | m68360 | m683?2 | m68k \\\n \t\t\t| m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x \\\n@@ -1201,9 +1204,13 @@ case $cpu-$vendor in\n \t\t\t| mips64vr5900 | mips64vr5900el \\\n \t\t\t| mipsisa32 | mipsisa32el \\\n \t\t\t| mipsisa32r2 | mipsisa32r2el \\\n+\t\t\t| mipsisa32r3 | mipsisa32r3el \\\n+\t\t\t| mipsisa32r5 | mipsisa32r5el \\\n \t\t\t| mipsisa32r6 | mipsisa32r6el \\\n \t\t\t| mipsisa64 | mipsisa64el \\\n \t\t\t| mipsisa64r2 | mipsisa64r2el \\\n+\t\t\t| mipsisa64r3 | mipsisa64r3el \\\n+\t\t\t| mipsisa64r5 | mipsisa64r5el \\\n \t\t\t| mipsisa64r6 | mipsisa64r6el \\\n \t\t\t| mipsisa64sb1 | mipsisa64sb1el \\\n \t\t\t| mipsisa64sr71k | mipsisa64sr71kel \\\n@@ -1227,8 +1234,9 @@ case $cpu-$vendor in\n \t\t\t| powerpc | powerpc64 | powerpc64le | powerpcle | powerpcspe \\\n \t\t\t| pru \\\n \t\t\t| pyramid \\\n-\t\t\t| riscv | riscv32 | riscv64 \\\n+\t\t\t| riscv | riscv32 | riscv32be | riscv64 | riscv64be \\\n \t\t\t| rl78 | romp | rs6000 | rx \\\n+\t\t\t| s390 | s390x \\\n \t\t\t| score \\\n \t\t\t| sh | shl \\\n \t\t\t| sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \\\n@@ -1238,6 +1246,7 @@ case $cpu-$vendor in\n \t\t\t| sparcv8 | sparcv9 | sparcv9b | sparcv9v | sv1 | sx* \\\n \t\t\t| spu \\\n \t\t\t| tahoe \\\n+\t\t\t| thumbv7* \\\n \t\t\t| tic30 | tic4x | tic54x | tic55x | tic6x | tic80 \\\n \t\t\t| tron \\\n \t\t\t| ubicom32 \\\n@@ -1275,8 +1284,47 @@ esac\n \n # Decode manufacturer-specific aliases for certain operating systems.\n \n-if [ x$os != x ]\n+if test x$basic_os != x\n then\n+\n+# First recognize some ad-hoc caes, or perhaps split kernel-os, or else just\n+# set os.\n+case $basic_os in\n+\tgnu/linux*)\n+\t\tkernel=linux\n+\t\tos=$(echo $basic_os | sed -e 's|gnu/linux|gnu|')\n+\t\t;;\n+\tos2-emx)\n+\t\tkernel=os2\n+\t\tos=$(echo $basic_os | sed -e 's|os2-emx|emx|')\n+\t\t;;\n+\tnto-qnx*)\n+\t\tkernel=nto\n+\t\tos=$(echo $basic_os | sed -e 's|nto-qnx|qnx|')\n+\t\t;;\n+\t*-*)\n+\t\t# shellcheck disable=SC2162\n+\t\tIFS=\"-\" read kernel os <<EOF\n+$basic_os\n+EOF\n+\t\t;;\n+\t# Default OS when just kernel was specified\n+\tnto*)\n+\t\tkernel=nto\n+\t\tos=$(echo $basic_os | sed -e 's|nto|qnx|')\n+\t\t;;\n+\tlinux*)\n+\t\tkernel=linux\n+\t\tos=$(echo $basic_os | sed -e 's|linux|gnu|')\n+\t\t;;\n+\t*)\n+\t\tkernel=\n+\t\tos=$basic_os\n+\t\t;;\n+esac\n+\n+# Now, normalize the OS (knowing we just have one component, it's not a kernel,\n+# etc.)\n case $os in\n \t# First match some system type aliases that might get confused\n \t# with valid system types.\n@@ -1288,17 +1336,14 @@ case $os in\n \t\tos=cnk\n \t\t;;\n \tsolaris1 | solaris1.*)\n-\t\tos=`echo $os | sed -e 's|solaris1|sunos4|'`\n+\t\tos=$(echo $os | sed -e 's|solaris1|sunos4|')\n \t\t;;\n \tsolaris)\n \t\tos=solaris2\n \t\t;;\n \tunixware*)\n \t\tos=sysv4.2uw\n \t\t;;\n-\tgnu/linux*)\n-\t\tos=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`\n-\t\t;;\n \t# es1800 is here to avoid being matched by es* (a different OS)\n \tes1800*)\n \t\tos=ose\n@@ -1320,12 +1365,9 @@ case $os in\n \t\tos=sco3.2v4\n \t\t;;\n \tsco3.2.[4-9]*)\n-\t\tos=`echo $os | sed -e 's/sco3.2./sco3.2v/'`\n+\t\tos=$(echo $os | sed -e 's/sco3.2./sco3.2v/')\n \t\t;;\n-\tsco3.2v[4-9]* | sco5v6*)\n-\t\t# Don't forget version if it is 3.2v4 or newer.\n-\t\t;;\n-\tscout)\n+\tsco*v* | scout)\n \t\t# Don't match below\n \t\t;;\n \tsco*)\n@@ -1334,79 +1376,26 @@ case $os in\n \tpsos*)\n \t\tos=psos\n \t\t;;\n-\t# Now accept the basic system types.\n-\t# The portable systems comes first.\n-\t# Each alternative MUST end in a * to match a version number.\n-\t# sysv* is not here because it comes later, after sysvr4.\n-\tgnu* | bsd* | mach* | minix* | genix* | ultrix* | irix* \\\n-\t     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]*\\\n-\t     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \\\n-\t     | sym* | kopensolaris* | plan9* \\\n-\t     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \\\n-\t     | aos* | aros* | cloudabi* | sortix* \\\n-\t     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \\\n-\t     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \\\n-\t     | knetbsd* | mirbsd* | netbsd* \\\n-\t     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \\\n-\t     | ekkobsd* | kfreebsd* | freebsd* | riscix* | lynxos* \\\n-\t     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \\\n-\t     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \\\n-\t     | udi* | eabi* | lites* | ieee* | go32* | aux* | hcos* \\\n-\t     | chorusrdb* | cegcc* | glidix* \\\n-\t     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \\\n-\t     | midipix* | mingw32* | mingw64* | linux-gnu* | linux-android* \\\n-\t     | linux-newlib* | linux-musl* | linux-uclibc* \\\n-\t     | uxpv* | beos* | mpeix* | udk* | moxiebox* \\\n-\t     | interix* | uwin* | mks* | rhapsody* | darwin* \\\n-\t     | openstep* | oskit* | conix* | pw32* | nonstopux* \\\n-\t     | storm-chaos* | tops10* | tenex* | tops20* | its* \\\n-\t     | os2* | vos* | palmos* | uclinux* | nucleus* \\\n-\t     | morphos* | superux* | rtmk* | windiss* \\\n-\t     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \\\n-\t     | skyos* | haiku* | rdos* | toppers* | drops* | es* \\\n-\t     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \\\n-\t     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \\\n-\t     | nsk* | powerunix)\n-\t# Remember, each alternative MUST END IN *, to match a version number.\n-\t\t;;\n \tqnx*)\n-\t\tcase $cpu in\n-\t\t    x86 | i*86)\n-\t\t\t;;\n-\t\t    *)\n-\t\t\tos=nto-$os\n-\t\t\t;;\n-\t\tesac\n+\t\tos=qnx\n \t\t;;\n \thiux*)\n \t\tos=hiuxwe2\n \t\t;;\n-\tnto-qnx*)\n-\t\t;;\n-\tnto*)\n-\t\tos=`echo $os | sed -e 's|nto|nto-qnx|'`\n-\t\t;;\n-\tsim | xray | os68k* | v88r* \\\n-\t    | windows* | osx | abug | netware* | os9* \\\n-\t    | macos* | mpw* | magic* | mmixware* | mon960* | lnews*)\n-\t\t;;\n-\tlinux-dietlibc)\n-\t\tos=linux-dietlibc\n-\t\t;;\n-\tlinux*)\n-\t\tos=`echo $os | sed -e 's|linux|linux-gnu|'`\n-\t\t;;\n \tlynx*178)\n \t\tos=lynxos178\n \t\t;;\n \tlynx*5)\n \t\tos=lynxos5\n \t\t;;\n+\tlynxos*)\n+\t\t# don't get caught up in next wildcard\n+\t\t;;\n \tlynx*)\n \t\tos=lynxos\n \t\t;;\n-\tmac*)\n-\t\tos=`echo \"$os\" | sed -e 's|mac|macos|'`\n+\tmac[0-9]*)\n+\t\tos=$(echo \"$os\" | sed -e 's|mac|macos|')\n \t\t;;\n \topened*)\n \t\tos=openedition\n@@ -1415,10 +1404,10 @@ case $os in\n \t\tos=os400\n \t\t;;\n \tsunos5*)\n-\t\tos=`echo \"$os\" | sed -e 's|sunos5|solaris2|'`\n+\t\tos=$(echo \"$os\" | sed -e 's|sunos5|solaris2|')\n \t\t;;\n \tsunos6*)\n-\t\tos=`echo \"$os\" | sed -e 's|sunos6|solaris3|'`\n+\t\tos=$(echo \"$os\" | sed -e 's|sunos6|solaris3|')\n \t\t;;\n \twince*)\n \t\tos=wince\n@@ -1452,7 +1441,7 @@ case $os in\n \t\t;;\n \t# Preserve the version number of sinix5.\n \tsinix5.*)\n-\t\tos=`echo $os | sed -e 's|sinix|sysv|'`\n+\t\tos=$(echo $os | sed -e 's|sinix|sysv|')\n \t\t;;\n \tsinix*)\n \t\tos=sysv4\n@@ -1475,18 +1464,12 @@ case $os in\n \tsysvr4)\n \t\tos=sysv4\n \t\t;;\n-\t# This must come after sysvr4.\n-\tsysv*)\n-\t\t;;\n \tose*)\n \t\tos=ose\n \t\t;;\n \t*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)\n \t\tos=mint\n \t\t;;\n-\tzvmoe)\n-\t\tos=zvmoe\n-\t\t;;\n \tdicos*)\n \t\tos=dicos\n \t\t;;\n@@ -1503,19 +1486,11 @@ case $os in\n \t\t\t;;\n \t\tesac\n \t\t;;\n-\tnacl*)\n-\t\t;;\n-\tios)\n-\t\t;;\n-\tnone)\n-\t\t;;\n-\t*-eabi)\n-\t\t;;\n \t*)\n-\t\techo Invalid configuration \\`\"$1\"\\': system \\`\"$os\"\\' not recognized 1>&2\n-\t\texit 1\n+\t\t# No normalization, but not necessarily accepted, that comes below.\n \t\t;;\n esac\n+\n else\n \n # Here we handle the default operating systems that come with various machines.\n@@ -1528,6 +1503,7 @@ else\n # will signal an error saying that MANUFACTURER isn't an operating\n # system, and we'll never get to this point.\n \n+kernel=\n case $cpu-$vendor in\n \tscore-*)\n \t\tos=elf\n@@ -1539,7 +1515,8 @@ case $cpu-$vendor in\n \t\tos=riscix1.2\n \t\t;;\n \tarm*-rebel)\n-\t\tos=linux\n+\t\tkernel=linux\n+\t\tos=gnu\n \t\t;;\n \tarm*-semi)\n \t\tos=aout\n@@ -1705,84 +1682,178 @@ case $cpu-$vendor in\n \t\tos=none\n \t\t;;\n esac\n+\n fi\n \n+# Now, validate our (potentially fixed-up) OS.\n+case $os in\n+\t# Sometimes we do \"kernel-libc\", so those need to count as OSes.\n+\tmusl* | newlib* | uclibc*)\n+\t\t;;\n+\t# Likewise for \"kernel-abi\"\n+\teabi* | gnueabi*)\n+\t\t;;\n+\t# VxWorks passes extra cpu info in the 4th filed.\n+\tsimlinux | simwindows | spe)\n+\t\t;;\n+\t# Now accept the basic system types.\n+\t# The portable systems comes first.\n+\t# Each alternative MUST end in a * to match a version number.\n+\tgnu* | android* | bsd* | mach* | minix* | genix* | ultrix* | irix* \\\n+\t     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]* \\\n+\t     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \\\n+\t     | sym* |  plan9* | psp* | sim* | xray* | os68k* | v88r* \\\n+\t     | hiux* | abug | nacl* | netware* | windows* \\\n+\t     | os9* | macos* | osx* | ios* \\\n+\t     | mpw* | magic* | mmixware* | mon960* | lnews* \\\n+\t     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \\\n+\t     | aos* | aros* | cloudabi* | sortix* | twizzler* \\\n+\t     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \\\n+\t     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \\\n+\t     | mirbsd* | netbsd* | dicos* | openedition* | ose* \\\n+\t     | bitrig* | openbsd* | secbsd* | solidbsd* | libertybsd* | os108* \\\n+\t     | ekkobsd* | freebsd* | riscix* | lynxos* | os400* \\\n+\t     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \\\n+\t     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \\\n+\t     | udi* | lites* | ieee* | go32* | aux* | hcos* \\\n+\t     | chorusrdb* | cegcc* | glidix* | serenity* \\\n+\t     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \\\n+\t     | midipix* | mingw32* | mingw64* | mint* \\\n+\t     | uxpv* | beos* | mpeix* | udk* | moxiebox* \\\n+\t     | interix* | uwin* | mks* | rhapsody* | darwin* \\\n+\t     | openstep* | oskit* | conix* | pw32* | nonstopux* \\\n+\t     | storm-chaos* | tops10* | tenex* | tops20* | its* \\\n+\t     | os2* | vos* | palmos* | uclinux* | nucleus* | morphos* \\\n+\t     | scout* | superux* | sysv* | rtmk* | tpf* | windiss* \\\n+\t     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \\\n+\t     | skyos* | haiku* | rdos* | toppers* | drops* | es* \\\n+\t     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \\\n+\t     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \\\n+\t     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx*)\n+\t\t;;\n+\t# This one is extra strict with allowed versions\n+\tsco3.2v2 | sco3.2v[4-9]* | sco5v6*)\n+\t\t# Don't forget version if it is 3.2v4 or newer.\n+\t\t;;\n+\tnone)\n+\t\t;;\n+\t*)\n+\t\techo Invalid configuration \\`\"$1\"\\': OS \\`\"$os\"\\' not recognized 1>&2\n+\t\texit 1\n+\t\t;;\n+esac\n+\n+# As a final step for OS-related things, validate the OS-kernel combination\n+# (given a valid OS), if there is a kernel.\n+case $kernel-$os in\n+\tlinux-gnu* | linux-dietlibc* | linux-android* | linux-newlib* | linux-musl* | linux-uclibc* )\n+\t\t;;\n+\tuclinux-uclibc* )\n+\t\t;;\n+\t-dietlibc* | -newlib* | -musl* | -uclibc* )\n+\t\t# These are just libc implementations, not actual OSes, and thus\n+\t\t# require a kernel.\n+\t\techo \"Invalid configuration \\`$1': libc \\`$os' needs explicit kernel.\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tkfreebsd*-gnu* | kopensolaris*-gnu*)\n+\t\t;;\n+\tvxworks-simlinux | vxworks-simwindows | vxworks-spe)\n+\t\t;;\n+\tnto-qnx*)\n+\t\t;;\n+\tos2-emx)\n+\t\t;;\n+\t*-eabi* | *-gnueabi*)\n+\t\t;;\n+\t-*)\n+\t\t# Blank kernel with real OS is always fine.\n+\t\t;;\n+\t*-*)\n+\t\techo \"Invalid configuration \\`$1': Kernel \\`$kernel' not known to work with OS \\`$os'.\" 1>&2\n+\t\texit 1\n+\t\t;;\n+esac\n+\n # Here we handle the case where we know the os, and the CPU type, but not the\n # manufacturer.  We pick the logical manufacturer.\n case $vendor in\n \tunknown)\n-\t\tcase $os in\n-\t\t\triscix*)\n+\t\tcase $cpu-$os in\n+\t\t\t*-riscix*)\n \t\t\t\tvendor=acorn\n \t\t\t\t;;\n-\t\t\tsunos*)\n+\t\t\t*-sunos*)\n \t\t\t\tvendor=sun\n \t\t\t\t;;\n-\t\t\tcnk*|-aix*)\n+\t\t\t*-cnk* | *-aix*)\n \t\t\t\tvendor=ibm\n \t\t\t\t;;\n-\t\t\tbeos*)\n+\t\t\t*-beos*)\n \t\t\t\tvendor=be\n \t\t\t\t;;\n-\t\t\thpux*)\n+\t\t\t*-hpux*)\n \t\t\t\tvendor=hp\n \t\t\t\t;;\n-\t\t\tmpeix*)\n+\t\t\t*-mpeix*)\n \t\t\t\tvendor=hp\n \t\t\t\t;;\n-\t\t\thiux*)\n+\t\t\t*-hiux*)\n \t\t\t\tvendor=hitachi\n \t\t\t\t;;\n-\t\t\tunos*)\n+\t\t\t*-unos*)\n \t\t\t\tvendor=crds\n \t\t\t\t;;\n-\t\t\tdgux*)\n+\t\t\t*-dgux*)\n \t\t\t\tvendor=dg\n \t\t\t\t;;\n-\t\t\tluna*)\n+\t\t\t*-luna*)\n \t\t\t\tvendor=omron\n \t\t\t\t;;\n-\t\t\tgenix*)\n+\t\t\t*-genix*)\n \t\t\t\tvendor=ns\n \t\t\t\t;;\n-\t\t\tclix*)\n+\t\t\t*-clix*)\n \t\t\t\tvendor=intergraph\n \t\t\t\t;;\n-\t\t\tmvs* | opened*)\n+\t\t\t*-mvs* | *-opened*)\n+\t\t\t\tvendor=ibm\n+\t\t\t\t;;\n+\t\t\t*-os400*)\n \t\t\t\tvendor=ibm\n \t\t\t\t;;\n-\t\t\tos400*)\n+\t\t\ts390-* | s390x-*)\n \t\t\t\tvendor=ibm\n \t\t\t\t;;\n-\t\t\tptx*)\n+\t\t\t*-ptx*)\n \t\t\t\tvendor=sequent\n \t\t\t\t;;\n-\t\t\ttpf*)\n+\t\t\t*-tpf*)\n \t\t\t\tvendor=ibm\n \t\t\t\t;;\n-\t\t\tvxsim* | vxworks* | windiss*)\n+\t\t\t*-vxsim* | *-vxworks* | *-windiss*)\n \t\t\t\tvendor=wrs\n \t\t\t\t;;\n-\t\t\taux*)\n+\t\t\t*-aux*)\n \t\t\t\tvendor=apple\n \t\t\t\t;;\n-\t\t\thms*)\n+\t\t\t*-hms*)\n \t\t\t\tvendor=hitachi\n \t\t\t\t;;\n-\t\t\tmpw* | macos*)\n+\t\t\t*-mpw* | *-macos*)\n \t\t\t\tvendor=apple\n \t\t\t\t;;\n-\t\t\t*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)\n+\t\t\t*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)\n \t\t\t\tvendor=atari\n \t\t\t\t;;\n-\t\t\tvos*)\n+\t\t\t*-vos*)\n \t\t\t\tvendor=stratus\n \t\t\t\t;;\n \t\tesac\n \t\t;;\n esac\n \n-echo \"$cpu-$vendor-$os\"\n+echo \"$cpu-$vendor-${kernel:+$kernel-}$os\"\n exit\n \n # Local variables:"
      }
    ]
  }
]