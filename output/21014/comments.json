[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767759198",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#issuecomment-767759198",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21014",
    "id": 767759198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2Nzc1OTE5OA==",
    "user": {
      "login": "michaelfolkson",
      "id": 16323900,
      "node_id": "MDQ6VXNlcjE2MzIzOTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16323900?u=e2201a78ad660e42fd175003d02ad749b855e0a9&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelfolkson",
      "html_url": "https://github.com/michaelfolkson",
      "followers_url": "https://api.github.com/users/michaelfolkson/followers",
      "following_url": "https://api.github.com/users/michaelfolkson/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
      "repos_url": "https://api.github.com/users/michaelfolkson/repos",
      "events_url": "https://api.github.com/users/michaelfolkson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-26T19:02:09Z",
    "updated_at": "2021-01-26T19:02:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK\r\n\r\nCan you [squash](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits) your commits @stackman27?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767759198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767824800",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#issuecomment-767824800",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21014",
    "id": 767824800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NzgyNDgwMA==",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?u=302489a175aae611d43804dff7b4cfced6278320&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-26T21:00:57Z",
    "updated_at": "2021-01-26T21:00:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Concept ACK\r\n> \r\n> Can you [squash](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits) your commits @stackman27?\r\n\r\nYes! Should be fine now :) ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767824800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767944191",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#issuecomment-767944191",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21014",
    "id": 767944191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2Nzk0NDE5MQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-27T01:25:15Z",
    "updated_at": "2021-04-29T11:06:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21762 (test: Speed up mempool_spend_coinbase.py by MarcoFalke)\n* #21754 (test: Run feature_cltv with MiniWallet by MarcoFalke)\n* #21178 (test: run mempool_reorg.py even with wallet disabled by DariusParvin)\n* #20874 (test: Run mempool_limit.py even with wallet disabled by stackman27)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767944191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/828993870",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#issuecomment-828993870",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21014",
    "id": 828993870,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODk5Mzg3MA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T07:10:22Z",
    "updated_at": "2021-04-29T07:10:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/828993870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882059833",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#issuecomment-882059833",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21014",
    "id": 882059833,
    "node_id": "IC_kwDOABII5840kyo5",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-18T13:53:50Z",
    "updated_at": "2021-07-18T13:53:50Z",
    "author_association": "MEMBER",
    "body": "Are you still working on this? Otherwise someone else could pick this up.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882059833/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/883609446",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#issuecomment-883609446",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21014",
    "id": 883609446,
    "node_id": "IC_kwDOABII5840qs9m",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-20T18:36:39Z",
    "updated_at": "2021-07-20T18:36:39Z",
    "author_association": "MEMBER",
    "body": "Picked up in #22509 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/883609446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565947664",
    "pull_request_review_id": 578144516,
    "id": 565947664,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTk0NzY2NA==",
    "diff_hunk": "@@ -139,6 +122,7 @@ def run_test(self):\n         self.log.info('A transaction that conflicts with an unconfirmed tx')\n         # Send the transaction that replaces the mempool transaction and opts out of replaceability\n         node.sendrawtransaction(hexstring=tx.serialize().hex(), maxfeerate=0)\n+        self.mempool_size += 1",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 106,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "45010220ced6d528f190e9eff3e2285c94ff71c2",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why do we +1 here?",
    "created_at": "2021-01-28T09:38:28Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r565947664",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565947664"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r565947664"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565947664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 125,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565950244",
    "pull_request_review_id": 578144516,
    "id": 565950244,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTk1MDI0NA==",
    "diff_hunk": "@@ -327,13 +306,13 @@ def run_test(self):\n         self.log.info('A transaction that is locked by BIP68 sequence logic')\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_reference)))\n         tx.vin[0].nSequence = 2  # We could include it in the second block mined from now, but not the very next one\n+        tx.nVersion = 2",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 176,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "45010220ced6d528f190e9eff3e2285c94ff71c2",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not add version to `send_self_transfer()` as optional argument too?",
    "created_at": "2021-01-28T09:42:18Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r565950244",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565950244"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r565950244"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565950244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 306,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571121996",
    "pull_request_review_id": 584541063,
    "id": 571121996,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTEyMTk5Ng==",
    "diff_hunk": "@@ -139,6 +122,7 @@ def run_test(self):\n         self.log.info('A transaction that conflicts with an unconfirmed tx')\n         # Send the transaction that replaces the mempool transaction and opts out of replaceability\n         node.sendrawtransaction(hexstring=tx.serialize().hex(), maxfeerate=0)\n+        self.mempool_size += 1",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 106,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "45010220ced6d528f190e9eff3e2285c94ff71c2",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "oops that was my bad \ud83d\ude05. However, I just pushed a new commit and fixed the issue. Not the most eloquent solution, but I'd highly appreciate any suggestions to improve it",
    "created_at": "2021-02-05T17:14:28Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571121996",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571121996"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571121996"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571121996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 125,
    "side": "RIGHT",
    "in_reply_to_id": 565947664
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571122882",
    "pull_request_review_id": 584542264,
    "id": 571122882,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTEyMjg4Mg==",
    "diff_hunk": "@@ -327,13 +306,13 @@ def run_test(self):\n         self.log.info('A transaction that is locked by BIP68 sequence logic')\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_reference)))\n         tx.vin[0].nSequence = 2  # We could include it in the second block mined from now, but not the very next one\n+        tx.nVersion = 2",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 176,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "45010220ced6d528f190e9eff3e2285c94ff71c2",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I did try to do that, but I wasn't sure about the stylistic aspect of passing arguments in functions. Do we have a hard cap on the # of arguments we can pass on functions? ",
    "created_at": "2021-02-05T17:15:52Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571122882",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571122882"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571122882"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571122882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 306,
    "side": "RIGHT",
    "in_reply_to_id": 565950244
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571516444",
    "pull_request_review_id": 584933219,
    "id": 571516444,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTUxNjQ0NA==",
    "diff_hunk": "@@ -58,38 +55,30 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n         self.log.info('Start with empty mempool, and 200 blocks')\n         self.mempool_size = 0\n-        assert_equal(node.getblockcount(), 200)\n+        miniwallet.generate(200)\n+        assert_equal(node.getblockcount(), 400)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 29,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "27f078c484a99b95182c5e2bb987b8f8fa165719",
    "user": {
      "login": "amitiuttarwar",
      "id": 1500952,
      "node_id": "MDQ6VXNlcjE1MDA5NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitiuttarwar",
      "html_url": "https://github.com/amitiuttarwar",
      "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
      "following_url": "https://api.github.com/users/amitiuttarwar/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
      "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
      "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
      "events_url": "https://api.github.com/users/amitiuttarwar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "the log 3 lines up says 200 blocks, but here we check 400. can you make these consistent?",
    "created_at": "2021-02-07T02:04:37Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571516444",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571516444"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571516444"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571516444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 63,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571516496",
    "pull_request_review_id": 584933219,
    "id": 571516496,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTUxNjQ5Ng==",
    "diff_hunk": "@@ -139,6 +122,7 @@ def run_test(self):\n         self.log.info('A transaction that conflicts with an unconfirmed tx')\n         # Send the transaction that replaces the mempool transaction and opts out of replaceability\n         node.sendrawtransaction(hexstring=tx.serialize().hex(), maxfeerate=0)\n+        #self.mempool_size += 1",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 106,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "27f078c484a99b95182c5e2bb987b8f8fa165719",
    "user": {
      "login": "amitiuttarwar",
      "id": 1500952,
      "node_id": "MDQ6VXNlcjE1MDA5NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitiuttarwar",
      "html_url": "https://github.com/amitiuttarwar",
      "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
      "following_url": "https://api.github.com/users/amitiuttarwar/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
      "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
      "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
      "events_url": "https://api.github.com/users/amitiuttarwar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this line should be deleted. If you meant it communicate something about the test, please clarify ",
    "created_at": "2021-02-07T02:05:08Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571516496",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571516496"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571516496"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571516496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 125,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571517084",
    "pull_request_review_id": 584933219,
    "id": 571517084,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTUxNzA4NA==",
    "diff_hunk": "@@ -55,25 +55,37 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def sign_tx(self, *, tx):\n+        \"\"\"Sign the tx with witness stack of OP_TRUE\"\"\"\n+        tx.wit.vtxinwit = [CTxInWitness()]\n+        tx.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        return tx\n+\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, existing_tx = None, send_tx = True, default_fee = False):\n         \"\"\"Create and send a tx with the specified fee_rate. Fee may be exact or at most one satoshi higher than needed.\"\"\"\n         self._utxos = sorted(self._utxos, key=lambda k: k['value'])\n         utxo_to_spend = utxo_to_spend or self._utxos.pop()  # Pick the largest utxo (if none provided) and hope it covers the fee\n+\n         vsize = Decimal(96)\n-        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000)) if send_tx else satoshi_round(utxo_to_spend['value'] - fee_rate)",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 18,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "27f078c484a99b95182c5e2bb987b8f8fa165719",
    "user": {
      "login": "amitiuttarwar",
      "id": 1500952,
      "node_id": "MDQ6VXNlcjE1MDA5NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitiuttarwar",
      "html_url": "https://github.com/amitiuttarwar",
      "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
      "following_url": "https://api.github.com/users/amitiuttarwar/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
      "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
      "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
      "events_url": "https://api.github.com/users/amitiuttarwar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I find this one-line if/else to be pretty confusing. could you just break it into a few lines to clarify the logic flow? ",
    "created_at": "2021-02-07T02:10:26Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571517084",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571517084"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571517084"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571517084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 70,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571663601",
    "pull_request_review_id": 585048712,
    "id": 571663601,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTY2MzYwMQ==",
    "diff_hunk": "@@ -58,38 +55,30 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n         self.log.info('Start with empty mempool, and 200 blocks')\n         self.mempool_size = 0\n-        assert_equal(node.getblockcount(), 200)\n+        miniwallet.generate(200)\n+        assert_equal(node.getblockcount(), 400)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 29,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "27f078c484a99b95182c5e2bb987b8f8fa165719",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Got it! Fixed",
    "created_at": "2021-02-07T18:36:08Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571663601",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571663601"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571663601"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571663601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 63,
    "side": "RIGHT",
    "in_reply_to_id": 571516444
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571663698",
    "pull_request_review_id": 585048822,
    "id": 571663698,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTY2MzY5OA==",
    "diff_hunk": "@@ -55,25 +55,37 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def sign_tx(self, *, tx):\n+        \"\"\"Sign the tx with witness stack of OP_TRUE\"\"\"\n+        tx.wit.vtxinwit = [CTxInWitness()]\n+        tx.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        return tx\n+\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, existing_tx = None, send_tx = True, default_fee = False):\n         \"\"\"Create and send a tx with the specified fee_rate. Fee may be exact or at most one satoshi higher than needed.\"\"\"\n         self._utxos = sorted(self._utxos, key=lambda k: k['value'])\n         utxo_to_spend = utxo_to_spend or self._utxos.pop()  # Pick the largest utxo (if none provided) and hope it covers the fee\n+\n         vsize = Decimal(96)\n-        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000)) if send_tx else satoshi_round(utxo_to_spend['value'] - fee_rate)",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 18,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "27f078c484a99b95182c5e2bb987b8f8fa165719",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I broke it down, I hope it makes more sense now :) ",
    "created_at": "2021-02-07T18:37:09Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571663698",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571663698"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r571663698"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571663698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 70,
    "side": "RIGHT",
    "in_reply_to_id": 571517084
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572172425",
    "pull_request_review_id": 585666435,
    "id": 572172425,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjE3MjQyNQ==",
    "diff_hunk": "@@ -58,38 +55,30 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n-        self.log.info('Start with empty mempool, and 200 blocks')\n+        self.log.info('Start with empty mempool, and 400 blocks')\n         self.mempool_size = 0\n-        assert_equal(node.getblockcount(), 200)\n+        miniwallet.generate(200)\n+        assert_equal(node.getblockcount(), 400)\n         assert_equal(node.getmempoolinfo()['size'], self.mempool_size)\n-        coins = node.listunspent()\n \n         self.log.info('Should not accept garbage to testmempoolaccept')\n         assert_raises_rpc_error(-3, 'Expected type array, got string', lambda: node.testmempoolaccept(rawtxs='ff00baar'))\n         assert_raises_rpc_error(-8, 'Array must contain exactly one raw transaction for now', lambda: node.testmempoolaccept(rawtxs=['ff00baar', 'ff22']))\n         assert_raises_rpc_error(-22, 'TX decode failed', lambda: node.testmempoolaccept(rawtxs=['ff00baar']))\n \n         self.log.info('A transaction already in the blockchain')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        raw_tx_in_block = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout']}],\n-            outputs=[{node.getnewaddress(): 0.3}, {node.getnewaddress(): 49}],\n-        ))['hex']\n-        txid_in_block = node.sendrawtransaction(hexstring=raw_tx_in_block, maxfeerate=0)\n-        node.generate(1)\n+        tx_in_block = miniwallet.send_self_transfer(from_node = node, default_fee = True)\n+        miniwallet.generate(1) # Generate a block, tx gets mined therefore mempool is empty",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 48,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Any reason to change this from `node.generate(1)`? `miniwallet.generate` will put an immature utxo in the wallet.",
    "created_at": "2021-02-08T16:12:28Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572172425",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572172425"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572172425"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572172425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 73,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572173488",
    "pull_request_review_id": 585666435,
    "id": 572173488,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjE3MzQ4OA==",
    "diff_hunk": "@@ -58,38 +55,30 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n-        self.log.info('Start with empty mempool, and 200 blocks')\n+        self.log.info('Start with empty mempool, and 400 blocks')\n         self.mempool_size = 0\n-        assert_equal(node.getblockcount(), 200)\n+        miniwallet.generate(200)\n+        assert_equal(node.getblockcount(), 400)\n         assert_equal(node.getmempoolinfo()['size'], self.mempool_size)\n-        coins = node.listunspent()\n \n         self.log.info('Should not accept garbage to testmempoolaccept')\n         assert_raises_rpc_error(-3, 'Expected type array, got string', lambda: node.testmempoolaccept(rawtxs='ff00baar'))\n         assert_raises_rpc_error(-8, 'Array must contain exactly one raw transaction for now', lambda: node.testmempoolaccept(rawtxs=['ff00baar', 'ff22']))\n         assert_raises_rpc_error(-22, 'TX decode failed', lambda: node.testmempoolaccept(rawtxs=['ff00baar']))\n \n         self.log.info('A transaction already in the blockchain')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        raw_tx_in_block = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout']}],\n-            outputs=[{node.getnewaddress(): 0.3}, {node.getnewaddress(): 49}],\n-        ))['hex']\n-        txid_in_block = node.sendrawtransaction(hexstring=raw_tx_in_block, maxfeerate=0)\n-        node.generate(1)\n+        tx_in_block = miniwallet.send_self_transfer(from_node = node, default_fee = True)\n+        miniwallet.generate(1) # Generate a block, tx gets mined therefore mempool is empty\n         self.mempool_size = 0\n         self.check_mempool_result(\n-            result_expected=[{'txid': txid_in_block, 'allowed': False, 'reject-reason': 'txn-already-known'}],\n-            rawtxs=[raw_tx_in_block],\n+            result_expected=[{'txid': tx_in_block['txid'], 'allowed': False, 'reject-reason': 'txn-already-known'}],\n+            rawtxs=[tx_in_block['hex']],\n         )\n-",
    "path": "test/functional/mempool_accept.py",
    "position": 58,
    "original_position": 56,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "any reason to change this? Previously there was a newline between each test",
    "created_at": "2021-02-08T16:13:55Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572173488",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572173488"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572173488"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572173488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 86,
    "original_line": 86,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572176537",
    "pull_request_review_id": 585666435,
    "id": 572176537,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjE3NjUzNw==",
    "diff_hunk": "@@ -58,38 +55,30 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n-        self.log.info('Start with empty mempool, and 200 blocks')\n+        self.log.info('Start with empty mempool, and 400 blocks')\n         self.mempool_size = 0\n-        assert_equal(node.getblockcount(), 200)\n+        miniwallet.generate(200)\n+        assert_equal(node.getblockcount(), 400)\n         assert_equal(node.getmempoolinfo()['size'], self.mempool_size)\n-        coins = node.listunspent()\n \n         self.log.info('Should not accept garbage to testmempoolaccept')\n         assert_raises_rpc_error(-3, 'Expected type array, got string', lambda: node.testmempoolaccept(rawtxs='ff00baar'))\n         assert_raises_rpc_error(-8, 'Array must contain exactly one raw transaction for now', lambda: node.testmempoolaccept(rawtxs=['ff00baar', 'ff22']))\n         assert_raises_rpc_error(-22, 'TX decode failed', lambda: node.testmempoolaccept(rawtxs=['ff00baar']))\n \n         self.log.info('A transaction already in the blockchain')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        raw_tx_in_block = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout']}],\n-            outputs=[{node.getnewaddress(): 0.3}, {node.getnewaddress(): 49}],\n-        ))['hex']\n-        txid_in_block = node.sendrawtransaction(hexstring=raw_tx_in_block, maxfeerate=0)\n-        node.generate(1)\n+        tx_in_block = miniwallet.send_self_transfer(from_node = node, default_fee = True)\n+        miniwallet.generate(1) # Generate a block, tx gets mined therefore mempool is empty\n         self.mempool_size = 0\n         self.check_mempool_result(\n-            result_expected=[{'txid': txid_in_block, 'allowed': False, 'reject-reason': 'txn-already-known'}],\n-            rawtxs=[raw_tx_in_block],\n+            result_expected=[{'txid': tx_in_block['txid'], 'allowed': False, 'reject-reason': 'txn-already-known'}],\n+            rawtxs=[tx_in_block['hex']],\n         )\n-\n         self.log.info('A transaction not in the mempool')\n         fee = Decimal('0.000007')\n-        raw_tx_0 = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{\"txid\": txid_in_block, \"vout\": 0, \"sequence\": BIP125_SEQUENCE_NUMBER}],  # RBF is used later\n-            outputs=[{node.getnewaddress(): Decimal('0.3') - fee}],\n-        ))['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, seq_num = BIP125_SEQUENCE_NUMBER,  fee_rate = fee, send_tx = False)['hex'] #RBF enabled (0xffffffd)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 63,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Any reason to mention 0xffffffd?",
    "created_at": "2021-02-08T16:17:47Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572176537",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572176537"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572176537"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572176537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 81,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572177242",
    "pull_request_review_id": 585666435,
    "id": 572177242,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjE3NzI0Mg==",
    "diff_hunk": "@@ -99,21 +88,15 @@ def run_test(self):\n         )\n \n         self.log.info('A final transaction not in the mempool')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        output_amount = Decimal('0.025')\n-        raw_tx_final = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout'], \"sequence\": 0xffffffff}],  # SEQUENCE_FINAL\n-            outputs=[{node.getnewaddress(): output_amount}],\n-            locktime=node.getblockcount() + 2000,  # Can be anything\n-        ))['hex']\n-        tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_final)))\n-        fee_expected = coin['amount'] - output_amount\n+        raw_tx_final = miniwallet.send_self_transfer(from_node = node, send_tx = False)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 80,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "why is this no longer passing SEQUENCE_FINAL, etc...?",
    "created_at": "2021-02-08T16:18:42Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572177242",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572177242"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572177242"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572177242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572181551",
    "pull_request_review_id": 585666435,
    "id": 572181551,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjE4MTU1MQ==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this call needed? The tx should already be signed",
    "created_at": "2021-02-08T16:24:19Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572181551",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572181551"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572181551"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572181551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572208649",
    "pull_request_review_id": 585714521,
    "id": 572208649,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjIwODY0OQ==",
    "diff_hunk": "@@ -99,21 +88,15 @@ def run_test(self):\n         )\n \n         self.log.info('A final transaction not in the mempool')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        output_amount = Decimal('0.025')\n-        raw_tx_final = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout'], \"sequence\": 0xffffffff}],  # SEQUENCE_FINAL\n-            outputs=[{node.getnewaddress(): output_amount}],\n-            locktime=node.getblockcount() + 2000,  # Can be anything\n-        ))['hex']\n-        tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_final)))\n-        fee_expected = coin['amount'] - output_amount\n+        raw_tx_final = miniwallet.send_self_transfer(from_node = node, send_tx = False)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 80,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thats because the default is set to `0xffffffff` in `send_send_transfer` parameter",
    "created_at": "2021-02-08T16:58:43Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572208649",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572208649"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572208649"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572208649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT",
    "in_reply_to_id": 572177242
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572209459",
    "pull_request_review_id": 585715528,
    "id": 572209459,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjIwOTQ1OQ==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I thought we changed the `nValue` and `nSequence` of raw_tx_0 therefore we have to resign it, is that not the case? ",
    "created_at": "2021-02-08T16:59:47Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572209459",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572209459"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572209459"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572209459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572228039",
    "pull_request_review_id": 585741103,
    "id": 572228039,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjIyODAzOQ==",
    "diff_hunk": "@@ -99,21 +88,15 @@ def run_test(self):\n         )\n \n         self.log.info('A final transaction not in the mempool')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        output_amount = Decimal('0.025')\n-        raw_tx_final = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout'], \"sequence\": 0xffffffff}],  # SEQUENCE_FINAL\n-            outputs=[{node.getnewaddress(): output_amount}],\n-            locktime=node.getblockcount() + 2000,  # Can be anything\n-        ))['hex']\n-        tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_final)))\n-        fee_expected = coin['amount'] - output_amount\n+        raw_tx_final = miniwallet.send_self_transfer(from_node = node, send_tx = False)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 80,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So if the default changes, the test will fail? If so, I'd prefer to set it here to avoid a changed default breaking the test.",
    "created_at": "2021-02-08T17:23:49Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572228039",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572228039"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572228039"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572228039/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT",
    "in_reply_to_id": 572177242
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572228749",
    "pull_request_review_id": 585741973,
    "id": 572228749,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjIyODc0OQ==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "miniwallet doesn't do any sighashing, so no. What is the error message you see when not \"signing\"?",
    "created_at": "2021-02-08T17:24:43Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572228749",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572228749"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572228749"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572228749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572232350",
    "pull_request_review_id": 585746442,
    "id": 572232350,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjIzMjM1MA==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I commented 114 out and it fails this assertion\r\n```\r\n self.check_mempool_result(\r\n  result_expected=[{'txid': txid_0, 'allowed': True, 'vsize': tx.get_vsize(), 'fees': {'base': (2 * fee)}}],\r\n  rawtxs=[raw_tx_0],\r\n )\r\n****** OUTPUT ******\r\nAssertionError: not([{'txid': '9295ae1bef2de5cb6dcf3a63504d2a58435572a32cf95caa078cd1a988f19101', 'allowed': True, 'vsize': 96, 'fees': {'base': Decimal('0.000014')}}] == [{'txid': '9295ae1bef2de5cb6dcf3a63504d2a58435572a32cf95caa078cd1a988f19101', 'allowed': False, 'reject-reason': 'txn-already-in-mempool'}])\r\n```",
    "created_at": "2021-02-08T17:29:14Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572232350",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572232350"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572232350"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572232350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572233311",
    "pull_request_review_id": 585747571,
    "id": 572233311,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjIzMzMxMQ==",
    "diff_hunk": "@@ -99,21 +88,15 @@ def run_test(self):\n         )\n \n         self.log.info('A final transaction not in the mempool')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        output_amount = Decimal('0.025')\n-        raw_tx_final = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout'], \"sequence\": 0xffffffff}],  # SEQUENCE_FINAL\n-            outputs=[{node.getnewaddress(): output_amount}],\n-            locktime=node.getblockcount() + 2000,  # Can be anything\n-        ))['hex']\n-        tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_final)))\n-        fee_expected = coin['amount'] - output_amount\n+        raw_tx_final = miniwallet.send_self_transfer(from_node = node, send_tx = False)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 80,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Got it! Thank you",
    "created_at": "2021-02-08T17:30:26Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572233311",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572233311"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572233311"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572233311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT",
    "in_reply_to_id": 572177242
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572241824",
    "pull_request_review_id": 585758478,
    "id": 572241824,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjI0MTgyNA==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You can't comment out the line, but you can remove the \"signing roundtrip\" and simply take the tx as is.",
    "created_at": "2021-02-08T17:42:14Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572241824",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572241824"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572241824"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572241824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572251107",
    "pull_request_review_id": 585770298,
    "id": 572251107,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjI1MTEwNw==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm sorry but do you mean just take the `raw_tx_0 = tx.serialize().hex()`? ",
    "created_at": "2021-02-08T17:55:27Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572251107",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572251107"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572251107"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572251107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572266680",
    "pull_request_review_id": 585790541,
    "id": 572266680,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjI2NjY4MA==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I tried the above approach but am unable to get/spend the utxo in line 149/151 associated with `txid_0`, because it doesnot have  tides with `send_self_transfer` . Is there any way around it?",
    "created_at": "2021-02-08T18:19:05Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572266680",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572266680"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572266680"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572266680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572268388",
    "pull_request_review_id": 585792720,
    "id": 572268388,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjI2ODM4OA==",
    "diff_hunk": "@@ -128,7 +111,7 @@ def run_test(self):\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_0)))\n         tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\n         tx.vin[0].nSequence = BIP125_SEQUENCE_NUMBER + 1  # Now, opt out of RBF\n-        raw_tx_0 = node.signrawtransactionwithwallet(tx.serialize().hex())['hex']\n+        raw_tx_0 = miniwallet.send_self_transfer(from_node = node, fee_rate = fee * 2, send_tx = False, existing_tx = tx)['hex']",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 99,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "582d57cc9451fab44d693736127796fc1e7538e4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe add a send_tx to miniwallet which does the needed steps?",
    "created_at": "2021-02-08T18:21:49Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572268388",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572268388"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r572268388"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572268388/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT",
    "in_reply_to_id": 572181551
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575334436",
    "pull_request_review_id": 589608933,
    "id": 575334436,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTMzNDQzNg==",
    "diff_hunk": "@@ -35,7 +35,7 @@\n     assert_raises_rpc_error,\n     hex_str_to_bytes,\n )\n-\n+from test_framework.wallet import MiniWallet\n \n class MempoolAcceptanceTest(BitcoinTestFramework):\n     def set_test_params(self):",
    "path": "test/functional/mempool_accept.py",
    "position": 8,
    "original_position": 8,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "DariusParvin",
      "id": 41220998,
      "node_id": "MDQ6VXNlcjQxMjIwOTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/41220998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DariusParvin",
      "html_url": "https://github.com/DariusParvin",
      "followers_url": "https://api.github.com/users/DariusParvin/followers",
      "following_url": "https://api.github.com/users/DariusParvin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DariusParvin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DariusParvin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DariusParvin/subscriptions",
      "organizations_url": "https://api.github.com/users/DariusParvin/orgs",
      "repos_url": "https://api.github.com/users/DariusParvin/repos",
      "events_url": "https://api.github.com/users/DariusParvin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DariusParvin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You could use `self.setup_clean_chain = True` to start the blockchain with 0 blocks.",
    "created_at": "2021-02-12T16:11:32Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575334436",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575334436"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575334436"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575334436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 41,
    "original_line": 41,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575906571",
    "pull_request_review_id": 589608933,
    "id": 575906571,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTkwNjU3MQ==",
    "diff_hunk": "@@ -55,25 +55,34 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, default_fee = False):\n         \"\"\"Create and send a tx with the specified fee_rate. Fee may be exact or at most one satoshi higher than needed.\"\"\"\n         self._utxos = sorted(self._utxos, key=lambda k: k['value'])\n         utxo_to_spend = utxo_to_spend or self._utxos.pop()  # Pick the largest utxo (if none provided) and hope it covers the fee\n         vsize = Decimal(96)\n-        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+\n+        # if send_tx is set to False then calculate send_value without vsize",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 12,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "DariusParvin",
      "id": 41220998,
      "node_id": "MDQ6VXNlcjQxMjIwOTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/41220998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DariusParvin",
      "html_url": "https://github.com/DariusParvin",
      "followers_url": "https://api.github.com/users/DariusParvin/followers",
      "following_url": "https://api.github.com/users/DariusParvin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DariusParvin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DariusParvin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DariusParvin/subscriptions",
      "organizations_url": "https://api.github.com/users/DariusParvin/orgs",
      "repos_url": "https://api.github.com/users/DariusParvin/repos",
      "events_url": "https://api.github.com/users/DariusParvin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DariusParvin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm curious why `send_tx = False` should affect the fee?",
    "created_at": "2021-02-15T02:00:06Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575906571",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575906571"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575906571"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575906571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 64,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575906973",
    "pull_request_review_id": 589608933,
    "id": 575906973,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTkwNjk3Mw==",
    "diff_hunk": "@@ -327,13 +306,13 @@ def run_test(self):\n         self.log.info('A transaction that is locked by BIP68 sequence logic')\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_reference)))\n         tx.vin[0].nSequence = 2  # We could include it in the second block mined from now, but not the very next one\n+        tx.nVersion = 2",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 176,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "45010220ced6d528f190e9eff3e2285c94ff71c2",
    "user": {
      "login": "DariusParvin",
      "id": 41220998,
      "node_id": "MDQ6VXNlcjQxMjIwOTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/41220998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DariusParvin",
      "html_url": "https://github.com/DariusParvin",
      "followers_url": "https://api.github.com/users/DariusParvin/followers",
      "following_url": "https://api.github.com/users/DariusParvin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DariusParvin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DariusParvin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DariusParvin/subscriptions",
      "organizations_url": "https://api.github.com/users/DariusParvin/orgs",
      "repos_url": "https://api.github.com/users/DariusParvin/repos",
      "events_url": "https://api.github.com/users/DariusParvin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DariusParvin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe it's worth just assuming `nVersion = 2` in the MiniWallet, and add it as an option argument in the future if/when there's a test that requires `nVersion = 1`?",
    "created_at": "2021-02-15T02:02:33Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575906973",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575906973"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575906973"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575906973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 306,
    "side": "RIGHT",
    "in_reply_to_id": 565950244
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575907953",
    "pull_request_review_id": 589608933,
    "id": 575907953,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTkwNzk1Mw==",
    "diff_hunk": "@@ -55,25 +55,34 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, default_fee = False):",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 5,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "DariusParvin",
      "id": 41220998,
      "node_id": "MDQ6VXNlcjQxMjIwOTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/41220998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DariusParvin",
      "html_url": "https://github.com/DariusParvin",
      "followers_url": "https://api.github.com/users/DariusParvin/followers",
      "following_url": "https://api.github.com/users/DariusParvin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DariusParvin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DariusParvin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DariusParvin/subscriptions",
      "organizations_url": "https://api.github.com/users/DariusParvin/orgs",
      "repos_url": "https://api.github.com/users/DariusParvin/repos",
      "events_url": "https://api.github.com/users/DariusParvin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DariusParvin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It seems like it might be misleading to have a method whose name is `send_self_transfer`, but then have a flag to say `send = False`. \r\n\r\nInstead, maybe it would be more straightforward to have a separate method `create_self_transfer`, that returns the tx hex. This function could be used within `send_self_transfer` to create the transaction before broadcasting it. \r\n\r\nI'm about to submit a PR for another test where I had a go at doing it this way.",
    "created_at": "2021-02-15T02:08:05Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575907953",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575907953"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575907953"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575907953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 58,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575909995",
    "pull_request_review_id": 589608933,
    "id": 575909995,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTkwOTk5NQ==",
    "diff_hunk": "@@ -55,25 +55,34 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, default_fee = False):\n         \"\"\"Create and send a tx with the specified fee_rate. Fee may be exact or at most one satoshi higher than needed.\"\"\"\n         self._utxos = sorted(self._utxos, key=lambda k: k['value'])\n         utxo_to_spend = utxo_to_spend or self._utxos.pop()  # Pick the largest utxo (if none provided) and hope it covers the fee\n         vsize = Decimal(96)\n-        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+\n+        # if send_tx is set to False then calculate send_value without vsize\n+        if send_tx:\n+            send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+        else:\n+            send_value = satoshi_round(utxo_to_spend['value'] - fee_rate)\n         fee = utxo_to_spend['value'] - send_value\n         assert send_value > 0\n \n         tx = CTransaction()\n-        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']))]\n+        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']), nSequence = seq_num)]\n         tx.vout = [CTxOut(int(send_value * COIN), self._scriptPubKey)]\n         tx.wit.vtxinwit = [CTxInWitness()]\n         tx.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n         tx_hex = tx.serialize().hex()\n \n         tx_info = from_node.testmempoolaccept([tx_hex])[0]\n         self._utxos.append({'txid': tx_info['txid'], 'vout': 0, 'value': send_value})",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 29,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "DariusParvin",
      "id": 41220998,
      "node_id": "MDQ6VXNlcjQxMjIwOTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/41220998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DariusParvin",
      "html_url": "https://github.com/DariusParvin",
      "followers_url": "https://api.github.com/users/DariusParvin/followers",
      "following_url": "https://api.github.com/users/DariusParvin/following{/other_user}",
      "gists_url": "https://api.github.com/users/DariusParvin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DariusParvin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DariusParvin/subscriptions",
      "organizations_url": "https://api.github.com/users/DariusParvin/orgs",
      "repos_url": "https://api.github.com/users/DariusParvin/repos",
      "events_url": "https://api.github.com/users/DariusParvin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DariusParvin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If `send_tx` was set to `False`, this utxo could be unspendable, potentially causing problems downstream where the `get_utxo` does not yield a spendable utxo. So I it's probably better to only append the new utxo if `send_tx == True`, after calling `sendrawtransaction`.",
    "created_at": "2021-02-15T02:18:23Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575909995",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575909995"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575909995"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575909995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 80,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/576980164",
    "pull_request_review_id": 591428918,
    "id": 576980164,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Njk4MDE2NA==",
    "diff_hunk": "@@ -58,38 +55,31 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n-        self.log.info('Start with empty mempool, and 200 blocks')\n+        self.log.info('Start with empty mempool, and 400 blocks')\n         self.mempool_size = 0\n-        assert_equal(node.getblockcount(), 200)\n+        miniwallet.generate(200)",
    "path": "test/functional/mempool_accept.py",
    "position": null,
    "original_position": 29,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Generating blocks takes a few seconds in valgrind, so I am thinking if this test may benefit from using `miniwallet.scan_blocks` (to be introduced in #21200)",
    "created_at": "2021-02-16T16:55:17Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r576980164",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/576980164"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r576980164"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/576980164/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 62,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579307640",
    "pull_request_review_id": 594348123,
    "id": 579307640,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3OTMwNzY0MA==",
    "diff_hunk": "@@ -55,25 +55,34 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, default_fee = False):\n         \"\"\"Create and send a tx with the specified fee_rate. Fee may be exact or at most one satoshi higher than needed.\"\"\"\n         self._utxos = sorted(self._utxos, key=lambda k: k['value'])\n         utxo_to_spend = utxo_to_spend or self._utxos.pop()  # Pick the largest utxo (if none provided) and hope it covers the fee\n         vsize = Decimal(96)\n-        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+\n+        # if send_tx is set to False then calculate send_value without vsize",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 12,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It was just a little hack that I found to get the `vsize` and `fee` assertion to work. But, I believe I found a way out! Pushed a new commit :) ",
    "created_at": "2021-02-19T16:21:27Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579307640",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579307640"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579307640"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579307640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 64,
    "side": "RIGHT",
    "in_reply_to_id": 575906571
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579307693",
    "pull_request_review_id": 594348198,
    "id": 579307693,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3OTMwNzY5Mw==",
    "diff_hunk": "@@ -55,25 +55,34 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, default_fee = False):",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 5,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That totally makes sense! or maybe we can simply rename the method to something that mimics it's accurate behavior, something in the lines of `sign_or_send_self_transfer`. Would love to hear @MarcoFalke's thoughts on this ",
    "created_at": "2021-02-19T16:21:32Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579307693",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579307693"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579307693"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579307693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 58,
    "side": "RIGHT",
    "in_reply_to_id": 575907953
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579308133",
    "pull_request_review_id": 594348832,
    "id": 579308133,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3OTMwODEzMw==",
    "diff_hunk": "@@ -55,25 +55,34 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, default_fee = False):\n         \"\"\"Create and send a tx with the specified fee_rate. Fee may be exact or at most one satoshi higher than needed.\"\"\"\n         self._utxos = sorted(self._utxos, key=lambda k: k['value'])\n         utxo_to_spend = utxo_to_spend or self._utxos.pop()  # Pick the largest utxo (if none provided) and hope it covers the fee\n         vsize = Decimal(96)\n-        send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+\n+        # if send_tx is set to False then calculate send_value without vsize\n+        if send_tx:\n+            send_value = satoshi_round(utxo_to_spend['value'] - fee_rate * (vsize / 1000))\n+        else:\n+            send_value = satoshi_round(utxo_to_spend['value'] - fee_rate)\n         fee = utxo_to_spend['value'] - send_value\n         assert send_value > 0\n \n         tx = CTransaction()\n-        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']))]\n+        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']), nSequence = seq_num)]\n         tx.vout = [CTxOut(int(send_value * COIN), self._scriptPubKey)]\n         tx.wit.vtxinwit = [CTxInWitness()]\n         tx.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n         tx_hex = tx.serialize().hex()\n \n         tx_info = from_node.testmempoolaccept([tx_hex])[0]\n         self._utxos.append({'txid': tx_info['txid'], 'vout': 0, 'value': send_value})",
    "path": "test/functional/test_framework/wallet.py",
    "position": null,
    "original_position": 29,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thank you for the suggestion! I moved the append utxo after `sendrawtransaction`",
    "created_at": "2021-02-19T16:22:14Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579308133",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579308133"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579308133"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579308133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 80,
    "side": "RIGHT",
    "in_reply_to_id": 575909995
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579308335",
    "pull_request_review_id": 594349065,
    "id": 579308335,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3OTMwODMzNQ==",
    "diff_hunk": "@@ -35,7 +35,7 @@\n     assert_raises_rpc_error,\n     hex_str_to_bytes,\n )\n-\n+from test_framework.wallet import MiniWallet\n \n class MempoolAcceptanceTest(BitcoinTestFramework):\n     def set_test_params(self):",
    "path": "test/functional/mempool_accept.py",
    "position": 8,
    "original_position": 8,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "91c2848db8122d3a9ccee9f05775ccaf9bed2e19",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed!",
    "created_at": "2021-02-19T16:22:31Z",
    "updated_at": "2021-03-01T16:14:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579308335",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579308335"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r579308335"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/579308335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 41,
    "original_line": 41,
    "side": "RIGHT",
    "in_reply_to_id": 575334436
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586078009",
    "pull_request_review_id": 602474022,
    "id": 586078009,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjA3ODAwOQ==",
    "diff_hunk": "@@ -55,7 +55,7 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, nVersion = 1, default_fee = False):",
    "path": "test/functional/test_framework/wallet.py",
    "position": 5,
    "original_position": 5,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Since it's optional\r\n```suggestion\r\n    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None, send_tx=True, nVersion=1, seq_num=0xffffffff, default_fee=False):\r\n```",
    "created_at": "2021-03-03T03:19:49Z",
    "updated_at": "2021-03-03T03:41:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586078009",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586078009"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586078009"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586078009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 58,
    "original_line": 58,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586079887",
    "pull_request_review_id": 602474022,
    "id": 586079887,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjA3OTg4Nw==",
    "diff_hunk": "@@ -65,15 +65,20 @@ def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_sp\n         assert send_value > 0\n \n         tx = CTransaction()\n-        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']))]\n+        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']), nSequence = seq_num)]\n         tx.vout = [CTxOut(int(send_value * COIN), self._scriptPubKey)]\n+        tx.nVersion = 2\n         tx.wit.vtxinwit = [CTxInWitness()]\n         tx.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n         tx_hex = tx.serialize().hex()\n \n         tx_info = from_node.testmempoolaccept([tx_hex])[0]\n-        self._utxos.append({'txid': tx_info['txid'], 'vout': 0, 'value': send_value})\n-        from_node.sendrawtransaction(tx_hex)\n+        if send_tx:\n+            if default_fee:",
    "path": "test/functional/test_framework/wallet.py",
    "position": 25,
    "original_position": 25,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This should be called `bypass_maxfeerate`. But really, since it's a parameter for `sendrawtransaction`, why isn't the caller doing a `send_tx=False` and then submitting it themselves?",
    "created_at": "2021-03-03T03:26:28Z",
    "updated_at": "2021-03-03T03:41:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586079887",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586079887"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586079887"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586079887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 77,
    "original_line": 77,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586080430",
    "pull_request_review_id": 602474022,
    "id": 586080430,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjA4MDQzMA==",
    "diff_hunk": "@@ -65,15 +65,20 @@ def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_sp\n         assert send_value > 0\n \n         tx = CTransaction()\n-        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']))]\n+        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']), nSequence = seq_num)]\n         tx.vout = [CTxOut(int(send_value * COIN), self._scriptPubKey)]\n+        tx.nVersion = 2",
    "path": "test/functional/test_framework/wallet.py",
    "position": 16,
    "original_position": 16,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You're accepting a `nVersion` param but not using it?",
    "created_at": "2021-03-03T03:28:01Z",
    "updated_at": "2021-03-03T03:41:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586080430",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586080430"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586080430"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586080430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 70,
    "original_line": 70,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586082917",
    "pull_request_review_id": 602474022,
    "id": 586082917,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjA4MjkxNw==",
    "diff_hunk": "@@ -58,38 +56,32 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n         self.log.info('Start with empty mempool, and 200 blocks')\n         self.mempool_size = 0\n+        miniwallet.generate(10)\n+        node.generate(190)\n         assert_equal(node.getblockcount(), 200)\n         assert_equal(node.getmempoolinfo()['size'], self.mempool_size)\n-        coins = node.listunspent()\n \n         self.log.info('Should not accept garbage to testmempoolaccept')\n         assert_raises_rpc_error(-3, 'Expected type array, got string', lambda: node.testmempoolaccept(rawtxs='ff00baar'))\n         assert_raises_rpc_error(-8, 'Array must contain exactly one raw transaction for now', lambda: node.testmempoolaccept(rawtxs=['ff00baar', 'ff22']))\n         assert_raises_rpc_error(-22, 'TX decode failed', lambda: node.testmempoolaccept(rawtxs=['ff00baar']))\n \n         self.log.info('A transaction already in the blockchain')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        raw_tx_in_block = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout']}],\n-            outputs=[{node.getnewaddress(): 0.3}, {node.getnewaddress(): 49}],\n-        ))['hex']\n-        txid_in_block = node.sendrawtransaction(hexstring=raw_tx_in_block, maxfeerate=0)\n-        node.generate(1)\n+        tx_in_block = miniwallet.send_self_transfer(from_node = node, default_fee = True)\n+        node.generate(1) # Generate a block, tx gets mined therefore mempool is empty\n         self.mempool_size = 0\n         self.check_mempool_result(\n-            result_expected=[{'txid': txid_in_block, 'allowed': False, 'reject-reason': 'txn-already-known'}],\n-            rawtxs=[raw_tx_in_block],\n+            result_expected=[{'txid': tx_in_block['txid'], 'allowed': False, 'reject-reason': 'txn-already-known'}],\n+            rawtxs=[tx_in_block['hex']],\n         )\n \n         self.log.info('A transaction not in the mempool')\n-        fee = Decimal('0.000007')\n-        raw_tx_0 = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{\"txid\": txid_in_block, \"vout\": 0, \"sequence\": BIP125_SEQUENCE_NUMBER}],  # RBF is used later\n-            outputs=[{node.getnewaddress(): Decimal('0.3') - fee}],\n-        ))['hex']\n+        fee = Decimal('0.00000672')",
    "path": "test/functional/mempool_accept.py",
    "position": 65,
    "original_position": 65,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You're changing the fee?",
    "created_at": "2021-03-03T03:36:29Z",
    "updated_at": "2021-03-03T03:41:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586082917",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586082917"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586082917"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586082917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 83,
    "original_line": 83,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586083854",
    "pull_request_review_id": 602474022,
    "id": 586083854,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjA4Mzg1NA==",
    "diff_hunk": "@@ -58,38 +56,32 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n         self.log.info('Start with empty mempool, and 200 blocks')\n         self.mempool_size = 0\n+        miniwallet.generate(10)\n+        node.generate(190)",
    "path": "test/functional/mempool_accept.py",
    "position": 31,
    "original_position": 31,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Assuming this is done to mature the coinbases... is there any reason to do more than 100?",
    "created_at": "2021-03-03T03:39:33Z",
    "updated_at": "2021-03-03T03:41:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586083854",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586083854"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r586083854"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586083854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 64,
    "original_line": 64,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587566013",
    "pull_request_review_id": 604227582,
    "id": 587566013,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzU2NjAxMw==",
    "diff_hunk": "@@ -58,38 +56,32 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n         self.log.info('Start with empty mempool, and 200 blocks')\n         self.mempool_size = 0\n+        miniwallet.generate(10)\n+        node.generate(190)\n         assert_equal(node.getblockcount(), 200)\n         assert_equal(node.getmempoolinfo()['size'], self.mempool_size)\n-        coins = node.listunspent()\n \n         self.log.info('Should not accept garbage to testmempoolaccept')\n         assert_raises_rpc_error(-3, 'Expected type array, got string', lambda: node.testmempoolaccept(rawtxs='ff00baar'))\n         assert_raises_rpc_error(-8, 'Array must contain exactly one raw transaction for now', lambda: node.testmempoolaccept(rawtxs=['ff00baar', 'ff22']))\n         assert_raises_rpc_error(-22, 'TX decode failed', lambda: node.testmempoolaccept(rawtxs=['ff00baar']))\n \n         self.log.info('A transaction already in the blockchain')\n-        coin = coins.pop()  # Pick a random coin(base) to spend\n-        raw_tx_in_block = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{'txid': coin['txid'], 'vout': coin['vout']}],\n-            outputs=[{node.getnewaddress(): 0.3}, {node.getnewaddress(): 49}],\n-        ))['hex']\n-        txid_in_block = node.sendrawtransaction(hexstring=raw_tx_in_block, maxfeerate=0)\n-        node.generate(1)\n+        tx_in_block = miniwallet.send_self_transfer(from_node = node, default_fee = True)\n+        node.generate(1) # Generate a block, tx gets mined therefore mempool is empty\n         self.mempool_size = 0\n         self.check_mempool_result(\n-            result_expected=[{'txid': txid_in_block, 'allowed': False, 'reject-reason': 'txn-already-known'}],\n-            rawtxs=[raw_tx_in_block],\n+            result_expected=[{'txid': tx_in_block['txid'], 'allowed': False, 'reject-reason': 'txn-already-known'}],\n+            rawtxs=[tx_in_block['hex']],\n         )\n \n         self.log.info('A transaction not in the mempool')\n-        fee = Decimal('0.000007')\n-        raw_tx_0 = node.signrawtransactionwithwallet(node.createrawtransaction(\n-            inputs=[{\"txid\": txid_in_block, \"vout\": 0, \"sequence\": BIP125_SEQUENCE_NUMBER}],  # RBF is used later\n-            outputs=[{node.getnewaddress(): Decimal('0.3') - fee}],\n-        ))['hex']\n+        fee = Decimal('0.00000672')",
    "path": "test/functional/mempool_accept.py",
    "position": 65,
    "original_position": 65,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yea cause the previous fee of `fee = Decimal('0.000007')` was too low to pass the mempool test. I manually calculated the fee here `fee_rate = Decimal('0.00007672') - fee,`, to get the best option",
    "created_at": "2021-03-04T15:27:53Z",
    "updated_at": "2021-03-04T15:27:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587566013",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587566013"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587566013"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587566013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 83,
    "original_line": 83,
    "side": "RIGHT",
    "in_reply_to_id": 586082917
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587566632",
    "pull_request_review_id": 604228376,
    "id": 587566632,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzU2NjYzMg==",
    "diff_hunk": "@@ -58,38 +56,32 @@ def check_mempool_result(self, result_expected, *args, **kwargs):\n \n     def run_test(self):\n         node = self.nodes[0]\n+        miniwallet = MiniWallet(node)\n \n         self.log.info('Start with empty mempool, and 200 blocks')\n         self.mempool_size = 0\n+        miniwallet.generate(10)\n+        node.generate(190)",
    "path": "test/functional/mempool_accept.py",
    "position": 31,
    "original_position": 31,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not really, just wanted to keep 200 blocks to mimic the current code",
    "created_at": "2021-03-04T15:28:32Z",
    "updated_at": "2021-03-04T15:28:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587566632",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587566632"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587566632"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587566632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 64,
    "original_line": 64,
    "side": "RIGHT",
    "in_reply_to_id": 586083854
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587567355",
    "pull_request_review_id": 604229284,
    "id": 587567355,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzU2NzM1NQ==",
    "diff_hunk": "@@ -65,15 +65,20 @@ def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_sp\n         assert send_value > 0\n \n         tx = CTransaction()\n-        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']))]\n+        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']), nSequence = seq_num)]\n         tx.vout = [CTxOut(int(send_value * COIN), self._scriptPubKey)]\n+        tx.nVersion = 2",
    "path": "test/functional/test_framework/wallet.py",
    "position": 16,
    "original_position": 16,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "oops my bad \ud83d\ude05",
    "created_at": "2021-03-04T15:29:18Z",
    "updated_at": "2021-03-04T15:29:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587567355",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587567355"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587567355"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587567355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 70,
    "original_line": 70,
    "side": "RIGHT",
    "in_reply_to_id": 586080430
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587571975",
    "pull_request_review_id": 604235391,
    "id": 587571975,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzU3MTk3NQ==",
    "diff_hunk": "@@ -65,15 +65,20 @@ def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_sp\n         assert send_value > 0\n \n         tx = CTransaction()\n-        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']))]\n+        tx.vin = [CTxIn(COutPoint(int(utxo_to_spend['txid'], 16), utxo_to_spend['vout']), nSequence = seq_num)]\n         tx.vout = [CTxOut(int(send_value * COIN), self._scriptPubKey)]\n+        tx.nVersion = 2\n         tx.wit.vtxinwit = [CTxInWitness()]\n         tx.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n         tx_hex = tx.serialize().hex()\n \n         tx_info = from_node.testmempoolaccept([tx_hex])[0]\n-        self._utxos.append({'txid': tx_info['txid'], 'vout': 0, 'value': send_value})\n-        from_node.sendrawtransaction(tx_hex)\n+        if send_tx:\n+            if default_fee:",
    "path": "test/functional/test_framework/wallet.py",
    "position": 25,
    "original_position": 25,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So this was following Darius's [comment](https://github.com/bitcoin/bitcoin/pull/21014#discussion_r575909995). I could only append tx in self.utxos after sending a transaction. If I try to simply send transaction from somewhere else, I wouldn't be able to append it in the internal wallet.py list",
    "created_at": "2021-03-04T15:34:39Z",
    "updated_at": "2021-03-04T15:34:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587571975",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587571975"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587571975"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587571975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 77,
    "original_line": 77,
    "side": "RIGHT",
    "in_reply_to_id": 586079887
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587572312",
    "pull_request_review_id": 604235856,
    "id": 587572312,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzU3MjMxMg==",
    "diff_hunk": "@@ -55,7 +55,7 @@ def get_utxo(self, *, txid=''):\n             index = self._utxos.index(utxo)\n         return self._utxos.pop(index)\n \n-    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), from_node, utxo_to_spend=None):\n+    def send_self_transfer(self, *, fee_rate=Decimal(\"0.003\"), seq_num = 0xffffffff, from_node, utxo_to_spend=None, send_tx = True, nVersion = 1, default_fee = False):",
    "path": "test/functional/test_framework/wallet.py",
    "position": 5,
    "original_position": 5,
    "commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "original_commit_id": "5ed2bdef6d71fdef5dc8a230d01443f4886da716",
    "user": {
      "login": "stackman27",
      "id": 26356227,
      "node_id": "MDQ6VXNlcjI2MzU2MjI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stackman27",
      "html_url": "https://github.com/stackman27",
      "followers_url": "https://api.github.com/users/stackman27/followers",
      "following_url": "https://api.github.com/users/stackman27/following{/other_user}",
      "gists_url": "https://api.github.com/users/stackman27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stackman27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
      "organizations_url": "https://api.github.com/users/stackman27/orgs",
      "repos_url": "https://api.github.com/users/stackman27/repos",
      "events_url": "https://api.github.com/users/stackman27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stackman27/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Gotchu!",
    "created_at": "2021-03-04T15:35:03Z",
    "updated_at": "2021-03-04T15:35:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587572312",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587572312"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21014#discussion_r587572312"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21014"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587572312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 58,
    "original_line": 58,
    "side": "RIGHT",
    "in_reply_to_id": 586078009
  }
]