DrahtBot,2020-06-07 01:15:30,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18991 (Cache responses to GETADDR to prevent topology leaks by naumenkogs)\n* #18077 (net: Add NAT-PMP port forwarding su",https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-640141185,640141185,
naumenkogs,2020-06-07 07:06:43,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-640168588,640168588,
Sjors,2020-06-15 12:02:45,utACK 111109a1e79a9b9ef12a4718b2ab2ab2317fbabc,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-644087020,644087020,
promag,2020-07-05 22:22:55,"ACK 111109a1e79a9b9ef12a4718b2ab2ab2317fbabc.\n\n(ðŸ‘ on the needs release note tag)",https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-653946346,653946346,
naumenkogs,2020-07-07 10:47:28,utACK 111109a1e79a9b9ef12a4718b2ab2ab2317fbabc,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-654768377,654768377,
sipa,2020-07-07 18:38:10,"utACK 111109a1e79a9b9ef12a4718b2ab2ab2317fbabc, but needs rebase.",https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-655048844,655048844,
jonatack,2020-07-08 04:17:21,Concept ACK,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-655273288,655273288,
MarcoFalke,2020-07-09 10:51:45,Added release notes and addressed feedback by @jonatack ,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-656057027,656057027,
jonatack,2020-07-09 13:51:58,ACK fa0540c,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-656140462,656140462,
Sjors,2020-07-09 14:02:10,re-utACK fa0540cd46eaf44d9e1a9f91c3a937986826c4fa,https://github.com/bitcoin/bitcoin/pull/19191#issuecomment-656146133,656146133,
Sjors,2020-06-08 10:43:35,"This comment is confusing, because it suggests `download == noban`. Try: `nodes with the download permission may exceed target`",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436606808,436606808,src/net_processing.cpp
Sjors,2020-06-08 10:46:48,This exception was strange to begin with. But I don't think it has anything to do with `download` permission. Maybe keep it `noban`?,https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436608386,436608386,src/net_processing.cpp
MarcoFalke,2020-06-08 11:36:55,"Thanks, fixed.",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436631170,436631170,src/net_processing.cpp
MarcoFalke,2020-06-08 11:44:18,"Why is is strange? The literal motivation for this is that nodes with this permission can use us ""as a block source"" (#6974).\n\nImagine you spin up an archival node, disconnect it from the network, but make it available in you internal network. Nodes with the download permission should be able to use your archival node as a block source, no?",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436634375,436634375,src/net_processing.cpp
Sjors,2020-06-08 17:09:22,"Ah, that PR explains the problem. Even nodes that are almost synced can be `IsInitialBlockDownload()`, presumably also nodes that have been disconnected for a few days? In that case the new permission makes sense. Would be good to explain in a comment.",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436861651,436861651,src/net_processing.cpp
MarcoFalke,2020-06-08 17:11:20,"Suggestions would be useful. Keep in mind that the documentation already says:\n\n```\ndownload (allow getheaders during IBD, no disconnect after maxuploadtarget limit)",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436862897,436862897,src/net_processing.cpp
Sjors,2020-06-08 17:26:00,"```\n// Allow getheaders while IsInitialBlockDownload is true, such as after prolonged disconnection.\n```\n\nDocumenting that here instead of just in the `bitcoind` help seems useful, especially `IsInitialBlockDownload` has a confusing name.",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r436872645,436872645,src/net_processing.cpp
MarcoFalke,2020-06-15 12:21:42,"> IsInitialBlockDownload has a confusing name\n\nI think `IsInitialBlockDownload` is self-explanatory, so I will leave the documentation as is for now. I am happy to review follow-up documentation improvements, though.",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r440136244,440136244,src/net_processing.cpp
NicolasDorier,2020-06-16 11:53:06,nit: no need to add `PF_DOWNLOAD` here as `PF_NOBAN` set it.,https://github.com/bitcoin/bitcoin/pull/19191#discussion_r440791459,440791459,src/net_permissions.h
MarcoFalke,2020-06-16 13:15:02,"I tried to mimic what `PF_FORCERELAY` was doing. Also, my long term plan is to remove the implicit download permission from noban, but that is up for another discussion.",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r440839559,440839559,src/net_permissions.h
luke-jr,2020-06-16 21:38:38,Agree that being explicit here is best.,https://github.com/bitcoin/bitcoin/pull/19191#discussion_r441157252,441157252,src/net_permissions.h
jonatack,2020-07-08 04:55:38,"If the default `-whitelist` permissions are changed by this PR, consider pulling in the changes from https://github.com/jonatack/bitcoin/commits/whitelist-whitebind-doc-improvements.\n\nnit: follow style for quotes already in use in this test",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r451282594,451282594,test/functional/p2p_permissions.py
MarcoFalke,2020-07-09 10:51:26,"Ah, good point. Added a comment in the test `# Make sure the default values in the command line documentation match the ones here` and updated the help",https://github.com/bitcoin/bitcoin/pull/19191#discussion_r452131802,452131802,test/functional/p2p_permissions.py
