[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558347205",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-558347205",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 558347205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODM0NzIwNQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-25T21:26:23Z",
    "updated_at": "2019-11-25T21:26:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK\r\n\r\nThe quoted discussion mentions that a maximum 31 IP:s fit in a single DNS response packet over UDP. Would it make sense to go with a `nMaxIPs` of `31` instead of the `32`?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558347205/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558739567",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-558739567",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 558739567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODczOTU2Nw==",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?u=62e3204f6586795420395a7059ec7dc7c4a40c7d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T17:37:15Z",
    "updated_at": "2019-11-26T18:37:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "> The quoted discussion mentions that a maximum 31 IP:s fit in a single DNS response packet over UDP. Would it make sense to go with a `nMaxIPs` of `31` instead of the `32`?\r\n\r\nI actually don't remember how I calculated that or if I even calculated it correctly... Someone should verify... :eyes: @EthanHeilman\r\n\r\n___Update___: Ah, so we have 512 bytes to spend, and the DNS response should look something like:\r\nHeader = 96 bits\r\nQuery = 32 bits (assuming \".\" as question)\r\nAnswer = ( 96 bits + 32 bits ) * numIPv4 + ( 96 bits + 128 bits ) * numIPv6\r\n\r\nNote that this assumes we use DNS packet compression in the Answer section, no Authority or Additional sections, and \".\" as the question (empty QNAME).\r\n\r\nSo in this case we can get 31 IPv4 addresses at the most, or 17 IPv6 addresses (with some room to spare).\r\n\r\nThis is just a rough calculation, we have yet to decide whether it is even a good reference point or not.\r\n\r\nReference: https://www2.cs.duke.edu/courses/fall16/compsci356/DNS/DNS-primer.pdf",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558739567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558803899",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-558803899",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 558803899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODgwMzg5OQ==",
    "user": {
      "login": "EthanHeilman",
      "id": 274814,
      "node_id": "MDQ6VXNlcjI3NDgxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/274814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EthanHeilman",
      "html_url": "https://github.com/EthanHeilman",
      "followers_url": "https://api.github.com/users/EthanHeilman/followers",
      "following_url": "https://api.github.com/users/EthanHeilman/following{/other_user}",
      "gists_url": "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EthanHeilman/subscriptions",
      "organizations_url": "https://api.github.com/users/EthanHeilman/orgs",
      "repos_url": "https://api.github.com/users/EthanHeilman/repos",
      "events_url": "https://api.github.com/users/EthanHeilman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EthanHeilman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T20:27:54Z",
    "updated_at": "2019-11-26T20:27:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "If I'm reading the code correctly even if you set `nMaxIPs=1` that will not stop a DNS seeder or misconfigured DNS resolver from sending you far more than `1` IP address over UDP or TCP. Instead Bitcoin will receive all of those IPs and then select `1` of them and throw away the rest. So sadly this change won't fix DNS over TCP grossness.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/73b26e38d7a174d5409dda8aa1fe9804e7779a1f/src/netbase.cpp#L194-L209\r\n\r\nIt seems reasonable to reduce this number to `64`, `32`,  or `16` but beyond that point I start to worry that there is a chance a node will get all offline IP addresses.\r\n\r\nHere is my back of the envelope calculation. Assume that U is the fraction of IP addresses returned by seeders that are offline and numSeeders is the number of DNSseeders. The probability a node gets all unreachable IP addresses is:\r\n\r\n`U^(numSeeders*nMaxIPs)`\r\n\r\n`U=0.9`, `numSeeders=8` and `nMaxIPs = 8` then the probability is 0.001. \r\n\r\n`0.00117=0.9^(8*8)`\r\n\r\nThat is we will see a failure to connect on average once each thousand times a node calls the seeders. Assuming seeders go down from time to time or incoming connection exhaustion attacks we probably want a number greater than `nMaxIPs=8`.\r\n\r\nThe blog post I wrote that counted IP addresses in a DNS query focuses on TCP based responses.\r\n[How many IP addresses can a DNS query return?](https://ethanheilman.tumblr.com/post/110920218915/how-many-ip-addresses-can-a-dns-query-return)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558803899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558832908",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-558832908",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 558832908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1ODgzMjkwOA==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-26T21:52:30Z",
    "updated_at": "2019-11-26T21:58:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Instead Bitcoin will receive all of those IPs and then select `1` of them and throw away the rest. So sadly this change won't fix DNS over TCP grossness.\r\n\r\nYes, that's a good point. Perhaps it should be recommended that Bitcoin DNS seeder implementations limit the number of returned addresses to keep the response in one UDP packet and thus avoiding fragile DNS-over-TCP (fragile due middleboxes filtering TCP/53).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558832908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559179057",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-559179057",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 559179057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1OTE3OTA1Nw==",
    "user": {
      "login": "EthanHeilman",
      "id": 274814,
      "node_id": "MDQ6VXNlcjI3NDgxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/274814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EthanHeilman",
      "html_url": "https://github.com/EthanHeilman",
      "followers_url": "https://api.github.com/users/EthanHeilman/followers",
      "following_url": "https://api.github.com/users/EthanHeilman/following{/other_user}",
      "gists_url": "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EthanHeilman/subscriptions",
      "organizations_url": "https://api.github.com/users/EthanHeilman/orgs",
      "repos_url": "https://api.github.com/users/EthanHeilman/repos",
      "events_url": "https://api.github.com/users/EthanHeilman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EthanHeilman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-27T17:18:00Z",
    "updated_at": "2019-11-27T17:18:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@practicalswift Are there any BIPs around how seeders should behave? I don't think we should specify implementation details, but having a rule saying something like don't return 3000 IPs would be helpful.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559179057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559468955",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-559468955",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 559468955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1OTQ2ODk1NQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-28T12:06:57Z",
    "updated_at": "2019-11-28T12:07:13Z",
    "author_association": "MEMBER",
    "body": ">  Are there any BIPs around how seeders should behave?\r\n\r\nThere's `doc/dnsseed-policy.md` which all DNS seed operators need to agree with (this is particular to this project, not bitcoin in general).\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559468955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560458705",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-560458705",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 560458705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDQ1ODcwNQ==",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?u=62e3204f6586795420395a7059ec7dc7c4a40c7d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-02T15:59:44Z",
    "updated_at": "2019-12-02T15:59:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Some discussion from the other thread: https://github.com/bitcoin/bitcoin/issues/16070#issuecomment-559297746",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560458705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560523250",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-560523250",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 560523250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDUyMzI1MA==",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?u=62e3204f6586795420395a7059ec7dc7c4a40c7d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-02T18:35:00Z",
    "updated_at": "2019-12-02T18:41:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@EthanHeilman yeah I think we can definitely do 32, one thing that I realized after reading TheBlueMatt's response (in the other thread :roll_eyes:) was that: because we set `ai_family = AF_UNSPEC`, we actually get back both the `A` _and_ `AAAA` records, and the total would be more than 32.\r\n\r\nSomething that I want to discuss is: after we get the names from `getaddrinfo`, should we randomize the returned linked list first before truncating to 32 entries? Mostly because `getaddrinfo` is usually implemented in such a way that the `IPv4` addresses come before the `IPv6` addresses. As it currently stands, `IPv6` addresses are already disadvantaged by the fact that less of them fit within a 512byte payload, with this change, we'd be truncating mostly `IPv6` addresses...\r\n\r\n-----\r\n\r\nIt also seems kind of weird that we're basically disadvantaging the `IPv6` network by nature of DNS's 512 byte limit (which remains true even with randomization)... I'm not sure what's best here, but perhaps a limit _per-family_ is what we want?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560523250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560545210",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-560545210",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 560545210,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDU0NTIxMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-02T19:29:58Z",
    "updated_at": "2019-12-02T19:29:58Z",
    "author_association": "MEMBER",
    "body": "FWIW, https://github.com/sipa/bitcoin-seeder responds with as many addresses as fit in a UDP packet.\r\nDNS supports a weird compression scheme that lets record names point to earlier records in the same packet, which IIRC bitcoin-seeder does not use. As a result, the number of addresses that fit actually depends on the length of the domain name. For seed.bitcoin.sipa.be it's 25 IPv4 addresses or 15 IPv6 addresses.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560545210/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560760942",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-560760942",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 560760942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDc2MDk0Mg==",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?u=62e3204f6586795420395a7059ec7dc7c4a40c7d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-02T22:29:41Z",
    "updated_at": "2019-12-02T22:29:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's a branch that limits by family, which I think is more sane: https://github.com/bitcoin/bitcoin/compare/master...dongcarl:2019-12-rework-seeding, note that if the seeders use domain name compression properly, they should be able to fit 16 IPv6 addresses in a single packet.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/560760942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561218793",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561218793",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561218793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTIxODc5Mw==",
    "user": {
      "login": "EthanHeilman",
      "id": 274814,
      "node_id": "MDQ6VXNlcjI3NDgxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/274814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EthanHeilman",
      "html_url": "https://github.com/EthanHeilman",
      "followers_url": "https://api.github.com/users/EthanHeilman/followers",
      "following_url": "https://api.github.com/users/EthanHeilman/following{/other_user}",
      "gists_url": "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EthanHeilman/subscriptions",
      "organizations_url": "https://api.github.com/users/EthanHeilman/orgs",
      "repos_url": "https://api.github.com/users/EthanHeilman/repos",
      "events_url": "https://api.github.com/users/EthanHeilman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EthanHeilman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-03T15:28:35Z",
    "updated_at": "2019-12-03T19:22:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dongcarl \r\n>It also seems kind of weird that we're basically disadvantaging the IPv6 network by nature of DNS's 512 byte limit (which remains true even with randomization)... I'm not sure what's best here, but perhaps a limit per-family is what we want?\r\n\r\nI'm not sure I understand, but I maybe I missed something what is limiting DNS to 512 bytes? Neither Bitcoin's DNS local resolver nor the DNS system have 512 Byte limit. I suppose @sipa's DNSseeder limits responses to 512 Bytes but other seeders don't always.\r\n\r\n>Something that I want to discuss is: after we get the names from getaddrinfo, should we randomize the returned linked list first before truncating to 32 entries? Mostly because getaddrinfo is usually implemented in such a way that the IPv4 addresses come before the IPv6 addresses.\r\n\r\nI'm worried that we now adding complexity to the DNS seeding process and I don't see any benefit that justifies this added complex. Is middleware boxes filtering TCP/53 a serious ongoing problem impacting Bitcoin?\r\n\r\nOn the other hand it seems simple to reduce the number of IP addresses accepted from 256 to 64. Given none of the seeders return more than 50 IP addresses no IPv6 addresses would be dropped in favor of IPv4 addresses even if the response isn't randomized.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561218793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561362074",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561362074",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561362074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTM2MjA3NA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-03T21:20:29Z",
    "updated_at": "2019-12-03T21:20:29Z",
    "author_association": "MEMBER",
    "body": "@EthanHeilman Traditionally, DNS UDP responses are limited to 512 bytes. The EDNS0 extension increases that limit, but isn't implemented by my seeder.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561362074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561398508",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561398508",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561398508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTM5ODUwOA==",
    "user": {
      "login": "EthanHeilman",
      "id": 274814,
      "node_id": "MDQ6VXNlcjI3NDgxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/274814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EthanHeilman",
      "html_url": "https://github.com/EthanHeilman",
      "followers_url": "https://api.github.com/users/EthanHeilman/followers",
      "following_url": "https://api.github.com/users/EthanHeilman/following{/other_user}",
      "gists_url": "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EthanHeilman/subscriptions",
      "organizations_url": "https://api.github.com/users/EthanHeilman/orgs",
      "repos_url": "https://api.github.com/users/EthanHeilman/repos",
      "events_url": "https://api.github.com/users/EthanHeilman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EthanHeilman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-03T23:08:30Z",
    "updated_at": "2019-12-03T23:08:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa What benefit justifies making this code more complex?  The current code doesn't have any negative effects on seeders that use your implementation.\r\n\r\nI see it as a choice between:\r\n\r\n1. Setting `nMaxIPs=16` or `nMaxIPs=32` which would cause a preference for IPv4 over IPv6 in some circumstances, This might require writing additional code to remove this preference.\r\n\r\n2. and setting `nMaxIPs=64` which requires no additional code or added complexity.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561398508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561421061",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561421061",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561421061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTQyMTA2MQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-04T00:35:24Z",
    "updated_at": "2019-12-04T00:35:24Z",
    "author_association": "MEMBER",
    "body": "I have no opinion on the PR here, just giving potentially relevant information about my seeder.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561421061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561732318",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561732318",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561732318,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTczMjMxOA==",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?u=62e3204f6586795420395a7059ec7dc7c4a40c7d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-04T16:50:01Z",
    "updated_at": "2019-12-04T16:50:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@EthanHeilman See my patch here: https://github.com/bitcoin/bitcoin/compare/master...dongcarl:2019-12-rework-seeding\r\n\r\nIt doesn't radomize (so less complexity), but it _does_ pick 16 addresses from each address family (eliminating family bias). Once the seeders use domain name compression properly, they should be able to fit 16 IPv6 addresses in a single packet. Let me know if that seems reasonable, I'd be happy to reach out to seed owners.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561732318/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561758975",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561758975",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561758975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTc1ODk3NQ==",
    "user": {
      "login": "EthanHeilman",
      "id": 274814,
      "node_id": "MDQ6VXNlcjI3NDgxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/274814?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EthanHeilman",
      "html_url": "https://github.com/EthanHeilman",
      "followers_url": "https://api.github.com/users/EthanHeilman/followers",
      "following_url": "https://api.github.com/users/EthanHeilman/following{/other_user}",
      "gists_url": "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EthanHeilman/subscriptions",
      "organizations_url": "https://api.github.com/users/EthanHeilman/orgs",
      "repos_url": "https://api.github.com/users/EthanHeilman/repos",
      "events_url": "https://api.github.com/users/EthanHeilman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EthanHeilman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-04T17:39:08Z",
    "updated_at": "2019-12-04T17:39:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dongcarl \r\nI like your change of pulling seed IPs by family. I think that is a good improvement and I would support merging it. I was mostly responding to the earlier comments about randomization as a solution however this solves that problem nicely.\r\n\r\nIt is satisfying that someone could write a DNS seeder that uses DNS compression to fit 16 IPv4 and 16 IPv6 addresses in one DNS packet. I think this should be recommended behavior.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561758975/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561777529",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-561777529",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 561777529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTc3NzUyOQ==",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?u=62e3204f6586795420395a7059ec7dc7c4a40c7d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-04T18:27:31Z",
    "updated_at": "2019-12-04T18:27:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I like your change of pulling seed IPs by family. I think that is a good improvement and I would support merging it. I was mostly responding to the earlier comments about randomization as a solution however this solves that problem nicely.\r\n\r\nGreat! I'll push it to this PR :-)\r\n\r\n> It is satisfying that someone could write a DNS seeder that uses DNS compression to fit 16 IPv4 and 16 IPv6 addresses in one DNS packet. I think this should be recommended behavior.\r\n\r\nJust to be clear, I believe this will be two DNS packets, one for `A` and another for `AAAA`, we unfortunately can't fit both 16 IPv4 and 16 IPv6 addresses in one single DNS packet.\r\n\r\n-----\r\n\r\nWhat's interesting here is that when I try to observe the outgoing packets using:\r\n```\r\nsudo tcpdump -ni <iface> ip src <iface-ip> and udp and port 53\r\n```\r\n\r\nand run this script:\r\n```python3\r\nimport socket\r\nimport time\r\n\r\nseeds = [ \"seed.bitcoin.sipa.be\",\r\n          \"dnsseed.bluematt.me\",\r\n          \"dnsseed.bitcoin.dashjr.org\",\r\n          \"seed.bitcoinstats.com\",\r\n          \"seed.bitcoin.jonasschnelli.ch\",\r\n          \"seed.btc.petertodd.org\",\r\n          \"seed.bitcoin.sprovoost.nl\",\r\n          \"dnsseed.emzy.de\" ]\r\n\r\nfor seed in seeds:\r\n    for family in [(socket.AF_UNSPEC, \"UNSPEC\"), (socket.AF_INET, \"INET\"), (socket.AF_INET6, \"INET6\")]:\r\n        result = len(socket.getaddrinfo(seed, None, family=family[0], type=socket.SOCK_STREAM, proto=socket.IPPROTO_TCP, flags=socket.AI_ADDRCONFIG))\r\n        print(\"Got {:>4} results for:\\t{}\\t{}\".format(result, family[1], seed))\r\n        input(\"Press Enter to continue...\")\r\n\r\n```\r\n\r\nI see that the `UNSPEC` `getaddrinfo` sends out 4 packets, 2 for A and 2 for AAAA. I think that's twice the number of packets we expect.\r\n\r\nThe `INET` and `INET6` `getaddrinfo` only send out 1 each, which is expected.\r\n\r\nWhat's crazier is that even though the `UNSPEC` one sends out twice the expected number of packets and receives twice the expected number... Its number of results is exactly the sum of the number of results for the `INET` and `INET6` ones...\r\n\r\nMaybe I'm missing something obvious, but this seems strange.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561777529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566119517",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-566119517",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 566119517,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjExOTUxNw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-16T15:51:33Z",
    "updated_at": "2019-12-30T00:42:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17754](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17754.html) (net: Don't allow resolving of std::string with embedded NUL characters. Add tests. by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/566119517/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641347878",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#issuecomment-641347878",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17602",
    "id": 641347878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTM0Nzg3OA==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T14:50:24Z",
    "updated_at": "2020-06-09T14:50:24Z",
    "author_association": "MEMBER",
    "body": "I tried to go through the discussion, but I might be missing some of the points.\r\nIs the goal here is to avoid getting all IPv6 records, because they all might be Sybils (since IPv6 are cheaper)?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641347878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437456975",
    "pull_request_review_id": 427196410,
    "id": 437456975,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1Njk3NQ==",
    "diff_hunk": "@@ -1608,17 +1609,20 @@ void CConnman::ThreadDNSAddressSeed()\n             if (!resolveSource.SetInternal(host)) {\n                 continue;\n             }\n-            unsigned int nMaxIPs = 256; // Limits number of IPs learned from a DNS seed\n-            if (LookupHost(host.c_str(), vIPs, nMaxIPs, true)) {\n-                for (const CNetAddr& ip : vIPs) {\n-                    int nOneDay = 24*3600;\n-                    CAddress addr = CAddress(CService(ip, Params().GetDefaultPort()), requiredServiceBits);\n-                    addr.nTime = GetTime() - 3*nOneDay - rng.randrange(4*nOneDay); // use a random age between 3 and 7 days old\n-                    vAdd.push_back(addr);\n-                    found++;\n+            const unsigned int max_ips_per_family = 16; // Limits number of IPs learned per family from a DNS seed\n+            for (int addrinfo_family : {AF_INET, AF_INET6}) {\n+                if (LookupHost(host.c_str(), vIPs, max_ips_per_family, true, addrinfo_family)) {\n+                    for (const CNetAddr& ip : vIPs) {\n+                        int nOneDay = 24*3600;\n+                        CAddress addr = CAddress(CService(ip, Params().GetDefaultPort()), requiredServiceBits);\n+                        addr.nTime = GetTime() - 3*nOneDay - rng.randrange(4*nOneDay); // use a random age between 3 and 7 days old\n+                        vAdd.push_back(addr);\n+                        found++;\n+                    }\n+                    addrman.Add(vAdd, resolveSource);",
    "path": "src/net.cpp",
    "position": 30,
    "original_position": 30,
    "commit_id": "48a45119d871e19a4ee24bb17e0bd32d7f30e8f9",
    "original_commit_id": "48a45119d871e19a4ee24bb17e0bd32d7f30e8f9",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In the second iteration of `addrinfo_family`, `vAdd` here would also contain records from the first iteration?",
    "created_at": "2020-06-09T14:15:29Z",
    "updated_at": "2020-06-09T14:15:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/17602#discussion_r437456975",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17602",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437456975"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/17602#discussion_r437456975"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17602"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437456975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1622,
    "original_line": 1622,
    "side": "RIGHT"
  }
]