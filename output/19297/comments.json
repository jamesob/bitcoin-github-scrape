[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644856144",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#issuecomment-644856144",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19297",
    "id": 644856144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDg1NjE0NA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T16:00:21Z",
    "updated_at": "2020-06-16T16:00:21Z",
    "author_association": "MEMBER",
    "body": "You may find the issue if you inspect the log generated by the `--tracerpc -l DEBUG` options",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644856144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645534269",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#issuecomment-645534269",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19297",
    "id": 645534269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTUzNDI2OQ==",
    "user": {
      "login": "glowang",
      "id": 38899812,
      "node_id": "MDQ6VXNlcjM4ODk5ODEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/38899812?u=a30a777c2bbc67ca0edc534f6676bb0506b4c1d4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glowang",
      "html_url": "https://github.com/glowang",
      "followers_url": "https://api.github.com/users/glowang/followers",
      "following_url": "https://api.github.com/users/glowang/following{/other_user}",
      "gists_url": "https://api.github.com/users/glowang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glowang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glowang/subscriptions",
      "organizations_url": "https://api.github.com/users/glowang/orgs",
      "repos_url": "https://api.github.com/users/glowang/repos",
      "events_url": "https://api.github.com/users/glowang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glowang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T18:07:17Z",
    "updated_at": "2020-06-17T18:07:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "> You may find the issue if you inspect the log generated by the `--tracerpc -l DEBUG` options\r\n\r\nThanks Marco, really helpful!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645534269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/677941932",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#issuecomment-677941932",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19297",
    "id": 677941932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Nzk0MTkzMg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-20T22:39:40Z",
    "updated_at": "2020-09-29T20:17:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20034 (test: Get rid of default wallet hacks by ryanofsky)\n* #19168 (Refactor: Improve setup_clean_chain semantics by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/677941932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441025889",
    "pull_request_review_id": 431740055,
    "id": 441025889,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyNTg4OQ==",
    "diff_hunk": "@@ -293,8 +295,18 @@ def wait_for_cookie_credentials(self):\n         self._raise_assertion_error(\"Unable to retrieve cookie credentials after {}s\".format(self.rpc_timeout))\n \n     def generate(self, nblocks, maxtries=1000000):\n-        self.log.debug(\"TestNode.generate() dispatches `generate` call to `generatetoaddress`\")\n-        return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries)\n+        # if wallet is not compiled, blocks are generated to an address or descriptor using an HD seed\n+        hd_address = self.getnewaddress()",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 23,
    "commit_id": "de1d6c83cf2ddb44cf91dace2d476574ebf7e2b5",
    "original_commit_id": "5914d8cdb66745112c5d6b0d22b88e7446353ec0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`getnewaddress` is a wallet RPC. If you want this to work when the wallet isn't compiled, you'll need to generate the HD keys in the python test framework.",
    "created_at": "2020-06-16T17:36:03Z",
    "updated_at": "2020-08-17T23:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441025889",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441025889"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441025889"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441025889/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 299,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441628005",
    "pull_request_review_id": 432512076,
    "id": 441628005,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyODAwNQ==",
    "diff_hunk": "@@ -293,8 +295,18 @@ def wait_for_cookie_credentials(self):\n         self._raise_assertion_error(\"Unable to retrieve cookie credentials after {}s\".format(self.rpc_timeout))\n \n     def generate(self, nblocks, maxtries=1000000):\n-        self.log.debug(\"TestNode.generate() dispatches `generate` call to `generatetoaddress`\")\n-        return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries)\n+        # if wallet is not compiled, blocks are generated to an address or descriptor using an HD seed\n+        hd_address = self.getnewaddress()\n+        hd_info = self.getaddressinfo(hd_address)\n+        if self.getwalletinfo()[\"descriptors\"]:\n+            #TODO: figure out how to make sure the keypath does increase & is unique\n+            assert_equal(hd_info[\"hdkeypath\"], \"m/84'/1'/0'/0/\" + str(self.hdkeypathnonce))\n+            self.hdkeypathnonce += 1 ",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 28,
    "commit_id": "de1d6c83cf2ddb44cf91dace2d476574ebf7e2b5",
    "original_commit_id": "5914d8cdb66745112c5d6b0d22b88e7446353ec0",
    "user": {
      "login": "glowang",
      "id": 38899812,
      "node_id": "MDQ6VXNlcjM4ODk5ODEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/38899812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glowang",
      "html_url": "https://github.com/glowang",
      "followers_url": "https://api.github.com/users/glowang/followers",
      "following_url": "https://api.github.com/users/glowang/following{/other_user}",
      "gists_url": "https://api.github.com/users/glowang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glowang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glowang/subscriptions",
      "organizations_url": "https://api.github.com/users/glowang/orgs",
      "repos_url": "https://api.github.com/users/glowang/repos",
      "events_url": "https://api.github.com/users/glowang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glowang/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I added `hdkeypathnonce` here to make sure a new key path is used. But I realized that incrementing the counter variable like this won't work, because many test files would call `getnewaddress()` outside of `generate()`. These new keys generated out of band also belong to the family of our HD tree, but our counter variable will not be aware of this. \r\n(like feature_segwit.py). \r\n\r\nHence, although we want to make sure each time a new key path is used, it doesn't make sense to use member variable like this. Maybe the best way to check is to compare the new keypath with the existing keypool? Or do you have other suggestions? @jnewbery ",
    "created_at": "2020-06-17T15:18:34Z",
    "updated_at": "2020-08-17T23:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441628005",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441628005"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441628005"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441628005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 304,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441636962",
    "pull_request_review_id": 432523827,
    "id": 441636962,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYzNjk2Mg==",
    "diff_hunk": "@@ -293,8 +295,18 @@ def wait_for_cookie_credentials(self):\n         self._raise_assertion_error(\"Unable to retrieve cookie credentials after {}s\".format(self.rpc_timeout))\n \n     def generate(self, nblocks, maxtries=1000000):\n-        self.log.debug(\"TestNode.generate() dispatches `generate` call to `generatetoaddress`\")\n-        return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries)\n+        # if wallet is not compiled, blocks are generated to an address or descriptor using an HD seed\n+        hd_address = self.getnewaddress()",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 23,
    "commit_id": "de1d6c83cf2ddb44cf91dace2d476574ebf7e2b5",
    "original_commit_id": "5914d8cdb66745112c5d6b0d22b88e7446353ec0",
    "user": {
      "login": "glowang",
      "id": 38899812,
      "node_id": "MDQ6VXNlcjM4ODk5ODEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/38899812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glowang",
      "html_url": "https://github.com/glowang",
      "followers_url": "https://api.github.com/users/glowang/followers",
      "following_url": "https://api.github.com/users/glowang/following{/other_user}",
      "gists_url": "https://api.github.com/users/glowang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glowang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glowang/subscriptions",
      "organizations_url": "https://api.github.com/users/glowang/orgs",
      "repos_url": "https://api.github.com/users/glowang/repos",
      "events_url": "https://api.github.com/users/glowang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glowang/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks John! Would you mind giving an example of where this is done currently? I looked around in the test_framework and just the functional test dir in general, but I couldn't find any example of generating hd keys without wallet. Or maybe this is a function that doesn't exist in the functional test dir yet and we can write it?",
    "created_at": "2020-06-17T15:31:04Z",
    "updated_at": "2020-08-17T23:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441636962",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441636962"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441636962"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441636962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 299,
    "side": "RIGHT",
    "in_reply_to_id": 441025889
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441683031",
    "pull_request_review_id": 432584359,
    "id": 441683031,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY4MzAzMQ==",
    "diff_hunk": "@@ -293,8 +295,18 @@ def wait_for_cookie_credentials(self):\n         self._raise_assertion_error(\"Unable to retrieve cookie credentials after {}s\".format(self.rpc_timeout))\n \n     def generate(self, nblocks, maxtries=1000000):\n-        self.log.debug(\"TestNode.generate() dispatches `generate` call to `generatetoaddress`\")\n-        return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries)\n+        # if wallet is not compiled, blocks are generated to an address or descriptor using an HD seed\n+        hd_address = self.getnewaddress()",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 23,
    "commit_id": "de1d6c83cf2ddb44cf91dace2d476574ebf7e2b5",
    "original_commit_id": "5914d8cdb66745112c5d6b0d22b88e7446353ec0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The RPC has non-wallet descriptor RPCs: https://github.com/bitcoin/bitcoin/blob/master/doc/descriptors.md#support-for-output-descriptors-in-bitcoin-core\r\n\r\nIf I had to guess, you are probably looking for `deriveaddresses`",
    "created_at": "2020-06-17T16:43:47Z",
    "updated_at": "2020-08-17T23:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441683031",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441683031"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r441683031"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441683031/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 299,
    "side": "RIGHT",
    "in_reply_to_id": 441025889
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442426297",
    "pull_request_review_id": 433548318,
    "id": 442426297,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQyNjI5Nw==",
    "diff_hunk": "@@ -293,8 +295,18 @@ def wait_for_cookie_credentials(self):\n         self._raise_assertion_error(\"Unable to retrieve cookie credentials after {}s\".format(self.rpc_timeout))\n \n     def generate(self, nblocks, maxtries=1000000):\n-        self.log.debug(\"TestNode.generate() dispatches `generate` call to `generatetoaddress`\")\n-        return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries)\n+        # if wallet is not compiled, blocks are generated to an address or descriptor using an HD seed\n+        hd_address = self.getnewaddress()",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 23,
    "commit_id": "de1d6c83cf2ddb44cf91dace2d476574ebf7e2b5",
    "original_commit_id": "5914d8cdb66745112c5d6b0d22b88e7446353ec0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I was thinking that the keys would be generated in the python test framework. I just assumed that we'd have some HD key generation code to test BIP32, but it appears I was wrong.\r\n\r\nMarco's suggestion to use the `deriveaddress` seems ok, but I don't think you even need to do that. I think you can just pass the descriptor with keypath in to `generatetodescriptor`",
    "created_at": "2020-06-18T18:37:16Z",
    "updated_at": "2020-08-17T23:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r442426297",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442426297"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r442426297"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442426297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 299,
    "side": "RIGHT",
    "in_reply_to_id": 441025889
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449800108",
    "pull_request_review_id": 442627985,
    "id": 449800108,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMDEwOA==",
    "diff_hunk": "@@ -294,9 +296,18 @@ def wait_for_cookie_credentials(self):\n         self._raise_assertion_error(\"Unable to retrieve cookie credentials after {}s\".format(self.rpc_timeout))\n \n     def generate(self, nblocks, maxtries=1000000):\n-        self.log.debug(\"TestNode.generate() dispatches `generate` call to `generatetoaddress`\")\n-        return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries)\n-\n+        # if wallet is not compiled, blocks are generated to an address or descriptor using an HD seed\n+        if '-disablewallet' in self.extra_args:\n+            xpub = \"tpubDAXcJ7s7ZwicqjprRaEWdPoHKrCS215qxGYxpusRLLmJuT69ZSicuGdSfyvyKpvUNYBW1s2U3NSrT6vrCYB9e6nZUEvrqnwXPF8ArTCRXMY\"\n+            finger_print = \"d34db33f\"\n+            keypath = \"/44'/0'/0'/0/\" + str(self.hdkeypathnonce)\n+            desc = \"pkh([\" + finger_print + keypath + \"]\" + xpub+ \"/1)\" \n+            self.hdkeypathnonce += 1\n+            return self.generatetodescriptor(nblocks, desc, maxtries)\n+        else:\n+            hd_address = self.getnewaddress()",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 32,
    "commit_id": "de1d6c83cf2ddb44cf91dace2d476574ebf7e2b5",
    "original_commit_id": "799ac270ca3be5dedac30c3dd26131dd30d6546a",
    "user": {
      "login": "glowang",
      "id": 38899812,
      "node_id": "MDQ6VXNlcjM4ODk5ODEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/38899812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glowang",
      "html_url": "https://github.com/glowang",
      "followers_url": "https://api.github.com/users/glowang/followers",
      "following_url": "https://api.github.com/users/glowang/following{/other_user}",
      "gists_url": "https://api.github.com/users/glowang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glowang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glowang/subscriptions",
      "organizations_url": "https://api.github.com/users/glowang/orgs",
      "repos_url": "https://api.github.com/users/glowang/repos",
      "events_url": "https://api.github.com/users/glowang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glowang/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Once I generate to a new address, many tests that check whether the wallet addr number matches up start failing. I think this is because the getnewaddress is messing up the address count for some tests. But at the same time, we also don't want to generate to deterministic addresses either... I'm not sure what direction I should take here...",
    "created_at": "2020-07-04T19:42:40Z",
    "updated_at": "2020-08-17T23:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r449800108",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449800108"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19297#discussion_r449800108"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/449800108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 308,
    "side": "RIGHT"
  }
]