[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297205628",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#issuecomment-297205628",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10256",
    "id": 297205628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NzIwNTYyOA==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-26T00:45:24Z",
    "updated_at": "2017-04-26T00:45:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK. It would be cool to also test the include_mempool flag to gettxout to check that a) things which are spent in the mempool arent visible via gettxout (even though they are without include_mempool) and b) things which are only available in the mempool are inversely visible.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297205628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297210918",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#issuecomment-297210918",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10256",
    "id": 297210918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NzIxMDkxOA==",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?u=3ee7561b631dfa6e8e465ad9a556bec78cfc84e8&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-26T01:24:07Z",
    "updated_at": "2017-04-26T01:24:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@TheBlueMatt Thank you for your excellent suggestion. I've made the changes as you suggested, squashed and rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297210918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298115603",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#issuecomment-298115603",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10256",
    "id": 298115603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODExNTYwMw==",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?u=3ee7561b631dfa6e8e465ad9a556bec78cfc84e8&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-28T21:54:46Z",
    "updated_at": "2017-04-28T21:54:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "nits addressed, rebased and squashed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298115603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023127",
    "pull_request_review_id": 35465352,
    "id": 114023127,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDAyMzEyNw==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        # test gettxout",
    "path": "test/functional/wallet.py",
    "position": null,
    "original_position": 33,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "697af1899afc9fc54b0dddd85e4cbae0ac485f6e",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: my personal preference is to make this kind of 'heading' comment into a log, so test runners have some feedback as they're running the test.",
    "created_at": "2017-04-28T21:28:23Z",
    "updated_at": "2017-04-28T21:54:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114023127",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023127"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114023127"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 64,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023292",
    "pull_request_review_id": 35465352,
    "id": 114023292,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDAyMzI5Mg==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        # test gettxout\n+        # confirmed tx should be visible if you exclude mempool",
    "path": "test/functional/wallet.py",
    "position": null,
    "original_position": 34,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "697af1899afc9fc54b0dddd85e4cbae0ac485f6e",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This comment isn't quite right. We're not looking at a confirmed transaction here, we're looking at a transaction output who's spend is unconfirmed. That's why if include_mempool is set to False, we still think we own this output",
    "created_at": "2017-04-28T21:29:31Z",
    "updated_at": "2017-04-28T21:54:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114023292",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023292"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114023292"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 65,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023528",
    "pull_request_review_id": 35465352,
    "id": 114023528,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDAyMzUyOA==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        # test gettxout\n+        # confirmed tx should be visible if you exclude mempool\n+        # but invisible if you include mempool\n+        confirmed_txid, confirmed_index = utxos[0][\"txid\"], utxos[0][\"vout\"]\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, False)\n+        assert_equal(txout['value'], 50)\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, True)\n+        assert(txout is None)",
    "path": "test/functional/wallet.py",
    "position": null,
    "original_position": 40,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "697af1899afc9fc54b0dddd85e4cbae0ac485f6e",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "no need for brackets here. [assert is a statement, not a function](http://stackoverflow.com/a/30770447/933705).\r\n\r\nThis should just be: `assert not txout`",
    "created_at": "2017-04-28T21:31:13Z",
    "updated_at": "2017-04-28T21:54:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114023528",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023528"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114023528"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114023528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114024035",
    "pull_request_review_id": 35465352,
    "id": 114024035,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDAyNDAzNQ==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        # test gettxout\n+        # confirmed tx should be visible if you exclude mempool\n+        # but invisible if you include mempool\n+        confirmed_txid, confirmed_index = utxos[0][\"txid\"], utxos[0][\"vout\"]\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, False)\n+        assert_equal(txout['value'], 50)\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, True)\n+        assert(txout is None)\n+        # mempool tx should be invisible if you exclude mempool\n+        # but visible if you include mempool\n+        mempool_index = 0\n+        txout = self.nodes[0].gettxout(mempool_txid, mempool_index, False)\n+        assert(txout is None)\n+        txout = self.nodes[0].gettxout(mempool_txid, mempool_index, True)\n+        # note the mempool tx will have randomly assigned indices\n+        # but 10 will go to node2 and the rest will go to node0\n+        balance = self.nodes[0].getbalance()\n+        assert(txout['value'] in (10, balance))",
    "path": "test/functional/wallet.py",
    "position": null,
    "original_position": 50,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "697af1899afc9fc54b0dddd85e4cbae0ac485f6e",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the intent is clearer if you collect both txouts above, and then test that one of them is equal to 10 and the other is equal to balance. Something like:\r\n\r\n```\r\ntxout0 = self.nodes[0].gettxout(mempool_txid, 0, True)\r\ntxout1 = self.nodes[0].gettxout(mempool_txid, 1, True)\r\n\r\nbalance = self.nodes[0].getbalance()\r\nassert_equal(set(10, balance), set(txout0['value'], txout1['value']))\r\n```",
    "created_at": "2017-04-28T21:34:33Z",
    "updated_at": "2017-04-28T21:54:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114024035",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114024035"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114024035"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114024035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 81,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114024244",
    "pull_request_review_id": 35465352,
    "id": 114024244,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDAyNDI0NA==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        # test gettxout\n+        # confirmed tx should be visible if you exclude mempool\n+        # but invisible if you include mempool\n+        confirmed_txid, confirmed_index = utxos[0][\"txid\"], utxos[0][\"vout\"]\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, False)",
    "path": "test/functional/wallet.py",
    "position": null,
    "original_position": 37,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "697af1899afc9fc54b0dddd85e4cbae0ac485f6e",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "consider using named arguments when the positional arguments are just bools. It makes it difficult for the reader to know what the argument is for (alright, I know you've explained it in the comment above, but the reader still needs to trust that you're right!)",
    "created_at": "2017-04-28T21:36:03Z",
    "updated_at": "2017-04-28T21:54:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114024244",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114024244"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114024244"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114024244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 68,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114026198",
    "pull_request_review_id": 35468708,
    "id": 114026198,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDAyNjE5OA==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        # test gettxout\n+        # confirmed tx should be visible if you exclude mempool\n+        # but invisible if you include mempool\n+        confirmed_txid, confirmed_index = utxos[0][\"txid\"], utxos[0][\"vout\"]\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, False)\n+        assert_equal(txout['value'], 50)\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, True)\n+        assert(txout is None)\n+        # mempool tx should be invisible if you exclude mempool\n+        # but visible if you include mempool\n+        mempool_index = 0\n+        txout = self.nodes[0].gettxout(mempool_txid, mempool_index, False)\n+        assert(txout is None)\n+        txout = self.nodes[0].gettxout(mempool_txid, mempool_index, True)\n+        # note the mempool tx will have randomly assigned indices\n+        # but 10 will go to node2 and the rest will go to node0\n+        balance = self.nodes[0].getbalance()\n+        assert(txout['value'] in (10, balance))",
    "path": "test/functional/wallet.py",
    "position": null,
    "original_position": 50,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "697af1899afc9fc54b0dddd85e4cbae0ac485f6e",
    "user": {
      "login": "jimmysong",
      "id": 524761,
      "node_id": "MDQ6VXNlcjUyNDc2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/524761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmysong",
      "html_url": "https://github.com/jimmysong",
      "followers_url": "https://api.github.com/users/jimmysong/followers",
      "following_url": "https://api.github.com/users/jimmysong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmysong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmysong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmysong/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmysong/orgs",
      "repos_url": "https://api.github.com/users/jimmysong/repos",
      "events_url": "https://api.github.com/users/jimmysong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmysong/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "good idea",
    "created_at": "2017-04-28T21:49:37Z",
    "updated_at": "2017-04-28T21:54:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114026198",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114026198"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114026198"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114026198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 81,
    "side": "RIGHT",
    "in_reply_to_id": 114024035
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114052814",
    "pull_request_review_id": 35495888,
    "id": 114052814,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDA1MjgxNA==",
    "diff_hunk": "@@ -52,13 +52,33 @@ def run_test (self):\n         assert_equal(self.nodes[2].getbalance(), 0)\n \n         # Check that only first and second nodes have UTXOs\n-        assert_equal(len(self.nodes[0].listunspent()), 1)\n+        utxos = self.nodes[0].listunspent()\n+        assert_equal(len(utxos), 1)\n         assert_equal(len(self.nodes[1].listunspent()), 1)\n         assert_equal(len(self.nodes[2].listunspent()), 0)\n \n         # Send 21 BTC from 0 to 2 using sendtoaddress call.\n         self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 11)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+        mempool_txid = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 10)\n+\n+        self.log.info(\"test gettxout\")\n+        # utxo spent in mempool should be visible if you exclude mempool\n+        # but invisible if you include mempool\n+        confirmed_txid, confirmed_index = utxos[0][\"txid\"], utxos[0][\"vout\"]\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, False)\n+        assert_equal(txout['value'], 50)\n+        txout = self.nodes[0].gettxout(confirmed_txid, confirmed_index, True)\n+        assert txout is None\n+        # new utxo from mempool should be invisible if you exclude mempool\n+        # but visible if you include mempool\n+        txout = self.nodes[0].gettxout(mempool_txid, 0, False)\n+        assert txout is None\n+        txout1 = self.nodes[0].gettxout(mempool_txid, 0, True)\n+        txout2 = self.nodes[0].gettxout(mempool_txid, 1, True)",
    "path": "test/functional/wallet.py",
    "position": 46,
    "original_position": 46,
    "commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "original_commit_id": "dd1ea59624458d19ae93838815e2f4b1b1eb73a4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: In the future you might use named args for arguments that are unnamed boolean or integers of a function that takes more than one arg.\r\n\r\n\r\n```py\r\ngettxout(txid=mempool_txid, n=1,include_mempool= True)",
    "created_at": "2017-04-29T12:45:04Z",
    "updated_at": "2017-04-29T12:52:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114052814",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114052814"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10256#discussion_r114052814"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10256"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114052814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 77,
    "original_line": 77,
    "side": "RIGHT"
  }
]