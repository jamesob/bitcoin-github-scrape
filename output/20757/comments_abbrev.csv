DrahtBot,2020-12-23 21:38:47,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20957 (doc: Update tor.md for notes on how to preserve v2 urls (with a not recommended note) by nolim1t)\n* #20582 ([doc]",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-750483780,750483780,
RiccardoMasutti,2020-12-24 12:27:19,Seem ok to me,https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-750868910,750868910,
jonatack,2021-01-09 11:35:32,"Thank you @Rspigler and @Saibato for the excellent feedback. Updated to hopefully address your suggestions. Would you please have another look? Here are all of the changes (last commit only):\n\n<details><summary><code>git diff 8d6197d 316ecd0</code></summary><p>\n\n```diff\ndiff --git a/doc/tor.md b/doc/tor.md\nindex dc26647641..5666ac522b 100644\n--- a/doc/tor.md\n+++ b/doc/tor.md\n@@ -",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-757136417,757136417,
Rspigler,2021-01-09 23:05:23,"I definitely like the direction we're heading in.  But I have some questions from further testing I did:\n\nWe use `stat -c '%G' /run/tor/control.authcookie` to check the group of the cookie file, and then later recommend running the same command to confirm the user is in the Tor group?\n\nAlso, I tried running `cat /run/tor/control.authcookie > /dev/null` on a VM where I hadn't set up `/etc/t",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-757380937,757380937,
DrahtBot,2021-01-13 11:46:08,<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\nðŸ•µï¸ @harding has been requested to review this pull request as specified in the REVIEWERS file.,https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-759396456,759396456,
prayank23,2021-01-25 15:42:44,"Couple of things that I wanted to discuss and I don't think there will be a better place because its related to Bitcoin Core and Tor:\n\n1. Dandelion++ was not implemented in Bitcoin Core. Details here: https://github.com/bitcoin/bitcoin/issues/20203 So Tor is very important for Bitcoin Core users. How do we make it easier for everyone to use and get more users running onion service when using B",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-766906173,766906173,
michaelfolkson,2021-01-25 16:32:25,"A couple of suggestions @prayank23.\n\n1. Use IRC more (bitcoin-core-pr-reviews, bitcoin-core-dev channels). That is much better suited for general discussion and conversation (and I would prefer to respond to your questions there than on a Core PR in the middle of review). Of course sometimes no one responds on IRC, StackExchange or anywhere else. We all have to deal with this if we ask lots of",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-766941048,766941048,
prayank23,2021-01-25 16:43:12,"> Use IRC more (bitcoin-core-pr-reviews, bitcoin-core-dev channels). That is much better suited for general discussion and conversation (and I would prefer to respond to your questions there than on a Core PR in the middle of review). Of course sometimes no one responds on IRC, StackExchange or anywhere else. We all have to deal with this if we ask lots of questions. One of the downsides of open s",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-766948075,766948075,
jonatack,2021-01-25 17:59:30,"@prayank23 It's difficult to successfully propose changes to `tor.md` as it attracts requests and discussion, but we have been improving it little by little over time. What would be useful here is either specific feedback like @Rspigler has been providing (I'll update to address it!) or ACKs. FWIW, Tor is currently looking to [hire an anti-censorship developer](https://twitter.com/torproject/statu",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767002708,767002708,
prayank23,2021-01-25 18:12:06,"@jonatack ACK on changes proposed in this PR\n\nI have suggested two additions in ""Privacy"" section: 1. Use Tor and Tor bridges according to user environment 2. Renewal of onion address\n\nI think I will open a new PR for it and discussion on other topics will only happen if people think they are important (irrespective of platform used for discussion) for improving privacy in Bitcoin Core.\n",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767010762,767010762,
jonatack,2021-01-25 20:28:31,"Thanks for the feedback. I dropped the confusing parts at the end; updated the last commit per `git diff 316ecd0 2bfc81b`\n\n@Rspigler, @Saibato, @michaelfolkson, @prayank23, @RiccardoMasutti -- would you please have a look and comment, or ACK if the changes look good to you?\n",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767092698,767092698,
jonatack,2021-01-25 20:32:23,"Linter error seems unrelated:\n```\nA new Boost dependency in the form of ""boost/thread/mutex.hpp"" appears to have been introduced:\nsrc/sync.cpp:#include <boost/thread/mutex.hpp>\nsrc/test/sync_tests.cpp:#include <boost/thread/mutex.hpp>\n```\n",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767094998,767094998,
Rspigler,2021-01-25 23:03:28,"ACK 2bfc81b141dc8d6ba8546a03fb35561d806ead63\nTested cookie authentication on Debian according to docs, all issues discussed here (https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-757380937) fixed.",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767169172,767169172,
michaelfolkson,2021-01-26 11:28:15,"ACK 2bfc81b141dc8d6ba8546a03fb35561d806ead63\n\nI haven't tested but read through and looks good.",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767481987,767481987,
jonatack,2021-01-26 14:24:47,"Suggest viewing the last commit with `git show --color-moved=dimmed-zebra`\n",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767574843,767574843,
Rspigler,2021-01-26 19:08:56,ACK 193f9a9c975b612454a1f8121c09ef1e68d56dc1,https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-767763344,767763344,
prayank23,2021-01-27 10:32:53,"ACK https://github.com/bitcoin/bitcoin/commit/193f9a9c975b612454a1f8121c09ef1e68d56dc1\n\nTested with below bitcoin.conf to automatically create bitcoin core onion service:\n\n<pre>\ntestnet=1\nlisten=1\nonlynet=onion\ntorcontrol=127.0.0.1:9151\ndebug=tor\n</pre>\n\nResult for `getnetworkinfo`:\n\n<pre>\n""localaddresses"": [\n    {\n      ""address"": ""d2hsogah4kb5tswzy234xe6vnfw2qtj",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-768192425,768192425,
laanwj,2021-01-28 10:52:17,"> we maintain a fork of Tor\n\nBelieve me, you have no idea what you're suggesting here. A lot of resources go into development of Tor, and the Tor project has its own struggle to fight differently from the one bitcoin is, I think it would be an extremely bad idea to combine those. For example they have people dedicated to finding ways to circumvent internet censorship of regimes like China's, p",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-768969585,768969585,
prayank23,2021-01-28 10:58:39,"> Believe me, you have no idea what you're suggesting here. A lot of resources go into development of Tor, and the Tor project has its own struggle to fight differently from the one bitcoin is, I think it would be an extremely bad idea to combine those\n\nI was not sure and was thinking of solutions to decrease the dependency on Tor for privacy in Bitcoin. Looking for opinions from people who kn",https://github.com/bitcoin/bitcoin/pull/20757#issuecomment-768973157,768973157,
Rspigler,2021-01-06 05:01:39,"On debian, I had to add `CookieAuthFileGroupReadable 1`, not comment-out",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r552370280,552370280,doc/tor.md
Rspigler,2021-01-06 05:03:39,"This all worked for me on Debian, except that `usermod` wasn't found.  To fix, I ran `su -`, then the command.",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r552370706,552370706,doc/tor.md
Rspigler,2021-01-06 05:05:45,"What ""groups command above""?  The above commands just show the Tor group is `debian-tor`, not that the user is in the Tor group?  What works is the `/run/tor/control.authcookie` example below.",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r552371206,552371206,doc/tor.md
Saibato,2021-01-07 08:27:47,"yup,  suboptimal wording \n\nMy suggestion would be \n`will be the following by default commented-out settings, add or uncomment those  ... `",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r553175383,553175383,doc/tor.md
jonatack,2021-01-09 11:03:15,"Yes, it says ""run this as root"" and is to be expected. Thanks for verifying!",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r554375517,554375517,doc/tor.md
jonatack,2021-01-09 11:08:01,"Thanks for the feedback. Updated to:\n```\nYou may need to set up the Tor Control Port. On Linux distributions there may be\nsome or all of the following settings in `/etc/tor/torrc`, generally commented\nout by default (if not, add them):\n\nControlPort 9051\nCookieAuthentication 1\nCookieAuthFileGroupReadable 1\n\nAdd or uncomment those, save, and restart Tor...\n```",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r554377536,554377536,doc/tor.md
prayank23,2021-01-25 15:31:05,"Few things that we can add in ""Privacy recommendations"" section:\n\n1. If Using Tor bridges or even Tor, consider privacy based on your environment: https://bitcoin.stackexchange.com/questions/98772/what-are-the-safe-ways-to-connect-to-bitcoin-network-using-tor\n\n2. We [discussed about renewal of onion address](https://github.com/bitcoin/bitcoin/issues/17491#issuecomment-705485718) in every f",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r563814109,563814109,doc/tor.md
prayank23,2021-01-25 16:44:28,"And here are few things suggested specifically for docs\n\nCc: @michaelfolkson ",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r563871729,563871729,doc/tor.md
jonatack,2021-01-25 17:51:29,"I read the links but it's not clear to me from your comment what specific changes you would like to make to this PR, so resolving this for now. Feel free provide specific suggestions or open a pull with changes you would like to propose that you don't see here.",https://github.com/bitcoin/bitcoin/pull/20757#discussion_r563923230,563923230,doc/tor.md
MarcoFalke,2021-01-26 11:45:01,I think section 2 can be removed? There should be no package manager out there that ships tor 0.2.7. Even xenial has it: https://packages.ubuntu.com/xenial/tor,https://github.com/bitcoin/bitcoin/pull/20757#discussion_r564450034,564450034,doc/tor.md
jonatack,2021-01-26 14:16:59,Good point. The manual config section still seems useful (if I understand correctly) but updated it and moved it after the automatic config section in 193f9a9c975b61.,https://github.com/bitcoin/bitcoin/pull/20757#discussion_r564542683,564542683,doc/tor.md
