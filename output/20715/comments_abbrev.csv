DrahtBot,2020-12-18 16:57:11,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21052 (refactor: Replace fs::unique_path with GetUniquePath(path) calls by kiminuo)\n* #19460 (multiprocess: Add bitcoin-",https://github.com/bitcoin/bitcoin/pull/20715#issuecomment-748203792,748203792,
practicalswift,2020-12-19 09:30:27,Concept ACK,https://github.com/bitcoin/bitcoin/pull/20715#issuecomment-748448430,748448430,
DrahtBot,2021-01-13 11:46:31,<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\nðŸ•µï¸ @jonatack has been requested to review this pull request as specified in the REVIEWERS file.,https://github.com/bitcoin/bitcoin/pull/20715#issuecomment-759396625,759396625,
laanwj,2021-01-20 12:53:31,Concept ACK,https://github.com/bitcoin/bitcoin/pull/20715#issuecomment-763586853,763586853,
ajtowns,2021-02-04 05:27:04,"ACK fa61b9d1a68820758f9540653920deaeae6abe79\n\nLooks good to me, though the third commit has a typo in the description: ""dependend"". Updated https://github.com/ajtowns/bitcoin/commits/202101-util-addcmd ",https://github.com/bitcoin/bitcoin/pull/20715#issuecomment-773039739,773039739,
MarcoFalke,2021-02-04 08:13:56,"> third commit has a typo in the description: ""dependend"".\n\nGood catch. Though, I'll leave this as-is to minimize the re-review backlog.",https://github.com/bitcoin/bitcoin/pull/20715#issuecomment-773118858,773118858,
ajtowns,2021-01-12 05:04:40,"Why ban a dash anywhere in the command, rather than just at the start?",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r555515823,555515823,src/util/system.cpp
ajtowns,2021-01-12 07:50:34,"I'm not sure multiple (sub)commands makes sense for us. At present, I think we have:\n\n * bitcoind - doesn't take subcommands\n * bitcoin-wallet - wants a single subcommand\n * bitcoin-tx - wants multiple instructions with parameters\n * bitcoin-cli - wants to do its own parsing of stuff after the options\n * bitcoin-qt - does its own parsing of stuff after the options for payment server su",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r555571079,555571079,src/util/system.cpp
ajtowns,2021-01-12 07:57:48,"I think this would be a lot better if we could link options to commands (so `-format` could be tied to `createfromdump` directly rather than having it hidden in the help text and having a special cased if statement). Some options would need to be available for multiple (but not all) commands (`-dumpfile` for `dump` and `createfromdump` eg).\n\nThis seems like a bit more of an intrusive change to",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r555574662,555574662,src/bitcoin-wallet.cpp
MarcoFalke,2021-01-12 08:13:50,"> This seems like a bit more of an intrusive change to make, and probably doesn't have to be done immediately though.\n\nIndeed. Will leave this for a follow-up. This should be a minimal bugfix/feature commit.",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r555582290,555582290,src/bitcoin-wallet.cpp
MarcoFalke,2021-01-13 09:14:16,"Thanks, fixed",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r556369068,556369068,src/util/system.cpp
MarcoFalke,2021-01-13 09:14:52,"Thanks, took most of your changes",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r556369445,556369445,src/util/system.cpp
ajtowns,2021-01-15 06:11:15,Might be good to call it `AddCommand` and `GetCommand` for consistency?,https://github.com/bitcoin/bitcoin/pull/20715#discussion_r557883567,557883567,src/util/system.cpp
ajtowns,2021-01-15 06:12:09,"I wonder if it wouldn't be better to always copy the remaining args into `m_command` and have the only difference be that you get an ""unknown command"" when `m_accept_any_command` is set",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r557884197,557884197,src/util/system.cpp
ajtowns,2021-01-15 06:15:48,"This feels a bit messy; when trying this for bitcoin-util, I added a `struct CmdArg { string cmd; vector<string> args; };` to track them both.",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r557886983,557886983,src/bitcoin-wallet.cpp
fjahr,2021-01-16 20:20:43,"nit: I would slightly prefer it this way around:\n```\ntfm::format(std::cerr, ""Error: Additional arguments provided (%s). Commands do not take arguments. Please refer to `-help`. \n"", Join(cmdargs, "", ""));\n```",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r559034972,559034972,src/bitcoin-wallet.cpp
fjahr,2021-01-16 20:21:33,nit: Rename to `command`?,https://github.com/bitcoin/bitcoin/pull/20715#discussion_r559035239,559035239,src/bitcoin-wallet.cpp
fjahr,2021-01-16 20:22:47,"maybe also rename ""method"" to ""command"" here? ",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r559035644,559035644,src/bitcoin-wallet.cpp
MarcoFalke,2021-01-21 12:57:33,"I took the naming from https://github.com/ajtowns/bitcoin/commit/ff48eb93bd485fb5e722d47690508f2a3506d30c. Nonetheless, changed in the latest force push.",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r561859423,561859423,src/util/system.cpp
MarcoFalke,2021-01-21 12:57:46,"Thanks. Fixed, I think",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r561859610,561859610,src/util/system.cpp
MarcoFalke,2021-01-21 12:57:57,"Thanks. Fixed, I think",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r561859772,561859772,src/bitcoin-wallet.cpp
MarcoFalke,2021-01-21 12:58:08,"Thanks, fixed",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r561859916,561859916,src/bitcoin-wallet.cpp
MarcoFalke,2021-01-21 12:58:33,"Thanks, fixed",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r561860250,561860250,src/bitcoin-wallet.cpp
MarcoFalke,2021-01-21 12:58:52,"Seems unrelated, so I am going to leave as is for now to minimize the diff",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r561860449,561860449,src/bitcoin-wallet.cpp
fjahr,2021-01-23 23:29:49,"in fa06bce4ac17f93decd4ee38c956e7aa55983f0d:\n\nnit: Commit message could have been a bit more descriptive ;)",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r563212541,563212541,test/functional/tool_wallet.py
fjahr,2021-01-23 23:38:52,"in fa61b9d1a68820758f9540653920deaeae6abe79:\n\nnit: seeing this now I think I would have named it `CommandCall` or something similar to express that it's command + args. But feel free to ignore my name bikeshedding.",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r563213370,563213370,src/util/system.h
MarcoFalke,2021-01-24 08:16:00,"https://github.com/bitcoin/bitcoin/pull/20715#discussion_r557886983 names it `CmdArg`. So I could call it `CommandArg` or `CommandArgs` (because there might be multiple args to the command). Not sure what to do here, but I think I'll leave this as is for now and let the naming committee determine a suitable name and let them change it after merge.",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r563255808,563255808,src/util/system.h
MarcoFalke,2021-01-24 08:16:23,"Thanks, will change on the next push",https://github.com/bitcoin/bitcoin/pull/20715#discussion_r563255841,563255841,test/functional/tool_wallet.py
