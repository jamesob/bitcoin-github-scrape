[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656291483",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656291483",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656291483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjI5MTQ4Mw==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T18:47:29Z",
    "updated_at": "2020-07-09T18:48:45Z",
    "author_association": "MEMBER",
    "body": "This is a POC, please don't review the code, just the approach. It needs to define the change format among other details.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656291483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656311330",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656311330",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656311330,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjMxMTMzMA==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T19:33:10Z",
    "updated_at": "2020-07-09T19:33:10Z",
    "author_association": "MEMBER",
    "body": "Seems like this should probably use longpolling instead?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656311330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656316834",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656316834",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656316834,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjMxNjgzNA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T19:46:07Z",
    "updated_at": "2020-07-09T19:46:07Z",
    "author_association": "MEMBER",
    "body": "> Pulling can also block until changes are available.\r\n\r\n@luke-jr \u261d\ufe0f",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656316834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656317563",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656317563",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656317563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjMxNzU2Mw==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T19:47:50Z",
    "updated_at": "2020-07-09T19:47:50Z",
    "author_association": "MEMBER",
    "body": "Might be a good idea to optionally start with full `getrawmempool` results(if it's not already)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656317563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656318401",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656318401",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656318401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjMxODQwMQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T19:49:34Z",
    "updated_at": "2020-07-09T19:50:13Z",
    "author_association": "MEMBER",
    "body": "@instagibbs that's already the case, `start` fills the stream with `add <hash>` entries (don't mind the format) so a client never needs to call `getrawmempool` and compare/diff and sync with zmq notifications.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656318401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656321390",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656321390",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656321390,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjMyMTM5MA==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T19:57:01Z",
    "updated_at": "2020-07-09T19:57:01Z",
    "author_association": "MEMBER",
    "body": "Longpolling would support multiple clients on a single buffer. So each request would get a new position id, and requesting with that position id would tell the node where in the shared buffer to begin with new data.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656321390/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656326375",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656326375",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 656326375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NjMyNjM3NQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-09T20:08:42Z",
    "updated_at": "2020-07-09T20:08:51Z",
    "author_association": "MEMBER",
    "body": "@luke-jr yes, it would be possible to share the buffer for all active clients. The problem is when a new client starts a stream, it needs to receive the current mempool and then resume from the shared buffer. I consider this an optimization.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656326375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657377645",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-657377645",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 657377645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzM3NzY0NQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-13T06:04:27Z",
    "updated_at": "2020-09-22T08:47:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19849 (Assert that RPCArg names are equal to CRPCCommand ones (blockchain,rawtransaction) by MarcoFalke)\n* #19725 ([RPC] Add connection type to getpeerinfo, improve logs by amitiuttarwar)\n* #19572 (ZMQ: Create \"sequence\" notifier, enabling client-side mempool tracking by instagibbs)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657377645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663217461",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-663217461",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 663217461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzIxNzQ2MQ==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-23T20:31:15Z",
    "updated_at": "2020-07-23T20:31:15Z",
    "author_association": "MEMBER",
    "body": "Anyone interested in this may be interested in https://github.com/bitcoin/bitcoin/pull/19572 as well.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663217461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663448278",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-663448278",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 663448278,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzQ0ODI3OA==",
    "user": {
      "login": "shuckc",
      "id": 1188286,
      "node_id": "MDQ6VXNlcjExODgyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1188286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shuckc",
      "html_url": "https://github.com/shuckc",
      "followers_url": "https://api.github.com/users/shuckc/followers",
      "following_url": "https://api.github.com/users/shuckc/following{/other_user}",
      "gists_url": "https://api.github.com/users/shuckc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shuckc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shuckc/subscriptions",
      "organizations_url": "https://api.github.com/users/shuckc/orgs",
      "repos_url": "https://api.github.com/users/shuckc/repos",
      "events_url": "https://api.github.com/users/shuckc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shuckc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T09:32:26Z",
    "updated_at": "2020-07-24T09:41:43Z",
    "author_association": "NONE",
    "body": "I promised a quick review after the developer IRC chat. My concerns would be:\r\n\r\nIf a client is struggling to handle a particular message type, it's not unimaginable that it might keep re-connecting for a new stream, getting a message and failing. Each time the `MempoolChanges` tracker gets abandoned by the client, but keeps accumulating new events until it hits the backlog-limit. The side-effects of not being able to tie the event stream to a particular client's auto-closable resource (ie. a particular TCP session) are wide ranging. It's likely we'd have to limit the number of currently open streams, and stop serving new `mempoolchanges start` requests, to avoid death by malloc fails. As we don't know how long it will take until the old streams die from overflowing (max depth/current event rate) what would be a sensible retry for a client in this situation? You can't guarantee evicting the oldest stream would help, as that might be a good consumer who is keeping up. So perhaps you'd have to walk the list of open sessions and evict the 'most-backlogged' when a new stream is requested and we are over limit. Which in itself is quite a bit of code to do and will always trigger with worst-case full lists to walk. Many magic parameters to tune. \r\n\r\nSince there's no TCP session for each resource, how would I troubleshoot a bitcoind that's no longer responding to `mempoolchanges start`? With ZMQ there is a kernel max-backlog depth for accepting sockets, and I can use netstat or my OS tools of choice to find the culprit who is hogging the resources. With these anonymous sessions, I'd need some sort of a debug command in bitcoind to show me all the open MempoolChanges instances, with the last connecting endpoint's IP address/hostname, and the backlog for each for it to be of any use. An administrators nightmare. \r\n\r\nThere is also notably no isolation between streams. I can cause havoc (or at least, defeat the whole reliable nature of this scheme) by requesting an event from a different client's stream. The original client is then gaped and has no idea. You could defend against this by including the stream sequence number in the reply (so the client can detect gaps) and issuing the stream identifier numbers secure-randomly (to make them non-predictable), but these are both extra bytes you need to carry around on every request/response that a per-subscriber TCP stream does away with.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663448278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663469508",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-663469508",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 663469508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzQ2OTUwOA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T10:16:38Z",
    "updated_at": "2020-07-24T10:16:55Z",
    "author_association": "MEMBER",
    "body": "Thanks for the comments @shuckc \r\n\r\nI'm not that worried about memory. Of course it would be a problem if you start lots of streams and you don't poll from them. We could limit the sum of all streams sizes. Anyway, internally streams could share the same data, see https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-656326375.\r\n\r\nCurrently the client has to periodically request for changes, but the connection can be reused as we support multiple requests on the same connection. Long polling is not implemented, but once it's implemented it only reduces unnecessary empty requests.\r\n\r\nI think this approach would be preferable in the REST interface with actual long polling, where the response doesn't actually finishes, but the client keeps reading them. But we don't have support in http server for this yet.\r\n\r\n> With these anonymous sessions, I'd need some sort of a debug command in bitcoind to show me all the open MempoolChanges instances, with the last connecting endpoint's IP address/hostname, and the backlog for each for it to be of any use.\r\n\r\nI thought of `mempoolchanges status` where it would return the list and stream size.\r\n\r\n> There is also notably no isolation between streams. I can cause havoc (or at least, defeat the whole reliable nature of this scheme) by requesting an event from a different client's stream. The original client is then gaped and has no idea.\r\n\r\nI'm assuming clients don't mess around with other streams, that's why the stream id isn't reused. I though about letting the client give a name for the stream (`start foo`) but meh.\r\n\r\n> but these are both extra bytes you need to carry around on every request/response that a per-subscriber TCP stream does away with.\r\n\r\nA per-subscriber TCP stream isn't fault tolerant, that's the point here where the server holds the changes until that subscriber comes again.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663469508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696854846",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-696854846",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 696854846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5Njg1NDg0Ng==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-22T17:07:08Z",
    "updated_at": "2020-09-22T17:07:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696854846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703778316",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19476#issuecomment-703778316",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19476",
    "id": 703778316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzc3ODMxNg==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-05T17:32:34Z",
    "updated_at": "2020-10-05T17:32:34Z",
    "author_association": "MEMBER",
    "body": "Closing now that #19572 is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703778316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]