luke-jr,2020-05-05 03:01:21,">I think it should be possible to get this merged over the next few weeks. \n\nThis has Concept NACKs and should not be merged.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-623808486,623808486,
jnewbery,2020-05-05 03:05:10,@Empact @jamesob @talkless @sipa @fjahr @pinheadmz @jonasnick @jkczyz @practicalswift @marcinja @MarcoFalke @kilrau @TheBlueMatt - thank you for your reviews on the original PR. I'm going to try to respond to feedback quickly to make progress on this. Please help by reviewing the linked PRs!,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-623809127,623809127,
DrahtBot,2020-05-05 09:26:44,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19020 (net: Use C++11 member initialization in protocol by MarcoFalke)\n* #19010 (net processing: Add support for getcfhe",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-623950927,623950927,
Empact,2020-05-06 21:11:57,"Concept ACK\n\nCurrent Travis linter error:\n```\ntest/functional/p2p_cfilters.py:11:1: F401 'test_framework.messages.NODE_COMPACT_FILTERS' imported but unused\n^---- failure generated from test/lint/lint-python.sh\n```",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-624893632,624893632,
ariard,2020-05-07 09:08:48,"Withdrawing my Concept NACK on the previous PR, ecosystem-wise, BIP157 is better that current light client solutions. Even if there is still long-term serious concerns, it's a broader point that this specific protocol. I can also envision people always servicing filters-headers only to provide filters correctness cheap services.\n\nFew points, maybe for follow-up works:\n*  signal NODE_COMPACT_",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-625129827,625129827,
michaelfolkson,2020-05-07 18:32:10,"Concept ACK.\n\nI need a stronger, more convincing argument that improved light client protocols will drive the number of independent parties running and using a listening full node down.\n\nIf I can be convinced of that I'd consider reversing the Concept ACK. It is clear that that metric is critically important to network health, I don't think there is any disagreement there. But I think a fu",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-625424908,625424908,
ariard,2020-05-08 07:12:27,"@michaelfolkson for discussion clarity, and maybe it isn't clear in my mail sorry, I don't think in any case it will drive the number of independent parties running and using a listening full node down. If bandwidth cost is too high, node operators are just going to stop turn `peerscfilters=false`. The concern is for the light clients ecosystem in itself. ",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-625673702,625673702,
michaelfolkson,2020-05-08 09:08:37,"Sure, that was clear from your mail @ariard. I'm referring to some of the responses to your mailing list post which make arguments for this specific PR to be NACKed. All this project (Bitcoin Core) can do is facilitate superior light client protocols (assuming they are not harmful to the full node ecosystem which I haven't been convinced they are). If the light client ecosystem doesn't take off or",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-625719986,625719986,
luke-jr,2020-05-08 16:18:30,">I need a stronger, more convincing argument that improved light client protocols will drive the number of independent parties running and using a listening full node down.\n\nCurrently, there is a strong incentive to use your own node for privacy. Widely-deployed on nodes, BIP157 destroys this incentive.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-625893978,625893978,
michaelfolkson,2020-05-08 16:52:09,Running a full node will always be the superior option for privacy (and trust minimization) versus using a light client (improved or otherwise). If your primary objective is privacy the incentive is still there to run a full node. BIP157 reduces the gap between full node privacy and light client privacy that is true (light client privacy is improving). But this only affects a cohort of people who ,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-625911768,625911768,
MarcoFalke,2020-05-12 12:50:10,"re-ð”¸â„‚ð•‚ 0ab77d46a0 ðŸ¯\n\nOnly change since my previous review https://github.com/bitcoin/bitcoin/pull/16442#issuecomment-623415561 is:\n\n* Small simplification refactor in init.cpp\n* Removing unused includes and symbols\n* Add log categories to log statements\n* Change return type to void where possible\n* Rework documentation and test a bit \n\nThough, I was wondering why you dropped th",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-627322015,627322015,
jnewbery,2020-05-12 13:43:22,"> Though, I was wondering why you dropped this hunk in the test:\n\nThat was removed for the first PR (since `NODE_COMPACT_FILTERS` is not defined until the last PR in the sequence). Thank you for reminding me to add it back to the final PR.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-627354481,627354481,
jnewbery,2020-05-12 20:01:42,The next PR in the series is #18960: _Add compact block filter headers cache_,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-627562325,627562325,
jnewbery,2020-05-13 01:54:02,"> > Though, I was wondering why you dropped this hunk in the test:\n\n> That was removed for the first PR (since NODE_COMPACT_FILTERS is not defined until the last PR in the sequence). Thank you for reminding me to add it back to the final PR.\n\nThis has now been added back.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-627697498,627697498,
jonasschnelli,2020-05-13 13:06:12,Concept ACK,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-627970723,627970723,
chris-belcher,2020-05-13 17:57:51,"As of April 2019 the size of all the filters is 4GB. I'm imagining a smartphone having to download 4GB from a raspberry pi node just to start up its bitcoin wallet. So would SPV wallets actually use this technology? You can hardly call it ""lightweight"". Not to mention the wallet also has to download the blocks including false positives.\n\nAt 4GB it's not far off from needing less bandwidth to d",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-628151730,628151730,
jonasschnelli,2020-05-13 18:11:55,"@chris-belcher: it is a reasonable point. But does a light client really need to download the whole filterset (the 4GB)? If the app is freshly installed and a wallet has been created, is there a need to download anything from the past? Or would downloading the few MBs per week of filter data (and maybe some blocks including the false positives) be enough?\n\nThings would obviously look different",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-628159142,628159142,
chris-belcher,2020-05-13 18:41:07,"If that's the plan then such a wallet won't be able to reasonably restore old seed phrases after a few years.\n\nSync'ing a brand new wallet has never been much of a problem I think, as even without filters the wallet could download all the new blocks (without witnesses) which would cost about 144 MB/day or just 1.7 kb/sec.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-628174001,628174001,
prusnak,2020-05-13 18:49:52,"Why would you download 144 MB/day if you could download 1MB/day? Think embedded/IoT devices, etc. Also, not everyone is privileged to have bandwidth where downloading 144 MB/day is nothing. It was not very far history when I had a FUP of 100MB/month on my cellphone plan.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-628178308,628178308,
ariard,2020-05-13 19:12:21,"@chris-belcher if you assume this kind of chain backend are going to be primarily used for LN wallets, you may just bookmark confirmation of every of your funding outpoint. Even this kind of wallet may not expose at all onchain addresses. \n\nYou already have to backup channel state, so their storage must already be stateful, you may just increase the scope of it to avoid rescan at all.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-628190266,628190266,
MarcoFalke,2020-05-13 19:22:51,"Just as a general note, I think we should use pull requests for code review of the code changes, not for general protocol and design discussions. Otherwise, it will be hard to follow the review process in the noise. Also, GitHub will start hiding comments if there are too many, making it painful to even read the code review and previous review comments. This can lead to review comments being overl",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-628195814,628195814,
DrahtBot,2020-05-20 13:16:59,<!--cf906140f33d8803c4a75a2196329ecb-->\nðŸ™ This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-631467284,631467284,
jnewbery,2020-05-21 22:56:29,The next PR in this sequence is #19010: _net processing: Add support for getcfheaders_,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-632387019,632387019,
jnewbery,2020-05-26 16:47:48,#19010 is merged. The next PR in this sequence is #19044: _net processing: Add support for getcfilters_,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-634144208,634144208,
jnewbery,2020-06-01 02:27:24,#19044 is merged. Next PR in the sequence is #19070: _Signal NODE_COMPACT_FILTERS support_.,https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-636579587,636579587,
kilrau,2020-08-01 12:52:15,"Forgive me if this was discussed before, but do the served cfilters count against `maxuploadtarget`? https://github.com/bitcoin/bitcoin/pull/16442#issuecomment-623416425 sounds like it.",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-667527397,667527397,
jnewbery,2020-08-13 14:27:18,"![rockets](https://user-images.githubusercontent.com/1063656/90146823-6e53fa00-dd79-11ea-8c47-d4b67a461fed.gif)\n",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-673511321,673511321,
jnewbery,2020-08-13 14:32:17,"> do the served cfilters count against maxuploadtarget? #16442 (comment) sounds like it.\n\nYes, the number of bytes will be counted towards the upload target (but peers will still be able to download compact filters after the target is reached, just as they can still download transactions).",https://github.com/bitcoin/bitcoin/pull/18876#issuecomment-673514139,673514139,
