Empact,2018-08-03T14:19:04Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410268122,410268122,
practicalswift,2018-08-03T14:28:46Z,"Concept ACK\n\nVery good idea!",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410271068,410271068,
MarcoFalke,2018-08-03T14:37:21Z,"ACK, this way we could also reset old travis pull request runs, since it is less likely that the travis.yml changed in the meantime.",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410273655,410273655,
Empact,2018-08-03T14:52:27Z,Could squash d3d19e39111f5a2b7318b8e80a1fbf61f3bb4f99 and d913a4b into 67eee3cc56e6b8014b73c07d8a064b5731a8239e ,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410278264,410278264,
MarcoFalke,2018-08-03T15:09:47Z,"I wonder if it helps to prefix the scripts with two digits to clarify the order in which they are run (03_before_install, 04_...) https://docs.travis-ci.com/user/customizing-the-build/#the-build-lifecycle",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410283692,410283692,
scravy,2018-08-03T15:18:19Z,@Empact squashed and reordered the commits a bit,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410286215,410286215,
scravy,2018-08-03T15:29:22Z,@MarcoFalke I've changed the names of the files according to your suggestion and added a README with the rationale/link to the travis documentation in d55d49c0f9c672327c4eea87aaa7b0f03381eebb,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410289566,410289566,
scravy,2018-08-03T15:36:54Z,Now with the build steps numbered I moved the remaining steps too in a8803bd9e64e6416e6012c22eee849a20a64f633,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410291816,410291816,
Empact,2018-08-03T15:40:07Z,"Big issue with this PR: Travis `-` sections check the return code on a per-command basis. The newly sourced files do not, so failures are not detected unless you detect them in the script and propagate them to Travis.\n\nE.g. see https://travis-ci.org/Empact/bitcoin/jobs/411794591 where I deleted a file to force the `test/lint/git-subtree-check.sh src/secp256k1` lint to fail",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410292765,410292765,
scravy,2018-08-03T16:06:50Z,"@Empact great catch, I added `set -e` before the `source` step. WDYT?",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410300488,410300488,
DrahtBot,2018-08-03T16:39:08Z,<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #13954 (lint: Check for common misspellings using codespell. Fix typos reported by codespell. by practicalswift)\n* #13845 (Include tinyformat as a subtree by Empact)\n* #13728 (Scripts and tools: Run the CI lint stage on mac and linux both by Empact)\n\nIf you consider this pull req,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410309357,410309357,
scravy,2018-08-06T18:46:22Z,"rebased.\n\nin between https://github.com/bitcoin/bitcoin/pull/13859 was merged, I'm now invoking python with LC_ALL=C.UTF_8 in a31bdfcb918469c9d0400a2bd8433fbfddcc411b as it requires that to interpret the emoji correctly. or parse the source file in the first place. Otherwise nothing changed.",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410812217,410812217,
scravy,2018-08-06T20:25:37Z,"@MarcoFalke I've changed the scripts to `export LC_ALL=C.UTF-8` and allowed that in `lint-shell-locale` in 50a51061fd04549625dedeed02bdf890548e3506 (rebased, now 54949499c1fdb860a6019d0b213b187e51a0a1b6)",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-410841917,410841917,
Gnappuraz,2018-08-07T13:10:33Z,utACK,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-411050228,411050228,
scravy,2018-08-10T09:04:01Z,"About conflicting pull requests:\n\n- #13845 will be part of 0.18 and won't be merged soon\n- #13728 is fine and AFAICS ready to go and is perfectly reconcilable with this one (in deed this PR has it's origin in #13816 which has very much the same spirit - running tests on os x natively)\n- #13515 has untackled review comments and an outstanding requested review\n\nThis one I just rebased.",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-412023631,412023631,
scravy,2018-08-15T12:56:21Z,Can this be merged or are there any more remarks/suggestions?,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-413189040,413189040,
MarcoFalke,2018-08-15T13:06:27Z,@scravy It needs review and testing,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-413191636,413191636,
scravy,2018-08-15T13:30:58Z,"@MarcoFalke \n\nSo I was wondering about that. If something touches the travis-definitions only ‚Äì what is the difference between ACK and utACK here, what could I do to _test_ it? I am rebasing this PR every day and the travis build works splendidly every time (except for this one time where everything in travis failed as it did not at all have any network connectivity).\n\nBecause I do not see",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-413198006,413198006,
MarcoFalke,2018-08-15T15:09:32Z,Travis is completely useless when it passes every time. It must also detect any issues that are present and report them correctly.,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-413228411,413228411,
scravy,2018-08-15T15:30:05Z,"Obviously it passes every time because there is no other development happening on this branch, and I'm rebasing against things which passed the CI check before. While reacting to change requests in the discussion in here it very well failed a few times.\n\nFor easier verification would it make sense to link these failing builds?\n\nAgain though, what is a reviewer supposed to do in order to _t",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-413234970,413234970,
practicalswift,2018-08-15T15:50:07Z,"@scravy Yes, a good start would be your idea to try to cause each script to fail individually and verify that the build fails as expected. For the linting script - introduce a linting violation that should make it fail, etc :-)",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-413241607,413241607,
scravy,2018-08-27T11:41:44Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-416199477,416199477,
scravy,2018-08-27T12:27:39Z,"In https://github.com/bitcoin/bitcoin/pull/13863/commits/8ad042b4bebbfd2e38bb4cc7ed36bc047aaf09cd I am explicitly breaking the build by introducing an undocumented argument, which is supposed to fail the lint stage.\n\nHere's the build failing in the lint stage in my repository:\nhttps://travis-ci.org/scravy/bitcoin/jobs/421068804#L575\n\nHere's the build failing in the lint stage as a pull r",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-416209960,416209960,
scravy,2018-08-27T12:47:13Z,"In https://github.com/bitcoin/bitcoin/pull/13863/commits/236091eebfa9fb0234b0ff7549ec730e87d5a589 I'm undoing the lint-error such that the lint stage passes again and introduce a compilation error in `src/init.cpp` to fail the build in the test stage.\n\nHere's the build failing in the test stage in my repository:\nhttps://travis-ci.org/scravy/bitcoin/builds/421075688 (exact failure: https://tr",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-416215037,416215037,
scravy,2018-08-27T12:57:32Z,"In https://github.com/bitcoin/bitcoin/pull/13863/commits/b1ab0435ad245161c3a4906b0fe4a68bd211927a I undo the compile error and introduce a lint violation insisde on of the travis script files (not using LC_ALL=c, violating `lint-shell-locale`).\n\nThis is how it's failing in my repository:\nhttps://travis-ci.org/scravy/bitcoin/jobs/421082198#L579\n\nThis is how it's failing as a pull request:",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-416217536,416217536,
scravy,2018-08-27T14:11:34Z,"@MarcoFalke I see two review comments of yours, yet the PR was merged. You say `RUN_TESTS` is not exported? Will send a follow-up PR then.",https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-416239875,416239875,
scravy,2018-08-27T14:16:43Z,Fixed in https://github.com/bitcoin/bitcoin/pull/14081,https://github.com/bitcoin/bitcoin/pull/13863#issuecomment-416241516,416241516,
ken2812221,2018-08-03T15:03:08Z,2018?,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r207574081,207574081,.travis/before_install.sh
scravy,2018-08-03T15:17:13Z,fixed,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r207578695,207578695,.travis/before_install.sh
Empact,2018-08-03T16:08:29Z,nit: How about `set -o errexit` as more self-documenting?,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r207594366,207594366,.travis.yml
MarcoFalke,2018-08-06T18:58:28Z,"It is somewhat confusing to set `LC_ALL=C.UTF-8` in the travis yaml, then set it to `LC_ALL=C` here, save it into a file, read that by docker, but then overwrite it again with `LC_ALL=C.UTF-8` for the test runner.",https://github.com/bitcoin/bitcoin/pull/13863#discussion_r207995636,207995636,.travis/test_04_install.sh
scravy,2018-08-06T19:31:31Z,The `lint-shell-locale.sh` requires scripts to set `LC_ALL=C`. I could change it to also accept `LC_ALL=C.UTF-8`.,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208004066,208004066,.travis/test_04_install.sh
ken2812221,2018-08-08T07:26:57Z,"nit: `if [[ ! ${FIRST_NON_COMMENT_LINE} =~ ""export LC_ALL=C""(|\.UTF-8)$ ]]; then`",https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208480429,208480429,test/lint/lint-shell-locale.sh
practicalswift,2018-08-08T07:34:00Z,I prefer the current version. It allows for copy and paste.,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208482161,208482161,test/lint/lint-shell-locale.sh
scravy,2018-08-08T08:43:17Z,"@ken2812221 @practicalswift \n\nwhat about\n\n```\n    case ""${FIRST_NON_COMMENT_LINE}"" in\n      ""export LC_ALL=C"");;\n      ""export LC_ALL=C.UTF-8"");;\n      *)\n        echo ""Missing \""export LC_ALL=C\"" (to avoid locale dependence) as first non-comment non-empty line in ${SHELL_SCRIPT}""\n        EXIT_CODE=1\n    esac\n```",https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208501875,208501875,test/lint/lint-shell-locale.sh
ken2812221,2018-08-08T08:49:45Z,LGTM,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208503837,208503837,test/lint/lint-shell-locale.sh
scravy,2018-08-08T08:55:43Z,pushed 336b9ae61511275570bebf4797343f6973c5e9a3,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208505727,208505727,test/lint/lint-shell-locale.sh
practicalswift,2018-08-08T09:02:57Z,"@scravy Oh, I think a simple `if`-statement is much clearer than the suggested `case` construction. I suggest reverting back to the original version which was perfectly fine and simple :-)",https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208507922,208507922,test/lint/lint-shell-locale.sh
scravy,2018-08-08T09:07:52Z,üßêremoved the commit again.,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208509492,208509492,test/lint/lint-shell-locale.sh
practicalswift,2018-08-08T09:17:13Z,@scravy Looks good now! Keep it that way :-),https://github.com/bitcoin/bitcoin/pull/13863#discussion_r208512153,208512153,test/lint/lint-shell-locale.sh
MarcoFalke,2018-08-27T13:57:10Z,"There is no symbol with that name, please adjust",https://github.com/bitcoin/bitcoin/pull/13863#discussion_r212984235,212984235,.travis/test_06_script.sh
MarcoFalke,2018-08-27T13:57:17Z,Same here,https://github.com/bitcoin/bitcoin/pull/13863#discussion_r212984280,212984280,.travis/test_06_script.sh
