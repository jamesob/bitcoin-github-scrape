[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255798182",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#issuecomment-255798182",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8983",
    "id": 255798182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTc5ODE4Mg==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-24T16:53:04Z",
    "updated_at": "2016-10-24T16:53:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "What does this gain over the logging in UpdateTip that we already do?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255798182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255912596",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#issuecomment-255912596",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8983",
    "id": 255912596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTkxMjU5Ng==",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-25T01:37:25Z",
    "updated_at": "2016-10-25T01:37:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gmaxwell The thinking behind this was more along the lines of logging the serialized size of messages received with a view to adding more logging later, perhaps with a command line option to turn this on/off. Blocks, being the largest messages sent/recved, I felt to be particularly notable. \n\nTODO - still needs changing so that ProcessNewBlock detects whether it's called from receiving a block or a compact block, as I don't want it to log \"recv block\" when it's actually a compact block that was received and a block constructed from that.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255912596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260171732",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#issuecomment-260171732",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8983",
    "id": 260171732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDE3MTczMg==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-13T07:42:53Z",
    "updated_at": "2016-11-13T07:42:53Z",
    "author_association": "MEMBER",
    "body": "What's the status of this? If it's still a WIP, can you close the PR for now, and re-open it when it's been finished & rebased?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260171732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/262905154",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#issuecomment-262905154",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8983",
    "id": 262905154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjkwNTE1NA==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-25T08:33:26Z",
    "updated_at": "2016-11-25T08:33:26Z",
    "author_association": "MEMBER",
    "body": "Closing for now, see comment above.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/262905154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84383636",
    "pull_request_review_id": 5166298,
    "id": 84383636,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0MzgzNjM2",
    "diff_hunk": "@@ -3753,9 +3753,14 @@ bool ProcessNewBlock(CValidationState& state, const CChainParams& chainparams, C\n         CBlockIndex *pindex = NULL;\n         bool fNewBlock = false;\n         bool ret = AcceptBlock(*pblock, state, chainparams, &pindex, fRequested, dbp, &fNewBlock);\n-        if (pindex && pfrom) {\n-            mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n-            if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+        if (pfrom) {\n+            if (pindex) {\n+                LogPrint(\"block\", \"recv block %s (%d) size=%d peer=%d\\n\", pblock->GetHash().ToString(), pindex->nHeight,",
    "path": "src/main.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why do you duplicate this line?\n",
    "created_at": "2016-10-20T21:52:34Z",
    "updated_at": "2016-10-20T21:52:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84383636",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84383636"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84383636"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84383636/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3758,
    "original_line": 3758,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84383935",
    "pull_request_review_id": 5166575,
    "id": 84383935,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0MzgzOTM1",
    "diff_hunk": "@@ -6019,10 +6024,9 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     else if (strCommand == NetMsgType::BLOCK && !fImporting && !fReindex) // Ignore blocks received while importing\n     {\n         CBlock block;\n+        pfrom->nBlockSize = vRecv.size(); // Used by ProcessNewBlock() debug",
    "path": "src/main.cpp",
    "position": 22,
    "original_position": 22,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That's not needed, and it's a layer violation, as this is the _serialized_ size, not the block size.\n",
    "created_at": "2016-10-20T21:54:39Z",
    "updated_at": "2016-10-20T21:54:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84383935",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84383935"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84383935"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84383935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 6027,
    "original_line": 6027,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84384192",
    "pull_request_review_id": 5166823,
    "id": 84384192,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0Mzg0MTky",
    "diff_hunk": "@@ -3753,9 +3753,14 @@ bool ProcessNewBlock(CValidationState& state, const CChainParams& chainparams, C\n         CBlockIndex *pindex = NULL;\n         bool fNewBlock = false;\n         bool ret = AcceptBlock(*pblock, state, chainparams, &pindex, fRequested, dbp, &fNewBlock);\n-        if (pindex && pfrom) {\n-            mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n-            if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+        if (pfrom) {\n+            if (pindex) {\n+                LogPrint(\"block\", \"recv block %s (%d) size=%d peer=%d\\n\", pblock->GetHash().ToString(), pindex->nHeight,\n+                    pfrom->nBlockSize, pfrom->id);\n+                mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n+                if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+            } else\n+                LogPrint(\"block\", \"recv block %s size=%d peer=%d\\n\", pblock->GetHash().ToString(), pfrom->nBlockSize, pfrom->id);",
    "path": "src/main.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You can use `::GetSerializeSize(*pblock, SER_DISK, CLIENT_VERSION)` to obtain the total block size, or `GetBlockWeight(*pblock)` to get the weight (the limited resource after segwit, which may be more useful longer term).\n",
    "created_at": "2016-10-20T21:56:13Z",
    "updated_at": "2016-10-20T21:56:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84384192",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84384192"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84384192"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84384192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3763,
    "original_line": 3763,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84573377",
    "pull_request_review_id": 5346062,
    "id": 84573377,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0NTczMzc3",
    "diff_hunk": "@@ -6019,10 +6024,9 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     else if (strCommand == NetMsgType::BLOCK && !fImporting && !fReindex) // Ignore blocks received while importing\n     {\n         CBlock block;\n+        pfrom->nBlockSize = vRecv.size(); // Used by ProcessNewBlock() debug",
    "path": "src/main.cpp",
    "position": 22,
    "original_position": 22,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@sipa thanks. ok, so I need to add the size of the header to get the block size, or subtract it? Do you say it's not needed as there is the function GetSerializeSize()? Happy to call that instead, but I somehow felt I was saving resources by not needing to.\n",
    "created_at": "2016-10-22T09:16:40Z",
    "updated_at": "2016-10-22T09:16:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84573377",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84573377"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84573377"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84573377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 6027,
    "original_line": 6027,
    "side": "RIGHT",
    "in_reply_to_id": 84383935
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84573419",
    "pull_request_review_id": 5346097,
    "id": 84573419,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0NTczNDE5",
    "diff_hunk": "@@ -3753,9 +3753,14 @@ bool ProcessNewBlock(CValidationState& state, const CChainParams& chainparams, C\n         CBlockIndex *pindex = NULL;\n         bool fNewBlock = false;\n         bool ret = AcceptBlock(*pblock, state, chainparams, &pindex, fRequested, dbp, &fNewBlock);\n-        if (pindex && pfrom) {\n-            mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n-            if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+        if (pfrom) {\n+            if (pindex) {\n+                LogPrint(\"block\", \"recv block %s (%d) size=%d peer=%d\\n\", pblock->GetHash().ToString(), pindex->nHeight,\n+                    pfrom->nBlockSize, pfrom->id);\n+                mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n+                if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+            } else\n+                LogPrint(\"block\", \"recv block %s size=%d peer=%d\\n\", pblock->GetHash().ToString(), pfrom->nBlockSize, pfrom->id);",
    "path": "src/main.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Which is more useful to report? the height or the weight? (I am not actually sure what the weight even is!)\n\nShall I close this PR until I've made the changes or is it preferable to leave it open? Or shall I change the title to include WIP since it's still WIP?\n",
    "created_at": "2016-10-22T09:18:56Z",
    "updated_at": "2016-10-22T09:18:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84573419",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84573419"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84573419"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84573419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3763,
    "original_line": 3763,
    "side": "RIGHT",
    "in_reply_to_id": 84384192
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84746001",
    "pull_request_review_id": 5504015,
    "id": 84746001,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0NzQ2MDAx",
    "diff_hunk": "@@ -6019,10 +6024,9 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     else if (strCommand == NetMsgType::BLOCK && !fImporting && !fReindex) // Ignore blocks received while importing\n     {\n         CBlock block;\n+        pfrom->nBlockSize = vRecv.size(); // Used by ProcessNewBlock() debug",
    "path": "src/main.cpp",
    "position": 22,
    "original_position": 22,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "My question is more what do you want to log? How many bytes are being transferred, or the consensus-critical block size?\n\nAssuming compact blocks and other better relay mechanisms take off, the size on the wire will be less and less relevant.\n",
    "created_at": "2016-10-24T18:00:33Z",
    "updated_at": "2016-10-24T18:00:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84746001",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84746001"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84746001"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84746001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 6027,
    "original_line": 6027,
    "side": "RIGHT",
    "in_reply_to_id": 84383935
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84749304",
    "pull_request_review_id": 5507122,
    "id": 84749304,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0NzQ5MzA0",
    "diff_hunk": "@@ -3753,9 +3753,14 @@ bool ProcessNewBlock(CValidationState& state, const CChainParams& chainparams, C\n         CBlockIndex *pindex = NULL;\n         bool fNewBlock = false;\n         bool ret = AcceptBlock(*pblock, state, chainparams, &pindex, fRequested, dbp, &fNewBlock);\n-        if (pindex && pfrom) {\n-            mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n-            if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+        if (pfrom) {\n+            if (pindex) {\n+                LogPrint(\"block\", \"recv block %s (%d) size=%d peer=%d\\n\", pblock->GetHash().ToString(), pindex->nHeight,\n+                    pfrom->nBlockSize, pfrom->id);\n+                mapBlockSource[pindex->GetBlockHash()] = pfrom->GetId();\n+                if (fNewBlock) pfrom->nLastBlockTime = GetTime();\n+            } else\n+                LogPrint(\"block\", \"recv block %s size=%d peer=%d\\n\", pblock->GetHash().ToString(), pfrom->nBlockSize, pfrom->id);",
    "path": "src/main.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "original_commit_id": "b475a41368a6d7e3ce3f2c3af7ad5c6a00e06b91",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Weight is (4 \\* size_without_witness + 1 \\* size_of_witness). In segwit, weight is limited to 4000000.\n",
    "created_at": "2016-10-24T18:15:55Z",
    "updated_at": "2016-10-24T18:15:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84749304",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84749304"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8983#discussion_r84749304"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8983"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84749304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3763,
    "original_line": 3763,
    "side": "RIGHT",
    "in_reply_to_id": 84384192
  }
]